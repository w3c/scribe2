    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::NYTProf version 6.12
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="en-us" />
    <meta name="robots" content="noindex,nofollow" />
    <title>Profile of /home/bert/Work/scribe2/scribe.perl</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script type="text/javascript" src="js/jquery-min.js"></script>

    <script type="text/javascript" src="js/jquery.floatThead.min.js"></script>
    <script type="text/javascript" src="js/jquery.tablesorter.min.js"></script>
    <link rel="stylesheet" type="text/css" href="js/style-tablesorter.css" />
    <script type="text/javascript">
    // when a column is first clicked on to sort it, use descending order
    // XXX doesn't seem to work (and not just because the tablesorter formatSortingOrder() is broken)
    $.tablesorter.defaults.sortInitialOrder = "desc";
    // add parser through the tablesorter addParser method
    $.tablesorter.addParser({
        id: 'fmt_time',   // name of this parser
        is: function(s) {
            return false; // return false so this parser is not auto detected
        },
        format: function(orig) { // format data for normalization
            // console.log(orig);
            var val = orig.replace(/ns/,'');
            if (val != orig) { return val / (1000*1000*1000); }
            val = orig.replace(/[µ\xB5]s/,''); /* micro */
            if (val != orig) { return val / (1000*1000); }
            val = orig.replace(/ms/,'');
            if (val != orig) { return val / (1000); }
            val = orig.replace(/([0-9])s/,"$1");
            if (val != orig) { return val; }
            if (orig == '0') { return orig; }
            var non_number = orig.replace(/^[-+]?[0-9.]+/, '', 'g');
            console.log('no match for fmt_time of '+orig+' (units:'+non_number+' charCodeAt0:'+non_number.charCodeAt(0)+')');
            return orig;
        },
        type: 'numeric' // set type, either numeric or text
    });

    function show_fragment_target() {
        var tgt = $(':target');
        var table = tgt.closest('table.floatHeaders');
        if( tgt.is('a') && table.is('table.floatHeaders') )
        {
            var cury     = $(window).scrollTop();
            var fhYPos   = table.prev('.floatThead-container').offset().top;
            var thHeight = table.find('thead').first().height();
            var tYPos    = parseInt($(':target').closest('tr').position().top);
            if( tYPos < (fhYPos + thHeight) )
            {
                $(window).scrollTop(
                    tYPos - (thHeight)
                );
            }
        }
    }
    </script>
</head>

<body > 
<div class="header" style="position: relative; overflow-x: hidden; overflow-y: hidden; z-index: 0; ">
<div class="header_back">
            <a href="index.html">&larr; Index</a>
        </div>
<div class="headerForeground" style="float: left">
    <span class="siteTitle">NYTProf Performance Profile</span>
    <span class="siteSubtitle">&emsp;&emsp;<span>&laquo;&emsp;<span class="mode_btn mode_btn_selected">line view</span>&emsp;&raquo;</span><br />
            For scribe.perl
        </span>
</div>
<div class="headerForeground" style="float: right; text-align: right">
    <span class="siteTitle">&nbsp;</span>
    <span class="siteSubtitle">Run on Thu Sep 19 20:34:06 2024<br />Reported on Thu Sep 19 20:34:47 2024</span>
</div>
<div style="position: absolute; left: 0px; top: 0%; width: 100%; height: 101%; z-index: -1; background-color: rgb(17, 136, 255); "></div>
<div style="position: absolute; left: 0px; top: 2%; width: 100%; height: 99%; z-index: -1; background-color: rgb(16, 134, 253); "></div>
<div style="position: absolute; left: 0px; top: 4%; width: 100%; height: 97%; z-index: -1; background-color: rgb(16, 133, 252); "></div>
<div style="position: absolute; left: 0px; top: 6%; width: 100%; height: 95%; z-index: -1; background-color: rgb(15, 131, 250); "></div>
<div style="position: absolute; left: 0px; top: 8%; width: 100%; height: 93%; z-index: -1; background-color: rgb(15, 130, 249); "></div>
<div style="position: absolute; left: 0px; top: 10%; width: 100%; height: 91%; z-index: -1; background-color: rgb(15, 129, 248); "></div>
<div style="position: absolute; left: 0px; top: 12%; width: 100%; height: 89%; z-index: -1; background-color: rgb(14, 127, 246); "></div>
<div style="position: absolute; left: 0px; top: 14%; width: 100%; height: 87%; z-index: -1; background-color: rgb(14, 126, 245); "></div>
<div style="position: absolute; left: 0px; top: 16%; width: 100%; height: 85%; z-index: -1; background-color: rgb(14, 125, 244); "></div>
<div style="position: absolute; left: 0px; top: 18%; width: 100%; height: 83%; z-index: -1; background-color: rgb(13, 123, 242); "></div>
<div style="position: absolute; left: 0px; top: 20%; width: 100%; height: 81%; z-index: -1; background-color: rgb(13, 122, 241); "></div>
<div style="position: absolute; left: 0px; top: 22%; width: 100%; height: 79%; z-index: -1; background-color: rgb(13, 121, 240); "></div>
<div style="position: absolute; left: 0px; top: 24%; width: 100%; height: 77%; z-index: -1; background-color: rgb(12, 119, 238); "></div>
<div style="position: absolute; left: 0px; top: 26%; width: 100%; height: 75%; z-index: -1; background-color: rgb(12, 118, 237); "></div>
<div style="position: absolute; left: 0px; top: 28%; width: 100%; height: 73%; z-index: -1; background-color: rgb(12, 116, 235); "></div>
<div style="position: absolute; left: 0px; top: 30%; width: 100%; height: 71%; z-index: -1; background-color: rgb(11, 115, 234); "></div>
<div style="position: absolute; left: 0px; top: 32%; width: 100%; height: 69%; z-index: -1; background-color: rgb(11, 114, 233); "></div>
<div style="position: absolute; left: 0px; top: 34%; width: 100%; height: 67%; z-index: -1; background-color: rgb(11, 112, 231); "></div>
<div style="position: absolute; left: 0px; top: 36%; width: 100%; height: 65%; z-index: -1; background-color: rgb(10, 111, 230); "></div>
<div style="position: absolute; left: 0px; top: 38%; width: 100%; height: 63%; z-index: -1; background-color: rgb(10, 110, 229); "></div>
<div style="position: absolute; left: 0px; top: 40%; width: 100%; height: 61%; z-index: -1; background-color: rgb(10, 108, 227); "></div>
<div style="position: absolute; left: 0px; top: 42%; width: 100%; height: 59%; z-index: -1; background-color: rgb(9, 107, 226); "></div>
<div style="position: absolute; left: 0px; top: 44%; width: 100%; height: 57%; z-index: -1; background-color: rgb(9, 106, 225); "></div>
<div style="position: absolute; left: 0px; top: 46%; width: 100%; height: 55%; z-index: -1; background-color: rgb(9, 104, 223); "></div>
<div style="position: absolute; left: 0px; top: 48%; width: 100%; height: 53%; z-index: -1; background-color: rgb(8, 103, 222); "></div>
<div style="position: absolute; left: 0px; top: 50%; width: 100%; height: 51%; z-index: -1; background-color: rgb(8, 102, 221); "></div>
<div style="position: absolute; left: 0px; top: 52%; width: 100%; height: 49%; z-index: -1; background-color: rgb(8, 100, 219); "></div>
<div style="position: absolute; left: 0px; top: 54%; width: 100%; height: 47%; z-index: -1; background-color: rgb(7, 99, 218); "></div>
<div style="position: absolute; left: 0px; top: 56%; width: 100%; height: 45%; z-index: -1; background-color: rgb(7, 97, 216); "></div>
<div style="position: absolute; left: 0px; top: 58%; width: 100%; height: 43%; z-index: -1; background-color: rgb(7, 96, 215); "></div>
<div style="position: absolute; left: 0px; top: 60%; width: 100%; height: 41%; z-index: -1; background-color: rgb(6, 95, 214); "></div>
<div style="position: absolute; left: 0px; top: 62%; width: 100%; height: 39%; z-index: -1; background-color: rgb(6, 93, 212); "></div>
<div style="position: absolute; left: 0px; top: 64%; width: 100%; height: 37%; z-index: -1; background-color: rgb(6, 92, 211); "></div>
<div style="position: absolute; left: 0px; top: 66%; width: 100%; height: 35%; z-index: -1; background-color: rgb(5, 91, 210); "></div>
<div style="position: absolute; left: 0px; top: 68%; width: 100%; height: 33%; z-index: -1; background-color: rgb(5, 89, 208); "></div>
<div style="position: absolute; left: 0px; top: 70%; width: 100%; height: 31%; z-index: -1; background-color: rgb(5, 88, 207); "></div>
<div style="position: absolute; left: 0px; top: 72%; width: 100%; height: 29%; z-index: -1; background-color: rgb(4, 87, 206); "></div>
<div style="position: absolute; left: 0px; top: 74%; width: 100%; height: 27%; z-index: -1; background-color: rgb(4, 85, 204); "></div>
<div style="position: absolute; left: 0px; top: 76%; width: 100%; height: 25%; z-index: -1; background-color: rgb(4, 84, 203); "></div>
<div style="position: absolute; left: 0px; top: 78%; width: 100%; height: 23%; z-index: -1; background-color: rgb(3, 82, 201); "></div>
<div style="position: absolute; left: 0px; top: 80%; width: 100%; height: 21%; z-index: -1; background-color: rgb(3, 81, 200); "></div>
<div style="position: absolute; left: 0px; top: 82%; width: 100%; height: 19%; z-index: -1; background-color: rgb(3, 80, 199); "></div>
<div style="position: absolute; left: 0px; top: 84%; width: 100%; height: 17%; z-index: -1; background-color: rgb(2, 78, 197); "></div>
<div style="position: absolute; left: 0px; top: 86%; width: 100%; height: 15%; z-index: -1; background-color: rgb(2, 77, 196); "></div>
<div style="position: absolute; left: 0px; top: 88%; width: 100%; height: 13%; z-index: -1; background-color: rgb(2, 76, 195); "></div>
<div style="position: absolute; left: 0px; top: 90%; width: 100%; height: 11%; z-index: -1; background-color: rgb(1, 74, 193); "></div>
<div style="position: absolute; left: 0px; top: 92%; width: 100%; height: 9%; z-index: -1; background-color: rgb(1, 73, 192); "></div>
<div style="position: absolute; left: 0px; top: 94%; width: 100%; height: 7%; z-index: -1; background-color: rgb(1, 72, 191); "></div>
<div style="position: absolute; left: 0px; top: 96%; width: 100%; height: 5%; z-index: -1; background-color: rgb(0, 70, 189); "></div>
<div style="position: absolute; left: 0px; top: 98%; width: 100%; height: 3%; z-index: -1; background-color: rgb(0, 69, 188); "></div>
<div style="position: absolute; left: 0px; top: 100%; width: 100%; height: 1%; z-index: -1; background-color: rgb(0, 68, 187); "></div>
</div>

<div class="body_content"><br />
<table class="file_summary"><tr><td class="h">Filename</td><td align="left"><a href="file:///home/bert/Work/scribe2/scribe.perl">/home/bert/Work/scribe2/scribe.perl</a></td></tr>
<tr><td class="h">Statements</td><td align="left">Executed 14696 statements in 70.6ms</td></tr></table>
        
        <table id="subs_table" border="1" cellpadding="0" class="tablesorter floatHeaders">
        <caption>Subroutines</caption>
        <thead>
        <tr>
        <th>Calls</th>
        <th><span title="Number of Places sub is called from">P</span></th>
        <th><span title="Number of Files sub is called from">F</span></th>
        <th>Exclusive<br />Time</th>
        <th>Inclusive<br />Time</th>
        <th>Subroutine</th>
        </tr>
        </thead>
    <tbody>
<tr><td class="c0">13893</td><td class="c0">22</td><td class="c3">1</td><td class="c0"><span title="10.9%">18.6ms</span></td><td class="c0"><span title="10.9%">18.6ms</span></td><td class="sub_name"><span style="display: none;">main::::CORE:match</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">CORE:match</a>&nbsp;(opcode)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="4.2%">7.20ms</span></td><td class="c0"><span title="7.9%">13.5ms</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@128</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#128">BEGIN@128</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="2.5%">4.31ms</span></td><td class="c0"><span title="17.2%">29.4ms</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@137</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#137">BEGIN@137</a></td></tr>
<tr><td class="c0">298</td><td class="c0">3</td><td class="c3">1</td><td class="c0"><span title="2.4%">4.03ms</span></td><td class="c0"><span title="2.6%">4.41ms</span></td><td class="sub_name"><span style="display: none;">main::::make_id</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#843">make_id</a></td></tr>
<tr><td class="c0">877</td><td class="c0">16</td><td class="c3">1</td><td class="c0"><span title="1.6%">2.76ms</span></td><td class="c0"><span title="9.8%">16.6ms</span></td><td class="sub_name"><span style="display: none;">main::::esc</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">esc</a>&nbsp;(recurses: max depth 2, inclusive time 3.21ms)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="1.5%">2.60ms</span></td><td class="c0"><span title="1.5%">2.63ms</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@127</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#127">BEGIN@127</a></td></tr>
<tr><td class="c0">2036</td><td class="c0">8</td><td class="c3">1</td><td class="c0"><span title="1.3%">2.19ms</span></td><td class="c0"><span title="1.3%">2.19ms</span></td><td class="sub_name"><span style="display: none;">main::::CORE:regcomp</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_regcomp">CORE:regcomp</a>&nbsp;(opcode)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="1.1%">1.87ms</span></td><td class="c0"><span title="24.6%">41.9ms</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@129</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#129">BEGIN@129</a></td></tr>
<tr><td class="c0">2502</td><td class="c0">19</td><td class="c3">1</td><td class="c0"><span title="0.7%">1.13ms</span></td><td class="c0"><span title="0.7%">1.13ms</span></td><td class="sub_name"><span style="display: none;">main::::CORE:subst</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">CORE:subst</a>&nbsp;(opcode)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="0.6%">971µs</span></td><td class="c0"><span title="0.6%">1.08ms</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@133</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#133">BEGIN@133</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="0.5%">922µs</span></td><td class="c0"><span title="1.1%">1.85ms</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@135</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#135">BEGIN@135</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="0.3%">504µs</span></td><td class="c0"><span title="0.4%">722µs</span></td><td class="sub_name"><span style="display: none;">main::::RRSAgent_text_format</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#217">RRSAgent_text_format</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="0.2%">426µs</span></td><td class="c0"><span title="2.8%">4.74ms</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@131</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#131">BEGIN@131</a></td></tr>
<tr><td class="c0">202</td><td class="c3">1</td><td class="c3">1</td><td class="c0"><span title="0.2%">384µs</span></td><td class="c0"><span title="0.2%">424µs</span></td><td class="sub_name"><span style="display: none;">main::::is_cur_scribe</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#741">is_cur_scribe</a></td></tr>
<tr><td class="c0">298</td><td class="c3">1</td><td class="c3">1</td><td class="c1"><span title="0.2%">374µs</span></td><td class="c1"><span title="0.2%">374µs</span></td><td class="sub_name"><span style="display: none;">main::::CORE:unpack</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_unpack">CORE:unpack</a>&nbsp;(opcode)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c1"><span title="0.2%">259µs</span></td><td class="c0"><span title="0.3%">515µs</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@138</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#138">BEGIN@138</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.1%">181µs</span></td><td class="c2"><span title="0.1%">219µs</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@132</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#132">BEGIN@132</a></td></tr>
<tr><td class="c0">145</td><td class="c0">3</td><td class="c3">1</td><td class="c3"><span title="0.1%">143µs</span></td><td class="c3"><span title="0.1%">143µs</span></td><td class="sub_name"><span style="display: none;">main::::CORE:substcont</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_substcont">CORE:substcont</a>&nbsp;(opcode)</td></tr>
<tr><td class="c0">202</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.1%">134µs</span></td><td class="c3"><span title="0.1%">134µs</span></td><td class="sub_name"><span style="display: none;">main::::link_to_recording</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#782">link_to_recording</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.1%">128µs</span></td><td class="c3"><span title="0.1%">128µs</span></td><td class="sub_name"><span style="display: none;">main::::CORE:print</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_print">CORE:print</a>&nbsp;(opcode)</td></tr>
<tr><td class="c0">14</td><td class="c1">2</td><td class="c3">1</td><td class="c3"><span title="0.0%">69µs</span></td><td class="c2"><span title="0.1%">218µs</span></td><td class="sub_name"><span style="display: none;">main::::mklink</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#605">mklink</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">55µs</span></td><td class="c3"><span title="0.0%">55µs</span></td><td class="sub_name"><span style="display: none;">main::::CORE:readline</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_readline">CORE:readline</a>&nbsp;(opcode)</td></tr>
<tr><td class="c0">6</td><td class="c0">6</td><td class="c3">1</td><td class="c3"><span title="0.0%">52µs</span></td><td class="c3"><span title="0.0%">52µs</span></td><td class="sub_name"><span style="display: none;">main::::CORE:sort</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_sort">CORE:sort</a>&nbsp;(opcode)</td></tr>
<tr><td class="c0">8</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">39µs</span></td><td class="c3"><span title="0.0%">75µs</span></td><td class="sub_name"><span style="display: none;">main::::break_url</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#579">break_url</a></td></tr>
<tr><td class="c0">7</td><td class="c0">7</td><td class="c0">7</td><td class="c3"><span title="0.0%">39µs</span></td><td class="c3"><span title="0.0%">39µs</span></td><td class="sub_name"><span style="display: none;">UNIVERSAL::::VERSION</span>UNIVERSAL::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#UNIVERSAL__VERSION">VERSION</a>&nbsp;(xsub)</td></tr>
<tr><td class="c0">4</td><td class="c0">3</td><td class="c3">1</td><td class="c3"><span title="0.0%">34µs</span></td><td class="c3"><span title="0.0%">68µs</span></td><td class="sub_name"><span style="display: none;">main::::add_scribes</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#750">add_scribes</a></td></tr>
<tr><td class="c1">2</td><td class="c1">2</td><td class="c3">1</td><td class="c3"><span title="0.0%">23µs</span></td><td class="c3"><span title="0.0%">23µs</span></td><td class="sub_name"><span style="display: none;">main::::fc_uniq</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#495">fc_uniq</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">17µs</span></td><td class="c3"><span title="0.0%">20µs</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@126</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#126">BEGIN@126</a></td></tr>
<tr><td class="c0">29</td><td class="c0">3</td><td class="c3">1</td><td class="c3"><span title="0.0%">15µs</span></td><td class="c3"><span title="0.0%">15µs</span></td><td class="sub_name"><span style="display: none;">Internals::::SvREADONLY</span>Internals::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#Internals__SvREADONLY">SvREADONLY</a>&nbsp;(xsub)</td></tr>
<tr><td class="c0">27</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">13µs</span></td><td class="c3"><span title="0.0%">13µs</span></td><td class="sub_name"><span style="display: none;">mro::::method_changed_in</span>      mro::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#mro__method_changed_in">method_changed_in</a>&nbsp;(xsub)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">11µs</span></td><td class="c3"><span title="0.0%">11µs</span></td><td class="sub_name"><span style="display: none;">main::::CORE:close</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_close">CORE:close</a>&nbsp;(opcode)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">9µs</span></td><td class="c3"><span title="0.0%">9µs</span></td><td class="sub_name"><span style="display: none;">main::::CORE:pack</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_pack">CORE:pack</a>&nbsp;(opcode)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">6µs</span></td><td class="c3"><span title="0.0%">6µs</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@130</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#130">BEGIN@130</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">5µs</span></td><td class="c3"><span title="0.0%">18µs</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@134</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#134">BEGIN@134</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">5µs</span></td><td class="c3"><span title="0.0%">5µs</span></td><td class="sub_name"><span style="display: none;">version::::(bool</span>  version::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#version___bool">(bool</a>&nbsp;(xsub)</td></tr>
<tr><td class="c1">2</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">5µs</span></td><td class="c3"><span title="0.0%">5µs</span></td><td class="sub_name"><span style="display: none;">main::::repository_to_url</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#503">repository_to_url</a></td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">5µs</span></td><td class="c3"><span title="0.0%">34µs</span></td><td class="sub_name"><span style="display: none;">main::::BEGIN@136</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#136">BEGIN@136</a></td></tr>
<tr><td class="c1">2</td><td class="c1">2</td><td class="c3">1</td><td class="c3"><span title="0.0%">3µs</span></td><td class="c3"><span title="0.0%">3µs</span></td><td class="sub_name"><span style="display: none;">main::::CORE:binmode</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_binmode">CORE:binmode</a>&nbsp;(opcode)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">3µs</span></td><td class="c3"><span title="0.0%">3µs</span></td><td class="sub_name"><span style="display: none;">version::::(cmp</span>  version::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#version___cmp">(cmp</a>&nbsp;(xsub)</td></tr>
<tr><td class="c3">1</td><td class="c3">1</td><td class="c3">1</td><td class="c3"><span title="0.0%">700ns</span></td><td class="c3"><span title="0.0%">700ns</span></td><td class="sub_name"><span style="display: none;">UNIVERSAL::::isa</span>UNIVERSAL::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#UNIVERSAL__isa">isa</a>&nbsp;(xsub)</td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::Bert_IRSSI_Format</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#322">Bert_IRSSI_Format</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::Bip_Format</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#243">Bip_Format</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::IRCCloud_format</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#395">IRCCloud_format</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::Irssi_Format</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#348">Irssi_Format</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::Mirc_Text_Format</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#272">Mirc_Text_Format</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::Plain_Text_Format</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#460">Plain_Text_Format</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::Quassel_paste_format</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#423">Quassel_paste_format</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::Qwebirc_paste_format</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#372">Qwebirc_paste_format</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::RUNTIME</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1">RUNTIME</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::Yahoo_IM_Format</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#301">Yahoo_IM_Format</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::__ANON__[scribe.perl:906]</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#906">__ANON__[scribe.perl:906]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::__ANON__[scribe.perl:907]</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#907">__ANON__[scribe.perl:907]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::__ANON__[scribe.perl:908]</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#908">__ANON__[scribe.perl:908]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::__ANON__[scribe.perl:915]</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#913">__ANON__[scribe.perl:915]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::__ANON__[scribe.perl:917]</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#917">__ANON__[scribe.perl:917]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::__ANON__[scribe.perl:928]</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#928">__ANON__[scribe.perl:928]</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::add_repositories</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#805">add_repositories</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::delete_scribes</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#768">delete_scribes</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::remove_repositories</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#827">remove_repositories</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::to_emph</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#551">to_emph</a></td></tr>
<tr><td class="c3">0</td><td class="c3">0</td><td class="c3">0</td><td class="c3"><span title="0.0%">0s</span></td><td class="c3"><span title="0.0%">0s</span></td><td class="sub_name"><span style="display: none;">main::::to_mathml</span>     main::<a href="home-bert-Work-scribe2-scribe-perl-1-line.html#527">to_mathml</a></td></tr>
</tbody></table>
                Call graph for these subroutines as a
                <a href="http://en.wikipedia.org/wiki/Graphviz">Graphviz</a>
                <a href="home-bert-Work-scribe2-scribe-perl.dot">dot language file</a>.
            
      <table border="1" cellpadding="0" class="floatHeaders">
      <thead>
      <tr><th>Line</th>
      <th><span title="Number of statements executed">State<br />ments</span></th>
      <th><span title="Time spend executing statements on the line,
        excluding time spent executing statements in any called subroutines">Time<br />on line</span></th>
      <th><span title="Number of subroutines calls">Calls</span></th>
      <th><span title="Time spent in subroutines called (inclusive)">Time<br />in subs</span></th>
      <th class="left_indent_header">Code</th>
      </tr>

      </thead>
      <tbody>
    <tr><td class="h"><a name="1"></a>1</td><td></td><td></td><td></td><td></td><td class="s">#!/usr/bin/perl</td></tr>
<tr><td class="h"><a name="2"></a>2</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="3"></a>3</td><td></td><td></td><td></td><td></td><td class="s"># Converts an IRC log to formatted minutes in HTML.</td></tr>
<tr><td class="h"><a name="4"></a>4</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="5"></a>5</td><td></td><td></td><td></td><td></td><td class="s"># See scribe2doc.html for the manual.</td></tr>
<tr><td class="h"><a name="6"></a>6</td><td></td><td></td><td></td><td></td><td class="s"># This is a rewrite of David Booth's scribe.perl</td></tr>
<tr><td class="h"><a name="7"></a>7</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="8"></a>8</td><td></td><td></td><td></td><td></td><td class="s"># TODO: option --inputFormat to select the format, rather than try</td></tr>
<tr><td class="h"><a name="9"></a>9</td><td></td><td></td><td></td><td></td><td class="s"># each parser in turn.</td></tr>
<tr><td class="h"><a name="10"></a>10</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="11"></a>11</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Allow (and ignore) the unused options of old scribe.perl?</td></tr>
<tr><td class="h"><a name="12"></a>12</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="13"></a>13</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Add a command ('oops'? 'undo'? 'ignore'? u///g?) to remove an</td></tr>
<tr><td class="h"><a name="14"></a>14</td><td></td><td></td><td></td><td></td><td class="s"># incorrect s///g, because s|s/.../.../g|| doesn't remove it.</td></tr>
<tr><td class="h"><a name="15"></a>15</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="16"></a>16</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Warn about unrecognized or impossible dates after &quot;Date: ...&quot;</td></tr>
<tr><td class="h"><a name="17"></a>17</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="18"></a>18</td><td></td><td></td><td></td><td></td><td class="s"># TODO: A streaming mode (using --inputFormat) that formats each line</td></tr>
<tr><td class="h"><a name="19"></a>19</td><td></td><td></td><td></td><td></td><td class="s"># as soon as it is read? (s/// and i//// will not work. ScribeNick is</td></tr>
<tr><td class="h"><a name="20"></a>20</td><td></td><td></td><td></td><td></td><td class="s"># not retroactive. Broken lines, as in Mirc logs, are not recombined.)</td></tr>
<tr><td class="h"><a name="21"></a>21</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="22"></a>22</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Make &quot;next meeting&quot; accept a date (&quot;7 Aug&quot;) or a period (&quot;in 2</td></tr>
<tr><td class="h"><a name="23"></a>23</td><td></td><td></td><td></td><td></td><td class="s"># weeks&quot;) and infer a URL?</td></tr>
<tr><td class="h"><a name="24"></a>24</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="25"></a>25</td><td></td><td></td><td></td><td></td><td class="s"># TODO: If trackbot assigns a number (&quot;ISSUE-3&quot;) to an issue, use that</td></tr>
<tr><td class="h"><a name="26"></a>26</td><td></td><td></td><td></td><td></td><td class="s"># number instead of the generic &quot;Issue&quot;. Also use it in the</td></tr>
<tr><td class="h"><a name="27"></a>27</td><td></td><td></td><td></td><td></td><td class="s"># #IssueSummary.</td></tr>
<tr><td class="h"><a name="28"></a>28</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="29"></a>29</td><td></td><td></td><td></td><td></td><td class="s"># TODO: An option to omit the special handling of W3C's bots</td></tr>
<tr><td class="h"><a name="30"></a>30</td><td></td><td></td><td></td><td></td><td class="s"># (currently zakim, rrsagent, agendabot and trackbot).</td></tr>
<tr><td class="h"><a name="31"></a>31</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="32"></a>32</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Make commands such as scribeoptions:-implicit and</td></tr>
<tr><td class="h"><a name="33"></a>33</td><td></td><td></td><td></td><td></td><td class="s"># scribeoptions:-allowspace apply only until they are overridden by</td></tr>
<tr><td class="h"><a name="34"></a>34</td><td></td><td></td><td></td><td></td><td class="s"># another?</td></tr>
<tr><td class="h"><a name="35"></a>35</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="36"></a>36</td><td></td><td></td><td></td><td></td><td class="s"># TODO: RRSAgent has commands to edit or drop actions (because it</td></tr>
<tr><td class="h"><a name="37"></a>37</td><td></td><td></td><td></td><td></td><td class="s"># doesn't understand s///). Should we support those?</td></tr>
<tr><td class="h"><a name="38"></a>38</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="39"></a>39</td><td></td><td></td><td></td><td></td><td class="s"># TODO: An option to add rel=nofollow to links? (In case RRSAgent is</td></tr>
<tr><td class="h"><a name="40"></a>40</td><td></td><td></td><td></td><td></td><td class="s"># used to create Google karma for sites.)</td></tr>
<tr><td class="h"><a name="41"></a>41</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="42"></a>42</td><td></td><td></td><td></td><td></td><td class="s"># TODO: A command to skip several lines or end the minutes before the</td></tr>
<tr><td class="h"><a name="43"></a>43</td><td></td><td></td><td></td><td></td><td class="s"># end of the input. (&quot;StopMinutesHere&quot;, &quot;ResumeMinutesHere&quot;?)</td></tr>
<tr><td class="h"><a name="44"></a>44</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="45"></a>45</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Should s/// commands ignore lines by the W3C bots?</td></tr>
<tr><td class="h"><a name="46"></a>46</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="47"></a>47</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Ivan's minutes generator distinguishes participants (present+)</td></tr>
<tr><td class="h"><a name="48"></a>48</td><td></td><td></td><td></td><td></td><td class="s"># from guests (guest+). Should scribe.perl, too?</td></tr>
<tr><td class="h"><a name="49"></a>49</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="50"></a>50</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Syntax highlighting of verbatim text if there is a language</td></tr>
<tr><td class="h"><a name="51"></a>51</td><td></td><td></td><td></td><td></td><td class="s"># indicated after the backquotes (as in GitHub's markdown)? (```java</td></tr>
<tr><td class="h"><a name="52"></a>52</td><td></td><td></td><td></td><td></td><td class="s"># ...```)</td></tr>
<tr><td class="h"><a name="53"></a>53</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="54"></a>54</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Also allow three tildes (~~~) instead of three backquotes, as</td></tr>
<tr><td class="h"><a name="55"></a>55</td><td></td><td></td><td></td><td></td><td class="s"># in Markdown?</td></tr>
<tr><td class="h"><a name="56"></a>56</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="57"></a>57</td><td></td><td></td><td></td><td></td><td class="s"># TODO: A way to include (phrase-level) HTML directly?</td></tr>
<tr><td class="h"><a name="58"></a>58</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="59"></a>59</td><td></td><td></td><td></td><td></td><td class="s"># TODO: When the minutes don't start with &quot;topic:&quot;, the first</td></tr>
<tr><td class="h"><a name="60"></a>60</td><td></td><td></td><td></td><td></td><td class="s"># &lt;section&gt; is empty. Remove it.</td></tr>
<tr><td class="h"><a name="61"></a>61</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="62"></a>62</td><td></td><td></td><td></td><td></td><td class="s"># TODO: A way to indicate that a phrase is in a particular language?</td></tr>
<tr><td class="h"><a name="63"></a>63</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="64"></a>64</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Add formatting/styling to Zakim's &quot;question&quot; feature?</td></tr>
<tr><td class="h"><a name="65"></a>65</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="66"></a>66</td><td></td><td></td><td></td><td></td><td class="s"># TODO: Recognize the bots if they joined under another nick name.</td></tr>
<tr><td class="h"><a name="67"></a>67</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="68"></a>68</td><td></td><td></td><td></td><td></td><td class="s"># Copyright © 2017-2023 World Wide Web Consortium, (Massachusetts Institute</td></tr>
<tr><td class="h"><a name="69"></a>69</td><td></td><td></td><td></td><td></td><td class="s"># of Technology, European Research Consortium for Informatics and</td></tr>
<tr><td class="h"><a name="70"></a>70</td><td></td><td></td><td></td><td></td><td class="s"># Mathematics, Keio University, Beihang). All Rights Reserved. This</td></tr>
<tr><td class="h"><a name="71"></a>71</td><td></td><td></td><td></td><td></td><td class="s"># work is distributed under the W3C® Software License[1] in the hope</td></tr>
<tr><td class="h"><a name="72"></a>72</td><td></td><td></td><td></td><td></td><td class="s"># that it will be useful, but WITHOUT ANY WARRANTY; without even the</td></tr>
<tr><td class="h"><a name="73"></a>73</td><td></td><td></td><td></td><td></td><td class="s"># implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR</td></tr>
<tr><td class="h"><a name="74"></a>74</td><td></td><td></td><td></td><td></td><td class="s"># PURPOSE.</td></tr>
<tr><td class="h"><a name="75"></a>75</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="76"></a>76</td><td></td><td></td><td></td><td></td><td class="s"># [1] http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document</td></tr>
<tr><td class="h"><a name="77"></a>77</td><td></td><td></td><td></td><td></td><td class="s"># or see the file COPYING included in this distribution.</td></tr>
<tr><td class="h"><a name="78"></a>78</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="79"></a>79</td><td></td><td></td><td></td><td></td><td class="s"># Created: 3 Feb 2017</td></tr>
<tr><td class="h"><a name="80"></a>80</td><td></td><td></td><td></td><td></td><td class="s"># Author: Bert Bos &lt;bert@w3.org&gt;</td></tr>
<tr><td class="h"><a name="81"></a>81</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="82"></a>82</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="83"></a>83</td><td></td><td></td><td></td><td></td><td class="s"># Conversion proceeds in six steps:</td></tr>
<tr><td class="h"><a name="84"></a>84</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="85"></a>85</td><td></td><td></td><td></td><td></td><td class="s"># 1) Various parsers are tried to convert the lines of the input</td></tr>
<tr><td class="h"><a name="86"></a>86</td><td></td><td></td><td></td><td></td><td class="s"># into an array of records (see below for the structure of the</td></tr>
<tr><td class="h"><a name="87"></a>87</td><td></td><td></td><td></td><td></td><td class="s"># records).</td></tr>
<tr><td class="h"><a name="88"></a>88</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="89"></a>89</td><td></td><td></td><td></td><td></td><td class="s"># 2) Processing of &quot;s/old/new/&quot; and &quot;i/where/what/&quot; commands.</td></tr>
<tr><td class="h"><a name="90"></a>90</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="91"></a>91</td><td></td><td></td><td></td><td></td><td class="s"># 3) Scanning for embedded scribeOptions, as they may affect the parsing.</td></tr>
<tr><td class="h"><a name="92"></a>92</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="93"></a>93</td><td></td><td></td><td></td><td></td><td class="s"># 4) Finding the initial scribe, from a command line option or by</td></tr>
<tr><td class="h"><a name="94"></a>94</td><td></td><td></td><td></td><td></td><td class="s"># scanning for the first scribe/scribenick command.</td></tr>
<tr><td class="h"><a name="95"></a>95</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="96"></a>96</td><td></td><td></td><td></td><td></td><td class="s"># 5) Each record is interpreted, looking for topics, present &amp; regrets,</td></tr>
<tr><td class="h"><a name="97"></a>97</td><td></td><td></td><td></td><td></td><td class="s"># actions, resolutions, scribes, statements or summaries minuted by</td></tr>
<tr><td class="h"><a name="98"></a>98</td><td></td><td></td><td></td><td></td><td class="s"># the scribes, and remarks by other people on IRC. Each record is</td></tr>
<tr><td class="h"><a name="99"></a>99</td><td></td><td></td><td></td><td></td><td class="s"># modified and classified accordingly.</td></tr>
<tr><td class="h"><a name="100"></a>100</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="101"></a>101</td><td></td><td></td><td></td><td></td><td class="s"># 6) The array of records is converted to an HTML fragment and that</td></tr>
<tr><td class="h"><a name="102"></a>102</td><td></td><td></td><td></td><td></td><td class="s"># fragment, together with the collected topics, actions, etc. are</td></tr>
<tr><td class="h"><a name="103"></a>103</td><td></td><td></td><td></td><td></td><td class="s"># inserted into an HTML template and printed.</td></tr>
<tr><td class="h"><a name="104"></a>104</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="105"></a>105</td><td></td><td></td><td></td><td></td><td class="s"># Each record has four fields: {type, speaker, id, text}</td></tr>
<tr><td class="h"><a name="106"></a>106</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'i' (irc), &lt;speaker&gt; is the person who typed &lt;text&gt;.</td></tr>
<tr><td class="h"><a name="107"></a>107</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'I' (irc), &lt;speaker&gt; is the person who typed verbatim &lt;text&gt;.</td></tr>
<tr><td class="h"><a name="108"></a>108</td><td></td><td></td><td></td><td></td><td class="s"># If type is 's' (scribe), &lt;speaker&gt; is the person who said &lt;text&gt; on the phone.</td></tr>
<tr><td class="h"><a name="109"></a>109</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'd' (description) &lt;text&gt; is a summary by the scribe.</td></tr>
<tr><td class="h"><a name="110"></a>110</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'D' (description) &lt;text&gt; is verbatim text by the scribe.</td></tr>
<tr><td class="h"><a name="111"></a>111</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'slideset', &lt;text&gt; is the IRC-formatted link to the slideset</td></tr>
<tr><td class="h"><a name="112"></a>112</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'slide', &lt;text&gt; is the number of the slide in the slideset and &lt;id&gt; is the link to the individual slide</td></tr>
<tr><td class="h"><a name="113"></a>113</td><td></td><td></td><td></td><td></td><td class="s"># If type is 't' (topic), &lt;text&gt; is the title for a new topic.</td></tr>
<tr><td class="h"><a name="114"></a>114</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'T' (subtopic), &lt;text&gt; is the title for a new subtopic.</td></tr>
<tr><td class="h"><a name="115"></a>115</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'a' (action), &lt;text&gt; is an action and &lt;id&gt; is a unique ID.</td></tr>
<tr><td class="h"><a name="116"></a>116</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'r' (resolution), &lt;text&gt; is a resolution and &lt;id&gt; is a unique ID.</td></tr>
<tr><td class="h"><a name="117"></a>117</td><td></td><td></td><td></td><td></td><td class="s"># if type is 'u' (issue), &lt;text&gt; is an issue, &lt;id&gt; a unique ID.</td></tr>
<tr><td class="h"><a name="118"></a>118</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'c' (change), the record is a s/// or i/// not (yet) successful</td></tr>
<tr><td class="h"><a name="119"></a>119</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'o' (omit), the record is to be ignored.</td></tr>
<tr><td class="h"><a name="120"></a>120</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'n' (named anchor), the record is a target anchor.</td></tr>
<tr><td class="h"><a name="121"></a>121</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'b' ('bot), the record is info from trackbot.</td></tr>
<tr><td class="h"><a name="122"></a>122</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'B' ('bot), &lt;text&gt; is info from trackbot about an issue &lt;id&gt;.</td></tr>
<tr><td class="h"><a name="123"></a>123</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'repo', &lt;text&gt; is a list of GitHub repositories.</td></tr>
<tr><td class="h"><a name="124"></a>124</td><td></td><td></td><td></td><td></td><td class="s"># If type is 'drop', &lt;text&gt; is a list of GitHub repositories to remove.</td></tr>
<tr><td class="h"><a name="125"></a>125</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="126"></a>126</td><td class="c1">2</td><td class="c0"><span title="Avg 14µs">29µs</span></td><td class="c3">2</td><td class="c3">24µs</td><td class="s"><div class="calls"><div class="calls_in"># spent 20µs (17+4) within main::BEGIN@126 which was called:
#    once (17µs+4µs) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#126">line 126</a></div></div>use strict;<div class="calls"><div class="calls_out"># spent    20µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#126">main::BEGIN@126</a>
# spent     4µs making 1 call to <a href="strict-pm-96-line.html#60">strict::import</a></div></div></td></tr>
<tr><td class="h"><a name="127"></a>127</td><td class="c1">2</td><td class="c0"><span title="Avg 1.27ms">2.53ms</span></td><td class="c3">2</td><td class="c0">2.66ms</td><td class="s"><div class="calls"><div class="calls_in"># spent 2.63ms (2.60+35µs) within main::BEGIN@127 which was called:
#    once (2.60ms+35µs) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#127">line 127</a></div></div>use warnings;<div class="calls"><div class="calls_out"># spent  2.63ms making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#127">main::BEGIN@127</a>
# spent    28µs making 1 call to <a href="warnings-pm-2-line.html#359">warnings::import</a></div></div></td></tr>
<tr><td class="h"><a name="128"></a>128</td><td class="c1">2</td><td class="c0"><span title="Avg 59µs">117µs</span></td><td class="c3">2</td><td class="c0">15.1ms</td><td class="s"><div class="calls"><div class="calls_in"># spent 13.5ms (7.20+6.31) within main::BEGIN@128 which was called:
#    once (7.20ms+6.31ms) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#128">line 128</a></div></div>use Getopt::Long qw(GetOptionsFromString :config auto_version auto_help);<div class="calls"><div class="calls_out"># spent  13.5ms making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#128">main::BEGIN@128</a>
# spent  1.56ms making 1 call to <a href="Getopt-Long-pm-3-line.html#103">Getopt::Long::import</a></div></div></td></tr>
<tr><td class="h"><a name="129"></a>129</td><td class="c1">2</td><td class="c0"><span title="Avg 63µs">126µs</span></td><td class="c3">2</td><td class="c0">42.0ms</td><td class="s"><div class="calls"><div class="calls_in"># spent 41.9ms (1.87+40.1) within main::BEGIN@129 which was called:
#    once (1.87ms+40.1ms) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#129">line 129</a></div></div>use Pod::Usage;<div class="calls"><div class="calls_out"># spent  41.9ms making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#129">main::BEGIN@129</a>
# spent    64µs making 1 call to <a href="Exporter-pm-6-line.html#25">Exporter::import</a></div></div></td></tr>
<tr><td class="h"><a name="130"></a>130</td><td class="c1">2</td><td class="c0"><span title="Avg 12µs">25µs</span></td><td class="c3">1</td><td class="c3">6µs</td><td class="s"><div class="calls"><div class="calls_in"># spent 6µs within main::BEGIN@130 which was called:
#    once (6µs+0s) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#130">line 130</a></div></div>use v5.16;                        # We use &quot;each @ARRAY&quot; (5.012) and fc (5.16)<div class="calls"><div class="calls_out"># spent     6µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#130">main::BEGIN@130</a></div></div></td></tr>
<tr><td class="h"><a name="131"></a>131</td><td class="c1">2</td><td class="c0"><span title="Avg 48µs">96µs</span></td><td class="c3">2</td><td class="c0">9.00ms</td><td class="s"><div class="calls"><div class="calls_in"># spent 4.74ms (426µs+4.32) within main::BEGIN@131 which was called:
#    once (426µs+4.32ms) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#131">line 131</a></div></div>use locale ':collate';                # Sort using current locale<div class="calls"><div class="calls_out"># spent  4.74ms making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#131">main::BEGIN@131</a>
# spent  4.26ms making 1 call to <a href="locale-pm-59-line.html#22">locale::import</a></div></div></td></tr>
<tr><td class="h"><a name="132"></a>132</td><td class="c1">2</td><td class="c0"><span title="Avg 47µs">94µs</span></td><td class="c3">2</td><td class="c0">220µs</td><td class="s"><div class="calls"><div class="calls_in"># spent 219µs (181+37) within main::BEGIN@132 which was called:
#    once (181µs+37µs) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#132">line 132</a></div></div>use utf8;                        # This script contains characters in UTF-8<div class="calls"><div class="calls_out"># spent   219µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#132">main::BEGIN@132</a>
# spent     1µs making 1 call to <a href="utf8-pm-63-line.html#11">utf8::import</a></div></div></td></tr>
<tr><td class="h"><a name="133"></a>133</td><td class="c1">2</td><td class="c0"><span title="Avg 68µs">136µs</span></td><td class="c3">2</td><td class="c0">1.10ms</td><td class="s"><div class="calls"><div class="calls_in"># spent 1.08ms (971µs+106µs) within main::BEGIN@133 which was called:
#    once (971µs+106µs) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#133">line 133</a></div></div>use File::Basename;<div class="calls"><div class="calls_out"># spent  1.08ms making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#133">main::BEGIN@133</a>
# spent    25µs making 1 call to <a href="Exporter-pm-6-line.html#25">Exporter::import</a></div></div></td></tr>
<tr><td class="h"><a name="134"></a>134</td><td class="c1">2</td><td class="c0"><span title="Avg 9µs">17µs</span></td><td class="c3">2</td><td class="c3">31µs</td><td class="s"><div class="calls"><div class="calls_in"># spent 18µs (5+13) within main::BEGIN@134 which was called:
#    once (5µs+13µs) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#134">line 134</a></div></div>use Encode qw/decode/;                # For decode('UTF-8',...)<div class="calls"><div class="calls_out"># spent    18µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#134">main::BEGIN@134</a>
# spent    13µs making 1 call to <a href="Exporter-pm-6-line.html#25">Exporter::import</a></div></div></td></tr>
<tr><td class="h"><a name="135"></a>135</td><td class="c1">2</td><td class="c0"><span title="Avg 49µs">98µs</span></td><td class="c3">2</td><td class="c0">1.87ms</td><td class="s"><div class="calls"><div class="calls_in"># spent 1.85ms (922µs+927µs) within main::BEGIN@135 which was called:
#    once (922µs+927µs) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#135">line 135</a></div></div>use Encode::Guess;                # For guess_encoding()<div class="calls"><div class="calls_out"># spent  1.85ms making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#135">main::BEGIN@135</a>
# spent    22µs making 1 call to <a href="Encode-Guess-pm-65-line.html#24">Encode::Guess::import</a></div></div></td></tr>
<tr><td class="h"><a name="136"></a>136</td><td class="c1">2</td><td class="c0"><span title="Avg 8µs">17µs</span></td><td class="c3">2</td><td class="c1">63µs</td><td class="s"><div class="calls"><div class="calls_in"># spent 34µs (5+29) within main::BEGIN@136 which was called:
#    once (5µs+29µs) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#136">line 136</a></div></div>use POSIX 'floor';<div class="calls"><div class="calls_out"># spent    34µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#136">main::BEGIN@136</a>
# spent    29µs making 1 call to <a href="POSIX-pm-60-line.html#174">POSIX::import</a></div></div></td></tr>
<tr><td class="h"><a name="137"></a>137</td><td class="c1">2</td><td class="c0"><span title="Avg 46µs">93µs</span></td><td class="c3">1</td><td class="c0">29.4ms</td><td class="s"><div class="calls"><div class="calls_in"># spent 29.4ms (4.31+25.0) within main::BEGIN@137 which was called:
#    once (4.31ms+25.0ms) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#137">line 137</a></div></div>use LWP::UserAgent ();<div class="calls"><div class="calls_out"># spent  29.4ms making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#137">main::BEGIN@137</a></div></div></td></tr>
<tr><td class="h"><a name="138"></a>138</td><td class="c1">2</td><td class="c0"><span title="Avg 5.76ms">11.5ms</span></td><td class="c3">2</td><td class="c0">539µs</td><td class="s"><div class="calls"><div class="calls_in"># spent 515µs (259+257) within main::BEGIN@138 which was called:
#    once (259µs+257µs) by main::NULL at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#138">line 138</a></div></div>use MIME::Base64;<div class="calls"><div class="calls_out"># spent   515µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#138">main::BEGIN@138</a>
# spent    23µs making 1 call to <a href="Exporter-pm-6-line.html#25">Exporter::import</a></div></div></td></tr>
<tr><td class="h"><a name="139"></a>139</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="140"></a>140</td><td></td><td></td><td></td><td></td><td class="s"># Pattern for URLs. Note: single quote (') does not end a URL.</td></tr>
<tr><td class="h"><a name="141"></a>141</td><td></td><td></td><td></td><td></td><td class="s"># The pattern consists of two alternatives. The first one matches a</td></tr>
<tr><td class="h"><a name="142"></a>142</td><td></td><td></td><td></td><td></td><td class="s"># URL that is not preceded by a &quot;(&quot; and it allows &quot;)&quot; in the URL. The</td></tr>
<tr><td class="h"><a name="143"></a>143</td><td></td><td></td><td></td><td></td><td class="s"># second does not allow &quot;)&quot;. This is needed to allow markdown-style</td></tr>
<tr><td class="h"><a name="144"></a>144</td><td></td><td></td><td></td><td></td><td class="s"># links, which use &quot;(&quot; and &quot;)&quot; to delimit the URL.</td></tr>
<tr><td class="h"><a name="145"></a>145</td><td class="c3">1</td><td class="c3"><span title="Avg 600ns">600ns</span></td><td></td><td></td><td class="s">my $urlpat =</td></tr>
<tr><td class="h"><a name="146"></a>146</td><td></td><td></td><td></td><td></td><td class="s">  '(?:(?&lt;!\()(?:[a-z]+://|mailto:[^\s&lt;@]+\@|geo:[0-9.]|urn:[a-z0-9-]+:)[^\s&lt;&gt;&quot;‘’“”«»‹›]+|(?:[a-z]+://|mailto:[^\s&lt;@]+\@|geo:[0-9.]|urn:[a-z0-9-]+:)[^\s&lt;&gt;&quot;‘’“”«»‹›)]+)';</td></tr>
<tr><td class="h"><a name="147"></a>147</td><td></td><td></td><td></td><td></td><td class="s"># $scribepat is something like &quot;foo&quot; or &quot;foo = John Smith&quot; or &quot;foo/John Smith&quot;.</td></tr>
<tr><td class="h"><a name="148"></a>148</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">my $scribepat = '([^ ,/=]+) *(?:[=\/] *([^ ,](?:[^,]*[^ ,])?) *)?';</td></tr>
<tr><td class="h"><a name="149"></a>149</td><td></td><td></td><td></td><td></td><td class="s"># A speaker name doesn't contain [ &quot;:：&gt;] and doesn't start with &quot;..&quot;.</td></tr>
<tr><td class="h"><a name="150"></a>150</td><td></td><td></td><td></td><td></td><td class="s"># (&quot;：&quot; is a full-width colon, Unicode U+FF1A.)</td></tr>
<tr><td class="h"><a name="151"></a>151</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $speakerpat = '(?:[^. :：&quot;&gt;]|\\.[^. :：&quot;&gt;])[^ :：&quot;&gt;]*';</td></tr>
<tr><td class="h"><a name="152"></a>152</td><td></td><td></td><td></td><td></td><td class="s"># Some words are unlikely to be speaker names</td></tr>
<tr><td class="h"><a name="153"></a>153</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my $specialpat = '(?:propos(?:ed|al)|issue-\d+|action-\d+|github)';</td></tr>
<tr><td class="h"><a name="154"></a>154</td><td></td><td></td><td></td><td></td><td class="s"># A pattern for a GitHub repository.</td></tr>
<tr><td class="h"><a name="155"></a>155</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my $githuburl = '\b(?:(?i)https://github.com/[a-z0-9._-]+/[a-z0-9._-]+)';</td></tr>
<tr><td class="h"><a name="156"></a>156</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="157"></a>157</td><td></td><td></td><td></td><td></td><td class="s"># Command line options:</td></tr>
<tr><td class="h"><a name="158"></a>158</td><td class="c3">1</td><td class="c3"><span title="Avg 500ns">500ns</span></td><td></td><td></td><td class="s">my $styleset = 'public';        # Or 'team', 'member' or 'fancy'</td></tr>
<tr><td class="h"><a name="159"></a>159</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my $embed_diagnostics = 0;        # If 1, put warnings in the HTML, not on STDERR</td></tr>
<tr><td class="h"><a name="160"></a>160</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $implicitcont = 0;                # If 1, lines without '…' are continuations, too</td></tr>
<tr><td class="h"><a name="161"></a>161</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $spacecont = 0;                # If 1, initial space may replace '…'</td></tr>
<tr><td class="h"><a name="162"></a>162</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $keeplines = 1;                # If 1, put &lt;br&gt; between continuation lines</td></tr>
<tr><td class="h"><a name="163"></a>163</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $final = 0;                  # If 1, don't include &quot;DRAFT&quot; warning in minutes</td></tr>
<tr><td class="h"><a name="164"></a>164</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $scribenick;                        # Nick of the current scribe in lowercase</td></tr>
<tr><td class="h"><a name="165"></a>165</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $dash_topics = 0;                # If 1, &quot;--&quot; means the next line is a topic</td></tr>
<tr><td class="h"><a name="166"></a>166</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my $use_zakim = 1;                # If 1, treat conversations with Zakim specially</td></tr>
<tr><td class="h"><a name="167"></a>167</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $scribeonly = 0;                # If 1, omit IRC comments by others</td></tr>
<tr><td class="h"><a name="168"></a>168</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $emphasis = 0;                # If 1, _xxx_, *xxx* and /xxx/ highlight things</td></tr>
<tr><td class="h"><a name="169"></a>169</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $old_style = 0;                # If 1, use the old (pre-2017) style sheets</td></tr>
<tr><td class="h"><a name="170"></a>170</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $url_display = 'break';        # How to display in-your-face URLs</td></tr>
<tr><td class="h"><a name="171"></a>171</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $logo;                        # undef = W3C logo; string = HTML fragment</td></tr>
<tr><td class="h"><a name="172"></a>172</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $collapse_limit = 30;        # Longer participant lists are collapsed</td></tr>
<tr><td class="h"><a name="173"></a>173</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $stylesheet;                        # URL of style sheet, undef = use defaults</td></tr>
<tr><td class="h"><a name="174"></a>174</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $mathjax =                        # undef = no math; string is MathJax URL</td></tr>
<tr><td class="h"><a name="175"></a>175</td><td></td><td></td><td></td><td></td><td class="s">  'https://www.w3.org/scripts/MathJax/3/es5/mml-chtml.js';</td></tr>
<tr><td class="h"><a name="176"></a>176</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $islide =                        # String is i-slide library URL</td></tr>
<tr><td class="h"><a name="177"></a>177</td><td></td><td></td><td></td><td></td><td class="s">  'https://w3c.github.io/i-slide/i-slide-2.js?selector=a.islide';</td></tr>
<tr><td class="h"><a name="178"></a>178</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $github = 1;                        # If 0, don't make links for GitHub issues</td></tr>
<tr><td class="h"><a name="179"></a>179</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $ghurlbot = 1;                # If 0, hide conversations with GHURLbot</td></tr>
<tr><td class="h"><a name="180"></a>180</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="181"></a>181</td><td></td><td></td><td></td><td></td><td class="s"># Global variables:</td></tr>
<tr><td class="h"><a name="182"></a>182</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $has_math = 0;                # Set to 1 by to_mathml()</td></tr>
<tr><td class="h"><a name="183"></a>183</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my @diagnostics;                # Collected warnings and other info</td></tr>
<tr><td class="h"><a name="184"></a>184</td><td></td><td></td><td></td><td></td><td class="s">my $recordingstart;                 # Time of recording start secs since midnight)</td></tr>
<tr><td class="h"><a name="185"></a>185</td><td></td><td></td><td></td><td></td><td class="s">my $recordingend;                 # Time of recording end (secs since midnight)</td></tr>
<tr><td class="h"><a name="186"></a>186</td><td class="c3">1</td><td class="c3"><span title="Avg 500ns">500ns</span></td><td></td><td></td><td class="s">my @repositories = ();                # List of repo URLs for expanding issue refs</td></tr>
<tr><td class="h"><a name="187"></a>187</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my %ids;                        # All IDs (used to ensure unique IDs)</td></tr>
<tr><td class="h"><a name="188"></a>188</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="189"></a>189</td><td></td><td></td><td></td><td></td><td class="s"># Used to download slideset when necessary</td></tr>
<tr><td class="h"><a name="190"></a>190</td><td class="c3">1</td><td class="c1"><span title="Avg 6µs">6µs</span></td><td class="c3">1</td><td class="c0">1.38ms</td><td class="s">my $ua = LWP::UserAgent-&gt;new(timeout =&gt; 10);<div class="calls"><div class="calls_out"># spent  1.38ms making 1 call to <a href="LWP-UserAgent-pm-67-line.html#23">LWP::UserAgent::new</a></div></div></td></tr>
<tr><td class="h"><a name="191"></a>191</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="192"></a>192</td><td></td><td></td><td></td><td></td><td class="s"># Each parser takes a reference to an array of text lines (without</td></tr>
<tr><td class="h"><a name="193"></a>193</td><td></td><td></td><td></td><td></td><td class="s"># newlines) and a reference to an array of records. It returns 0</td></tr>
<tr><td class="h"><a name="194"></a>194</td><td></td><td></td><td></td><td></td><td class="s"># (failed to parse) or 1 (success) and it appends successfully parsed</td></tr>
<tr><td class="h"><a name="195"></a>195</td><td></td><td></td><td></td><td></td><td class="s"># lines to the array of records, with {type} set to 'i' and {speaker}</td></tr>
<tr><td class="h"><a name="196"></a>196</td><td></td><td></td><td></td><td></td><td class="s"># and {text} set to the text and the nick of the person who typed that</td></tr>
<tr><td class="h"><a name="197"></a>197</td><td></td><td></td><td></td><td></td><td class="s"># text. If a line includes a time stamp, the parser converts it to</td></tr>
<tr><td class="h"><a name="198"></a>198</td><td></td><td></td><td></td><td></td><td class="s"># seconds since midnight and puts it in {time}.</td></tr>
<tr><td class="h"><a name="199"></a>199</td><td></td><td></td><td></td><td></td><td class="s"># It should not try to parse the text futher for actions, resolutions,</td></tr>
<tr><td class="h"><a name="200"></a>200</td><td></td><td></td><td></td><td></td><td class="s"># etc.</td></tr>
<tr><td class="h"><a name="201"></a>201</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="202"></a>202</td><td></td><td></td><td></td><td></td><td class="s"># IRC messages (&quot;X joined channel Y&quot;), private messages,</td></tr>
<tr><td class="h"><a name="203"></a>203</td><td></td><td></td><td></td><td></td><td class="s"># and off-the-record text (&quot;/me waves&quot;) are omitted.</td></tr>
<tr><td class="h"><a name="204"></a>204</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="205"></a>205</td><td></td><td></td><td></td><td></td><td class="s"># The parsers are tried in turn until one succeeds, so their order is</td></tr>
<tr><td class="h"><a name="206"></a>206</td><td></td><td></td><td></td><td></td><td class="s"># important. E.g., the Plain_Text_Format should probably be towards</td></tr>
<tr><td class="h"><a name="207"></a>207</td><td></td><td></td><td></td><td></td><td class="s"># the end.</td></tr>
<tr><td class="h"><a name="208"></a>208</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="209"></a>209</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td></td><td></td><td class="s">my @parsers = (\&amp;RRSAgent_text_format, \&amp;Bip_Format, \&amp;Mirc_Text_Format,</td></tr>
<tr><td class="h"><a name="210"></a>210</td><td></td><td></td><td></td><td></td><td class="s">               \&amp;Yahoo_IM_Format, \&amp;Bert_IRSSI_Format, \&amp;Irssi_Format,</td></tr>
<tr><td class="h"><a name="211"></a>211</td><td></td><td></td><td></td><td></td><td class="s">               \&amp;Qwebirc_paste_format, \&amp;IRCCloud_format,</td></tr>
<tr><td class="h"><a name="212"></a>212</td><td></td><td></td><td></td><td></td><td class="s">               \&amp;Quassel_paste_format, \&amp;Plain_Text_Format);</td></tr>
<tr><td class="h"><a name="213"></a>213</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="214"></a>214</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="215"></a>215</td><td></td><td></td><td></td><td></td><td class="s"># RRSAgent_text_format -- parse an IRC log as generated by RRSAgent</td></tr>
<tr><td class="h"><a name="216"></a>216</td><td></td><td></td><td></td><td></td><td class="s">sub RRSAgent_text_format($$$$)</td></tr>
<tr><td class="h"><a name="217"></a>217</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 722µs (504+218) within main::RRSAgent_text_format which was called:
#    once (504µs+218µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#963">line 963</a></div></div>{</td></tr>
<tr><td class="h"><a name="218"></a>218</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">  my ($lines_ref, $records_ref, $nlines_ref, $err_ref) = @_;</td></tr>
<tr><td class="h"><a name="219"></a>219</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="220"></a>220</td><td class="c3">1</td><td class="c3"><span title="Avg 600ns">600ns</span></td><td></td><td></td><td class="s">  $$nlines_ref = 0;</td></tr>
<tr><td class="h"><a name="221"></a>221</td><td class="c3">1</td><td class="c3"><span title="Avg 500ns">500ns</span></td><td></td><td></td><td class="s">  foreach (@$lines_ref) {</td></tr>
<tr><td class="h"><a name="222"></a>222</td><td class="c0">217</td><td class="c0"><span title="Avg 66ns">14µs</span></td><td></td><td></td><td class="s">    $$nlines_ref++;</td></tr>
<tr><td class="h"><a name="223"></a>223</td><td class="c0">217</td><td class="c0"><span title="Avg 92ns">20µs</span></td><td></td><td></td><td class="s">    $$err_ref = $_;</td></tr>
<tr><td class="h"><a name="224"></a>224</td><td class="c0">217</td><td class="c0"><span title="Avg 3µs">684µs</span></td><td class="c0">419</td><td class="c0">218µs</td><td class="s">    if (/^(?:\d\d:\d\d:\d\d )?&lt;([^ &gt;]+)&gt; \1 has (?:joined|left|changed the topic to:) /) {<div class="calls"><div class="calls_out">    # spent   218µs making 419 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 519ns/call</div></div></td></tr>
<tr><td class="h"><a name="225"></a>225</td><td></td><td></td><td></td><td></td><td class="s">      # Ignore lines like &quot;&lt;jfm&gt; jfm has joined #foo&quot;</td></tr>
<tr><td class="h"><a name="226"></a>226</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^(\d\d):(\d\d):(\d\d) &lt;([^ &gt;]+)&gt; (.*)/) {</td></tr>
<tr><td class="h"><a name="227"></a>227</td><td></td><td></td><td></td><td></td><td class="s">      push(@$records_ref, {type=&gt;'i', speaker=&gt;$4, text=&gt;$5,</td></tr>
<tr><td class="h"><a name="228"></a>228</td><td></td><td></td><td></td><td></td><td class="s">                           time=&gt; 3600 * $1 + 60 * $2 + $3});</td></tr>
<tr><td class="h"><a name="229"></a>229</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^&lt;([^ &gt;]+)&gt; (.*)/) {</td></tr>
<tr><td class="h"><a name="230"></a>230</td><td></td><td></td><td></td><td></td><td class="s">      push(@$records_ref, {type=&gt;'i', speaker=&gt;$1, text=&gt;$2});</td></tr>
<tr><td class="h"><a name="231"></a>231</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^\s*$/) {</td></tr>
<tr><td class="h"><a name="232"></a>232</td><td></td><td></td><td></td><td></td><td class="s">      # Ignore empty lines</td></tr>
<tr><td class="h"><a name="233"></a>233</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="234"></a>234</td><td></td><td></td><td></td><td></td><td class="s">      return 0;                        # Unknown format, give up</td></tr>
<tr><td class="h"><a name="235"></a>235</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="236"></a>236</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="237"></a>237</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td></td><td></td><td class="s">  return 1;</td></tr>
<tr><td class="h"><a name="238"></a>238</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="239"></a>239</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="240"></a>240</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="241"></a>241</td><td></td><td></td><td></td><td></td><td class="s"># Bip_Format -- parse an IRC log generated by bip</td></tr>
<tr><td class="h"><a name="242"></a>242</td><td></td><td></td><td></td><td></td><td class="s">sub Bip_Format($$$$)</td></tr>
<tr><td class="h"><a name="243"></a>243</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="244"></a>244</td><td></td><td></td><td></td><td></td><td class="s">  my ($lines_ref, $records_ref, $nlines_ref, $err_ref) = @_;</td></tr>
<tr><td class="h"><a name="245"></a>245</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="246"></a>246</td><td></td><td></td><td></td><td></td><td class="s">  $$nlines_ref = 0;</td></tr>
<tr><td class="h"><a name="247"></a>247</td><td></td><td></td><td></td><td></td><td class="s">  foreach (@$lines_ref) {</td></tr>
<tr><td class="h"><a name="248"></a>248</td><td></td><td></td><td></td><td></td><td class="s">    $$nlines_ref++;</td></tr>
<tr><td class="h"><a name="249"></a>249</td><td></td><td></td><td></td><td></td><td class="s">    $$err_ref = $_;</td></tr>
<tr><td class="h"><a name="250"></a>250</td><td></td><td></td><td></td><td></td><td class="s">    if (/^\d\d-\d\d-\d{4} \d\d:\d\d:\d\d -!- /) {</td></tr>
<tr><td class="h"><a name="251"></a>251</td><td></td><td></td><td></td><td></td><td class="s">      # IRC server message, ignore</td></tr>
<tr><td class="h"><a name="252"></a>252</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^\d\d-\d\d-\d{4} \d\d:\d\d:\d\d [&lt;&gt;] \* /) {</td></tr>
<tr><td class="h"><a name="253"></a>253</td><td></td><td></td><td></td><td></td><td class="s">      # /me message, ignore</td></tr>
<tr><td class="h"><a name="254"></a>254</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^\d\d-\d\d-\d{4} (\d\d):(\d\d):(\d\d) &lt; ([^ !:]+)![^ :]+: (.*)$/){</td></tr>
<tr><td class="h"><a name="255"></a>255</td><td></td><td></td><td></td><td></td><td class="s">      push(@$records_ref, {type=&gt;'i', speaker=&gt;$4, text=&gt;$5,</td></tr>
<tr><td class="h"><a name="256"></a>256</td><td></td><td></td><td></td><td></td><td class="s">                           time=&gt; 3600 * $1 + 60 * $2 + $3});</td></tr>
<tr><td class="h"><a name="257"></a>257</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^\d\d-\d\d-\d{4} (\d\d):(\d\d):(\d\d) &gt; ([^ :]+): (.*)$/) {</td></tr>
<tr><td class="h"><a name="258"></a>258</td><td></td><td></td><td></td><td></td><td class="s">      push(@$records_ref, {type=&gt;'i', speaker=&gt;$4, text=&gt;$5,</td></tr>
<tr><td class="h"><a name="259"></a>259</td><td></td><td></td><td></td><td></td><td class="s">                           time=&gt; 3600 * $1 + 60 * $2 + $3});</td></tr>
<tr><td class="h"><a name="260"></a>260</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^\s*$/) {</td></tr>
<tr><td class="h"><a name="261"></a>261</td><td></td><td></td><td></td><td></td><td class="s">      # Ignore empty lines</td></tr>
<tr><td class="h"><a name="262"></a>262</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="263"></a>263</td><td></td><td></td><td></td><td></td><td class="s">      return 0;                        # Unrecognized line, return failure</td></tr>
<tr><td class="h"><a name="264"></a>264</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="265"></a>265</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="266"></a>266</td><td></td><td></td><td></td><td></td><td class="s">  return 1;</td></tr>
<tr><td class="h"><a name="267"></a>267</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="268"></a>268</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="269"></a>269</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="270"></a>270</td><td></td><td></td><td></td><td></td><td class="s"># Mirc_Text_Format -- log format from saving a MIRC buffer</td></tr>
<tr><td class="h"><a name="271"></a>271</td><td></td><td></td><td></td><td></td><td class="s">sub Mirc_Text_Format($$$$)</td></tr>
<tr><td class="h"><a name="272"></a>272</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="273"></a>273</td><td></td><td></td><td></td><td></td><td class="s">  my ($lines_ref, $records_ref, $nlines_ref, $err_ref) = @_;</td></tr>
<tr><td class="h"><a name="274"></a>274</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="275"></a>275</td><td></td><td></td><td></td><td></td><td class="s">  $$nlines_ref = 0;</td></tr>
<tr><td class="h"><a name="276"></a>276</td><td></td><td></td><td></td><td></td><td class="s">  foreach (@$lines_ref) {</td></tr>
<tr><td class="h"><a name="277"></a>277</td><td></td><td></td><td></td><td></td><td class="s">    $$nlines_ref++;</td></tr>
<tr><td class="h"><a name="278"></a>278</td><td></td><td></td><td></td><td></td><td class="s">    $$err_ref = $_;</td></tr>
<tr><td class="h"><a name="279"></a>279</td><td></td><td></td><td></td><td></td><td class="s">    if (/^\s*$/) {</td></tr>
<tr><td class="h"><a name="280"></a>280</td><td></td><td></td><td></td><td></td><td class="s">      # Empty line, ignore</td></tr>
<tr><td class="h"><a name="281"></a>281</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^Start of \S+ buffer/) {</td></tr>
<tr><td class="h"><a name="282"></a>282</td><td></td><td></td><td></td><td></td><td class="s">      # Skip this (should be first line)</td></tr>
<tr><td class="h"><a name="283"></a>283</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^End of \S+ buffer/) {</td></tr>
<tr><td class="h"><a name="284"></a>284</td><td></td><td></td><td></td><td></td><td class="s">      # Skip this (should be last line)</td></tr>
<tr><td class="h"><a name="285"></a>285</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^\s*\*/) {</td></tr>
<tr><td class="h"><a name="286"></a>286</td><td></td><td></td><td></td><td></td><td class="s">      # Skip /me lines</td></tr>
<tr><td class="h"><a name="287"></a>287</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^&lt;([^ &gt;]+)&gt; (.*)$/) {</td></tr>
<tr><td class="h"><a name="288"></a>288</td><td></td><td></td><td></td><td></td><td class="s">      push(@$records_ref, {type=&gt;'i', speaker=&gt;$1, text=&gt;$2});</td></tr>
<tr><td class="h"><a name="289"></a>289</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^( .*)$/ &amp;&amp; @$records_ref) {        # Continuation line</td></tr>
<tr><td class="h"><a name="290"></a>290</td><td></td><td></td><td></td><td></td><td class="s">      $$records_ref[@$records_ref-1]-&gt;{text} .= $1;</td></tr>
<tr><td class="h"><a name="291"></a>291</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="292"></a>292</td><td></td><td></td><td></td><td></td><td class="s">      return 0;                        # Unknown format</td></tr>
<tr><td class="h"><a name="293"></a>293</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="294"></a>294</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="295"></a>295</td><td></td><td></td><td></td><td></td><td class="s">  return 1;</td></tr>
<tr><td class="h"><a name="296"></a>296</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="297"></a>297</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="298"></a>298</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="299"></a>299</td><td></td><td></td><td></td><td></td><td class="s"># Yahoo_IM_Format -- saved log from a Yahoo IM session</td></tr>
<tr><td class="h"><a name="300"></a>300</td><td></td><td></td><td></td><td></td><td class="s">sub Yahoo_IM_Format($$$$)</td></tr>
<tr><td class="h"><a name="301"></a>301</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="302"></a>302</td><td></td><td></td><td></td><td></td><td class="s">  my ($lines_ref, $records_ref, $nlines_ref, $err_ref) = @_;</td></tr>
<tr><td class="h"><a name="303"></a>303</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="304"></a>304</td><td></td><td></td><td></td><td></td><td class="s">  $$nlines_ref = 0;</td></tr>
<tr><td class="h"><a name="305"></a>305</td><td></td><td></td><td></td><td></td><td class="s">  foreach (@$lines_ref) {</td></tr>
<tr><td class="h"><a name="306"></a>306</td><td></td><td></td><td></td><td></td><td class="s">    $$nlines_ref++;</td></tr>
<tr><td class="h"><a name="307"></a>307</td><td></td><td></td><td></td><td></td><td class="s">    $$err_ref = $_;</td></tr>
<tr><td class="h"><a name="308"></a>308</td><td></td><td></td><td></td><td></td><td class="s">    if (/^([^ :]+): (.*)$/) {</td></tr>
<tr><td class="h"><a name="309"></a>309</td><td></td><td></td><td></td><td></td><td class="s">      push(@$records_ref, {type=&gt;'i', speaker=&gt;$1, text=&gt;$2});</td></tr>
<tr><td class="h"><a name="310"></a>310</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^\s*$/) {</td></tr>
<tr><td class="h"><a name="311"></a>311</td><td></td><td></td><td></td><td></td><td class="s">      # Ignore empty lines</td></tr>
<tr><td class="h"><a name="312"></a>312</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="313"></a>313</td><td></td><td></td><td></td><td></td><td class="s">      return 0;</td></tr>
<tr><td class="h"><a name="314"></a>314</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="315"></a>315</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="316"></a>316</td><td></td><td></td><td></td><td></td><td class="s">  return 1;</td></tr>
<tr><td class="h"><a name="317"></a>317</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="318"></a>318</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="319"></a>319</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="320"></a>320</td><td></td><td></td><td></td><td></td><td class="s"># Bert_IRSSI_Format - Bert's IRSSI theme, based on elho, which should also work</td></tr>
<tr><td class="h"><a name="321"></a>321</td><td></td><td></td><td></td><td></td><td class="s">sub Bert_IRSSI_Format($$$$)</td></tr>
<tr><td class="h"><a name="322"></a>322</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="323"></a>323</td><td></td><td></td><td></td><td></td><td class="s">  my ($lines_ref, $records_ref, $nlines_ref, $err_ref) = @_;</td></tr>
<tr><td class="h"><a name="324"></a>324</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="325"></a>325</td><td></td><td></td><td></td><td></td><td class="s">  $$nlines_ref = 0;</td></tr>
<tr><td class="h"><a name="326"></a>326</td><td></td><td></td><td></td><td></td><td class="s">  foreach (@$lines_ref) {</td></tr>
<tr><td class="h"><a name="327"></a>327</td><td></td><td></td><td></td><td></td><td class="s">    $$nlines_ref++;</td></tr>
<tr><td class="h"><a name="328"></a>328</td><td></td><td></td><td></td><td></td><td class="s">    $$err_ref = $_;</td></tr>
<tr><td class="h"><a name="329"></a>329</td><td></td><td></td><td></td><td></td><td class="s">    next if /^---/;                # IRSSI comment about logging start/stop</td></tr>
<tr><td class="h"><a name="330"></a>330</td><td></td><td></td><td></td><td></td><td class="s">    next if /^[0-9:]+\s*[&lt;&gt;-]+ \| (\S+).*( has (?:joined|left).*)/;</td></tr>
<tr><td class="h"><a name="331"></a>331</td><td></td><td></td><td></td><td></td><td class="s">    next if /^[0-9:]+\s*«Quit» \| (\S+).* has signed off/;</td></tr>
<tr><td class="h"><a name="332"></a>332</td><td></td><td></td><td></td><td></td><td class="s">    next if /^[0-9:]+\s*«[^»]+» \|/; # IRSSI comment about users, topic, etc.</td></tr>
<tr><td class="h"><a name="333"></a>333</td><td></td><td></td><td></td><td></td><td class="s">    next if /^[0-9:]+\s*\* \|/;      # Skip a /me command</td></tr>
<tr><td class="h"><a name="334"></a>334</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\s*$/;                     # Skip empty line</td></tr>
<tr><td class="h"><a name="335"></a>335</td><td></td><td></td><td></td><td></td><td class="s">    if (/^(?:\w\w\w\d\d )?\[?(\d\d):(\d\d)\]?[\s@+%]*(\S+) \| (.*)/) {</td></tr>
<tr><td class="h"><a name="336"></a>336</td><td></td><td></td><td></td><td></td><td class="s">      push(@$records_ref, {type=&gt;'i', speaker=&gt;$3, text=&gt;$4,</td></tr>
<tr><td class="h"><a name="337"></a>337</td><td></td><td></td><td></td><td></td><td class="s">                           time=&gt; 3600 * $1 + 60 * $2});</td></tr>
<tr><td class="h"><a name="338"></a>338</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="339"></a>339</td><td></td><td></td><td></td><td></td><td class="s">      return 0;</td></tr>
<tr><td class="h"><a name="340"></a>340</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="341"></a>341</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="342"></a>342</td><td></td><td></td><td></td><td></td><td class="s">  return 1;</td></tr>
<tr><td class="h"><a name="343"></a>343</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="344"></a>344</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="345"></a>345</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="346"></a>346</td><td></td><td></td><td></td><td></td><td class="s"># Irssi_Format - logs from Coralie's Irssi</td></tr>
<tr><td class="h"><a name="347"></a>347</td><td></td><td></td><td></td><td></td><td class="s">sub Irssi_Format($$$$)</td></tr>
<tr><td class="h"><a name="348"></a>348</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="349"></a>349</td><td></td><td></td><td></td><td></td><td class="s">  my ($lines_ref, $records_ref, $nlines_ref, $err_ref) = @_;</td></tr>
<tr><td class="h"><a name="350"></a>350</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="351"></a>351</td><td></td><td></td><td></td><td></td><td class="s">  $$nlines_ref = 0;</td></tr>
<tr><td class="h"><a name="352"></a>352</td><td></td><td></td><td></td><td></td><td class="s">  foreach (@$lines_ref) {</td></tr>
<tr><td class="h"><a name="353"></a>353</td><td></td><td></td><td></td><td></td><td class="s">    $$nlines_ref++;</td></tr>
<tr><td class="h"><a name="354"></a>354</td><td></td><td></td><td></td><td></td><td class="s">    $$err_ref = $_;</td></tr>
<tr><td class="h"><a name="355"></a>355</td><td></td><td></td><td></td><td></td><td class="s">    next if /^---/;                 # IRSSI comment about logging start/stop</td></tr>
<tr><td class="h"><a name="356"></a>356</td><td></td><td></td><td></td><td></td><td class="s">    next if /^[0-9:TZ-]+\s+-!-/; # Skip join/leave and other info</td></tr>
<tr><td class="h"><a name="357"></a>357</td><td></td><td></td><td></td><td></td><td class="s">    next if /^[0-9:TZ-]+\s+\*/;         # Skip a /me command</td></tr>
<tr><td class="h"><a name="358"></a>358</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\s*$/;                 # Skip empty line</td></tr>
<tr><td class="h"><a name="359"></a>359</td><td></td><td></td><td></td><td></td><td class="s">    if (/^[0-9-]+T(\d\d):(\d\d):(\d\d)Z\s+&lt;([^&gt;]+)&gt; (.*)/) {</td></tr>
<tr><td class="h"><a name="360"></a>360</td><td></td><td></td><td></td><td></td><td class="s">      push(@$records_ref, {type=&gt;'i', speaker=&gt;$4, text=&gt;$5,</td></tr>
<tr><td class="h"><a name="361"></a>361</td><td></td><td></td><td></td><td></td><td class="s">                           time=&gt; 3600 * $1 + 60 * $2 + $3});</td></tr>
<tr><td class="h"><a name="362"></a>362</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="363"></a>363</td><td></td><td></td><td></td><td></td><td class="s">      return 0;</td></tr>
<tr><td class="h"><a name="364"></a>364</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="365"></a>365</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="366"></a>366</td><td></td><td></td><td></td><td></td><td class="s">  return 1;</td></tr>
<tr><td class="h"><a name="367"></a>367</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="368"></a>368</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="369"></a>369</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="370"></a>370</td><td></td><td></td><td></td><td></td><td class="s"># Qwebirc_paste_format -- copy-paste from the qwebirc web-based client</td></tr>
<tr><td class="h"><a name="371"></a>371</td><td></td><td></td><td></td><td></td><td class="s">sub Qwebirc_paste_format($$$$)</td></tr>
<tr><td class="h"><a name="372"></a>372</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="373"></a>373</td><td></td><td></td><td></td><td></td><td class="s">  my ($lines_ref, $records_ref, $nlines_ref, $err_ref) = @_;</td></tr>
<tr><td class="h"><a name="374"></a>374</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="375"></a>375</td><td></td><td></td><td></td><td></td><td class="s">  $$nlines_ref = 0;</td></tr>
<tr><td class="h"><a name="376"></a>376</td><td></td><td></td><td></td><td></td><td class="s">  foreach (@$lines_ref) {</td></tr>
<tr><td class="h"><a name="377"></a>377</td><td></td><td></td><td></td><td></td><td class="s">    $$nlines_ref++;</td></tr>
<tr><td class="h"><a name="378"></a>378</td><td></td><td></td><td></td><td></td><td class="s">    $$err_ref = $_;</td></tr>
<tr><td class="h"><a name="379"></a>379</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[[0-9:]+\] ==/;        # Join, quit, change nick, change topic, mode</td></tr>
<tr><td class="h"><a name="380"></a>380</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[[0-9:]+\] \*/;        # A message with /me</td></tr>
<tr><td class="h"><a name="381"></a>381</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\s*$/;                # Empty line</td></tr>
<tr><td class="h"><a name="382"></a>382</td><td></td><td></td><td></td><td></td><td class="s">    if (/^\[(\d\d):(\d\d)\] &lt;([^&gt;]+)&gt; (.*)$/) {</td></tr>
<tr><td class="h"><a name="383"></a>383</td><td></td><td></td><td></td><td></td><td class="s">      push @$records_ref, {type=&gt;'i', speaker=&gt;$3, text=&gt;$4,</td></tr>
<tr><td class="h"><a name="384"></a>384</td><td></td><td></td><td></td><td></td><td class="s">                           time=&gt; 3600 * $1 + 60 * $2};</td></tr>
<tr><td class="h"><a name="385"></a>385</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="386"></a>386</td><td></td><td></td><td></td><td></td><td class="s">      return 0;                        # This is not qwebirc</td></tr>
<tr><td class="h"><a name="387"></a>387</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="388"></a>388</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="389"></a>389</td><td></td><td></td><td></td><td></td><td class="s">  return 1;</td></tr>
<tr><td class="h"><a name="390"></a>390</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="391"></a>391</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="392"></a>392</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="393"></a>393</td><td></td><td></td><td></td><td></td><td class="s"># IRCCloud_format - the log format of the IRCCloud web service</td></tr>
<tr><td class="h"><a name="394"></a>394</td><td></td><td></td><td></td><td></td><td class="s">sub IRCCloud_format($$$$)</td></tr>
<tr><td class="h"><a name="395"></a>395</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="396"></a>396</td><td></td><td></td><td></td><td></td><td class="s">  my ($lines_ref, $records_ref, $nlines_ref, $err_ref) = @_;</td></tr>
<tr><td class="h"><a name="397"></a>397</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="398"></a>398</td><td></td><td></td><td></td><td></td><td class="s">  $$nlines_ref = 0;</td></tr>
<tr><td class="h"><a name="399"></a>399</td><td></td><td></td><td></td><td></td><td class="s">  foreach (@$lines_ref) {</td></tr>
<tr><td class="h"><a name="400"></a>400</td><td></td><td></td><td></td><td></td><td class="s">    $$nlines_ref++;</td></tr>
<tr><td class="h"><a name="401"></a>401</td><td></td><td></td><td></td><td></td><td class="s">    $$err_ref = $_;</td></tr>
<tr><td class="h"><a name="402"></a>402</td><td></td><td></td><td></td><td></td><td class="s">    next if /^#[^ ]+$/;                                # IRC channel name</td></tr>
<tr><td class="h"><a name="403"></a>403</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[[0-9 :-]+\] → Joined /;        # IRCCloud joined the channel</td></tr>
<tr><td class="h"><a name="404"></a>404</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[[0-9 :-]+\] → [^ ]+ joined /;        # Somebody joined the channel</td></tr>
<tr><td class="h"><a name="405"></a>405</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[[0-9 :-]+\] ⇐ [^ ]+ quit /;        # Somebody disconnected</td></tr>
<tr><td class="h"><a name="406"></a>406</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[[0-9 :-]+\] ⇐ You disconnected/; # User left IRCCloud</td></tr>
<tr><td class="h"><a name="407"></a>407</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[[0-9 :-]+\] ← [^ ]+ left /;        # Somebody left the channel</td></tr>
<tr><td class="h"><a name="408"></a>408</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[[0-9 :-]+\] — [^ ]+ /;                # A /me line</td></tr>
<tr><td class="h"><a name="409"></a>409</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[[0-9 :-]+\] \* [^ ]+ /;                # Changed nick, changed mode...</td></tr>
<tr><td class="h"><a name="410"></a>410</td><td></td><td></td><td></td><td></td><td class="s">    if (/^\[[0-9-]+ (\d\d):(\d\d):(\d\d)\] &lt;([^&gt;]+)&gt; (.*)$/) { # $4 said $5</td></tr>
<tr><td class="h"><a name="411"></a>411</td><td></td><td></td><td></td><td></td><td class="s">      push @$records_ref, {type=&gt;'i', speaker=&gt;$4, text=&gt;$5,</td></tr>
<tr><td class="h"><a name="412"></a>412</td><td></td><td></td><td></td><td></td><td class="s">                           time=&gt; 3600 * $1 + 60 * $2 + $3};</td></tr>
<tr><td class="h"><a name="413"></a>413</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="414"></a>414</td><td></td><td></td><td></td><td></td><td class="s">      return 0;                                        # Not an IRCCloud log line</td></tr>
<tr><td class="h"><a name="415"></a>415</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="416"></a>416</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="417"></a>417</td><td></td><td></td><td></td><td></td><td class="s">  return 1;                                        # All lines recognized</td></tr>
<tr><td class="h"><a name="418"></a>418</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="419"></a>419</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="420"></a>420</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="421"></a>421</td><td></td><td></td><td></td><td></td><td class="s"># Quassel_paste_format -- copy-paste from the Quassel chat window</td></tr>
<tr><td class="h"><a name="422"></a>422</td><td></td><td></td><td></td><td></td><td class="s">sub Quassel_paste_format($$$$)</td></tr>
<tr><td class="h"><a name="423"></a>423</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="424"></a>424</td><td></td><td></td><td></td><td></td><td class="s">  my ($lines_ref, $records_ref, $nlines_ref, $err_ref) = @_;</td></tr>
<tr><td class="h"><a name="425"></a>425</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="426"></a>426</td><td></td><td></td><td></td><td></td><td class="s">  # In fact, the date and time between the square brackets can be</td></tr>
<tr><td class="h"><a name="427"></a>427</td><td></td><td></td><td></td><td></td><td class="s">  # anything, including month names and arbitrary punctuation. We only</td></tr>
<tr><td class="h"><a name="428"></a>428</td><td></td><td></td><td></td><td></td><td class="s">  # look for hh:mm and hh:mm:ss, with or without pm.</td></tr>
<tr><td class="h"><a name="429"></a>429</td><td></td><td></td><td></td><td></td><td class="s">  #</td></tr>
<tr><td class="h"><a name="430"></a>430</td><td></td><td></td><td></td><td></td><td class="s">  $$nlines_ref = 0;</td></tr>
<tr><td class="h"><a name="431"></a>431</td><td></td><td></td><td></td><td></td><td class="s">  foreach (@$lines_ref) {</td></tr>
<tr><td class="h"><a name="432"></a>432</td><td></td><td></td><td></td><td></td><td class="s">    $$nlines_ref++;</td></tr>
<tr><td class="h"><a name="433"></a>433</td><td></td><td></td><td></td><td></td><td class="s">    $$err_ref = $_;</td></tr>
<tr><td class="h"><a name="434"></a>434</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[.*?\] --&gt;/;                # Somebody joined the channel</td></tr>
<tr><td class="h"><a name="435"></a>435</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[.*?\] &lt;--/;                # Somebody quit the channel</td></tr>
<tr><td class="h"><a name="436"></a>436</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[.*?\] &lt;-&gt;/;                # Somebody changed nick</td></tr>
<tr><td class="h"><a name="437"></a>437</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[.*?\] \* /;                # Change of topic, channel created...</td></tr>
<tr><td class="h"><a name="438"></a>438</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[.*?\] -\*-/;                # Somebody used /me</td></tr>
<tr><td class="h"><a name="439"></a>439</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[.*?\] \*\*\*/;                # Channel mode change</td></tr>
<tr><td class="h"><a name="440"></a>440</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\[.*?\] - \{/;                # Message &quot;Day changed to ...&quot;</td></tr>
<tr><td class="h"><a name="441"></a>441</td><td></td><td></td><td></td><td></td><td class="s">    next if /^\s*$/;                        # Skip empty line</td></tr>
<tr><td class="h"><a name="442"></a>442</td><td></td><td></td><td></td><td></td><td class="s">    if (/^\[[^]]*(\d\d?):(\d\d)(?::(\d\d))?\s*pm[^]]*\] &lt;([^&gt;]+)&gt; (.*)$/i) {</td></tr>
<tr><td class="h"><a name="443"></a>443</td><td></td><td></td><td></td><td></td><td class="s">      push @$records_ref, {type=&gt;'i', speaker=&gt;$4, text=&gt;$5,</td></tr>
<tr><td class="h"><a name="444"></a>444</td><td></td><td></td><td></td><td></td><td class="s">                           time=&gt; 3600 * $1 + 60 * (12 + $2) + ($3 // 0)};</td></tr>
<tr><td class="h"><a name="445"></a>445</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^\[[^]]*(\d\d?):(\d\d)(?::(\d\d))?[^]]*\] &lt;([^&gt;]+)&gt; (.*)$/){</td></tr>
<tr><td class="h"><a name="446"></a>446</td><td></td><td></td><td></td><td></td><td class="s">      push @$records_ref, {type=&gt;'i', speaker=&gt;$4, text=&gt;$5,</td></tr>
<tr><td class="h"><a name="447"></a>447</td><td></td><td></td><td></td><td></td><td class="s">                           time=&gt; 3600 * $1 + 60 * $2 + ($3 // 0)};</td></tr>
<tr><td class="h"><a name="448"></a>448</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (/^\[.*?\] &lt;([^&gt;]+)&gt; (.*)$/) {</td></tr>
<tr><td class="h"><a name="449"></a>449</td><td></td><td></td><td></td><td></td><td class="s">      push @$records_ref, {type=&gt;'i', speaker=&gt;$1, text=&gt;$2};</td></tr>
<tr><td class="h"><a name="450"></a>450</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="451"></a>451</td><td></td><td></td><td></td><td></td><td class="s">      return 0;</td></tr>
<tr><td class="h"><a name="452"></a>452</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="453"></a>453</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="454"></a>454</td><td></td><td></td><td></td><td></td><td class="s">  return 1;</td></tr>
<tr><td class="h"><a name="455"></a>455</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="456"></a>456</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="457"></a>457</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="458"></a>458</td><td></td><td></td><td></td><td></td><td class="s"># Plain_Text_Format -- a simple text format as a scribe might write in an editor</td></tr>
<tr><td class="h"><a name="459"></a>459</td><td></td><td></td><td></td><td></td><td class="s">sub Plain_Text_Format($$$$)</td></tr>
<tr><td class="h"><a name="460"></a>460</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="461"></a>461</td><td></td><td></td><td></td><td></td><td class="s">  my ($lines_ref, $records_ref, $nlines_ref, $err_ref) = @_;</td></tr>
<tr><td class="h"><a name="462"></a>462</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="463"></a>463</td><td></td><td></td><td></td><td></td><td class="s">  # This format is meant for taking minutes without IRC. Example:</td></tr>
<tr><td class="h"><a name="464"></a>464</td><td></td><td></td><td></td><td></td><td class="s">  #</td></tr>
<tr><td class="h"><a name="465"></a>465</td><td></td><td></td><td></td><td></td><td class="s">  #     Topic: Closing issues</td></tr>
<tr><td class="h"><a name="466"></a>466</td><td></td><td></td><td></td><td></td><td class="s">  #     Jim: I want to talk about issue 1.</td></tr>
<tr><td class="h"><a name="467"></a>467</td><td></td><td></td><td></td><td></td><td class="s">  #     ... And 2, if possible.</td></tr>
<tr><td class="h"><a name="468"></a>468</td><td></td><td></td><td></td><td></td><td class="s">  #     [General agreeement]</td></tr>
<tr><td class="h"><a name="469"></a>469</td><td></td><td></td><td></td><td></td><td class="s">  #</td></tr>
<tr><td class="h"><a name="470"></a>470</td><td></td><td></td><td></td><td></td><td class="s">  # Lines should not start with dates or times, or with bracketed</td></tr>
<tr><td class="h"><a name="471"></a>471</td><td></td><td></td><td></td><td></td><td class="s">  # nicknames (&quot;&lt;...&gt;&quot;), as in typical IRC logs. E.g., the following</td></tr>
<tr><td class="h"><a name="472"></a>472</td><td></td><td></td><td></td><td></td><td class="s">  # lines cause the parser to conclude that the input is *not*</td></tr>
<tr><td class="h"><a name="473"></a>473</td><td></td><td></td><td></td><td></td><td class="s">  # Plain_Text_Format:</td></tr>
<tr><td class="h"><a name="474"></a>474</td><td></td><td></td><td></td><td></td><td class="s">  #</td></tr>
<tr><td class="h"><a name="475"></a>475</td><td></td><td></td><td></td><td></td><td class="s">  # *   09:34:14 &lt;Sue&gt; Topic: next meeting</td></tr>
<tr><td class="h"><a name="476"></a>476</td><td></td><td></td><td></td><td></td><td class="s">  # *   2007-04-04 10:50 Jim: +1</td></tr>
<tr><td class="h"><a name="477"></a>477</td><td></td><td></td><td></td><td></td><td class="s">  # *   &lt;Aude&gt; Not now.</td></tr>
<tr><td class="h"><a name="478"></a>478</td><td></td><td></td><td></td><td></td><td class="s">  #</td></tr>
<tr><td class="h"><a name="479"></a>479</td><td></td><td></td><td></td><td></td><td class="s">  $$nlines_ref = 0;</td></tr>
<tr><td class="h"><a name="480"></a>480</td><td></td><td></td><td></td><td></td><td class="s">  foreach (@$lines_ref) {</td></tr>
<tr><td class="h"><a name="481"></a>481</td><td></td><td></td><td></td><td></td><td class="s">    $$nlines_ref++;</td></tr>
<tr><td class="h"><a name="482"></a>482</td><td></td><td></td><td></td><td></td><td class="s">    $$err_ref = $_;</td></tr>
<tr><td class="h"><a name="483"></a>483</td><td></td><td></td><td></td><td></td><td class="s">    return 0 if /^[0-9:-]+[:-][0-9:-]/;                # Seems to start w/ a date/time</td></tr>
<tr><td class="h"><a name="484"></a>484</td><td></td><td></td><td></td><td></td><td class="s">    return 0 if /^&lt;[^ &gt;]+&gt; /;                        # Seems to start with a &lt;nick&gt;</td></tr>
<tr><td class="h"><a name="485"></a>485</td><td></td><td></td><td></td><td></td><td class="s">    if (/^(.+)$/) {                                # Not empty</td></tr>
<tr><td class="h"><a name="486"></a>486</td><td></td><td></td><td></td><td></td><td class="s">      push (@$records_ref, {type=&gt;'i', speaker=&gt;'scribe', text=&gt;$1});</td></tr>
<tr><td class="h"><a name="487"></a>487</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="488"></a>488</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="489"></a>489</td><td></td><td></td><td></td><td></td><td class="s">  return 1;</td></tr>
<tr><td class="h"><a name="490"></a>490</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="491"></a>491</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="492"></a>492</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="493"></a>493</td><td></td><td></td><td></td><td></td><td class="s"># fc_uniq -- return the list of case-insensitively distinct strings in a list</td></tr>
<tr><td class="h"><a name="494"></a>494</td><td></td><td></td><td></td><td></td><td class="s">sub fc_uniq(@)</td></tr>
<tr><td class="h"><a name="495"></a>495</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 23µs within main::fc_uniq which was called 2 times, avg 12µs/call:
#    once (17µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1570">line 1570</a>
#    once (6µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1734">line 1734</a></div></div>{</td></tr>
<tr><td class="h"><a name="496"></a>496</td><td class="c1">2</td><td class="c3"><span title="Avg 200ns">400ns</span></td><td></td><td></td><td class="s">  my %seen;</td></tr>
<tr><td class="h"><a name="497"></a>497</td><td class="c1">2</td><td class="c0"><span title="Avg 10µs">20µs</span></td><td></td><td></td><td class="s">  return grep {!$seen{fc $_}++} @_;</td></tr>
<tr><td class="h"><a name="498"></a>498</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="499"></a>499</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="500"></a>500</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="501"></a>501</td><td></td><td></td><td></td><td></td><td class="s"># repository_to_url -- expand a repository name to a full URL, or undef</td></tr>
<tr><td class="h"><a name="502"></a>502</td><td></td><td></td><td></td><td></td><td class="s">sub repository_to_url($)</td></tr>
<tr><td class="h"><a name="503"></a>503</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 5µs within main::repository_to_url which was called 2 times, avg 2µs/call:
# 2 times (5µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#707">line 707</a>, avg 2µs/call</div></div>{</td></tr>
<tr><td class="h"><a name="504"></a>504</td><td class="c1">2</td><td class="c3"><span title="Avg 250ns">500ns</span></td><td></td><td></td><td class="s">  my ($repo) = @_;</td></tr>
<tr><td class="h"><a name="505"></a>505</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="506"></a>506</td><td></td><td></td><td></td><td></td><td class="s">  # A full repository URL is &quot;BASE_URL/OWNER/REPO&quot;. If BASE_URL is</td></tr>
<tr><td class="h"><a name="507"></a>507</td><td></td><td></td><td></td><td></td><td class="s">  # missing, use the one from the previous repo in the list, or</td></tr>
<tr><td class="h"><a name="508"></a>508</td><td></td><td></td><td></td><td></td><td class="s">  # https://github.com/. If OWNER is missing, use the one from the</td></tr>
<tr><td class="h"><a name="509"></a>509</td><td></td><td></td><td></td><td></td><td class="s">  # previous repo, or &quot;w3c&quot;.</td></tr>
<tr><td class="h"><a name="510"></a>510</td><td></td><td></td><td></td><td></td><td class="s">  #</td></tr>
<tr><td class="h"><a name="511"></a>511</td><td class="c1">2</td><td class="c3"><span title="Avg 1µs">3µs</span></td><td></td><td></td><td class="s">  return $repositories[0] if ! $repo; # First repo or undef</td></tr>
<tr><td class="h"><a name="512"></a>512</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="513"></a>513</td><td></td><td></td><td></td><td></td><td class="s">  my ($base, $owner, $name) = $repo =~</td></tr>
<tr><td class="h"><a name="514"></a>514</td><td></td><td></td><td></td><td></td><td class="s">      /^([a-z]+:\/\/(?:[^\/?#]*\/)*?)?([^\/?#]+\/)?([^\/?#]+)\/?$/i;</td></tr>
<tr><td class="h"><a name="515"></a>515</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="516"></a>516</td><td></td><td></td><td></td><td></td><td class="s">  return &quot;$base$owner$name&quot; if $base;        # Just omit the final /, if any</td></tr>
<tr><td class="h"><a name="517"></a>517</td><td></td><td></td><td></td><td></td><td class="s">  return @repositories ? $repositories[0] =~ s/[^\/]+\/[^\/]+$/$owner$name/r :</td></tr>
<tr><td class="h"><a name="518"></a>518</td><td></td><td></td><td></td><td></td><td class="s">      &quot;https://github.com/$owner$name&quot; if $owner;</td></tr>
<tr><td class="h"><a name="519"></a>519</td><td></td><td></td><td></td><td></td><td class="s">  return undef if ! $name;        # Malformed repo name</td></tr>
<tr><td class="h"><a name="520"></a>520</td><td></td><td></td><td></td><td></td><td class="s">  return &quot;https://github.com/w3c/$name&quot; if ! @repositories; # Assume w3c</td></tr>
<tr><td class="h"><a name="521"></a>521</td><td></td><td></td><td></td><td></td><td class="s">  return $repositories[0] =~ s/[^\/]+$/$name/r;        # Copy base/owner from previous</td></tr>
<tr><td class="h"><a name="522"></a>522</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="523"></a>523</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="524"></a>524</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="525"></a>525</td><td></td><td></td><td></td><td></td><td class="s"># to_mathml -- call latexmlmath to convert a LaTeX math expression to MathML</td></tr>
<tr><td class="h"><a name="526"></a>526</td><td></td><td></td><td></td><td></td><td class="s">sub to_mathml($)</td></tr>
<tr><td class="h"><a name="527"></a>527</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="528"></a>528</td><td></td><td></td><td></td><td></td><td class="s">  my ($s) = @_;</td></tr>
<tr><td class="h"><a name="529"></a>529</td><td></td><td></td><td></td><td></td><td class="s">  my ($in, $out);</td></tr>
<tr><td class="h"><a name="530"></a>530</td><td></td><td></td><td></td><td></td><td class="s">  $in = $s;</td></tr>
<tr><td class="h"><a name="531"></a>531</td><td></td><td></td><td></td><td></td><td class="s">  $in =~ s/\\/\\\\/g;</td></tr>
<tr><td class="h"><a name="532"></a>532</td><td></td><td></td><td></td><td></td><td class="s">  $in =~ s/\&quot;/\\\&quot;/g;</td></tr>
<tr><td class="h"><a name="533"></a>533</td><td></td><td></td><td></td><td></td><td class="s">  $in =~ s/\$/\\\$/g;</td></tr>
<tr><td class="h"><a name="534"></a>534</td><td></td><td></td><td></td><td></td><td class="s">  $in =~ s/\`/\\\`/g;</td></tr>
<tr><td class="h"><a name="535"></a>535</td><td></td><td></td><td></td><td></td><td class="s">  # $out = `latexmlmath &quot;$in&quot; 2&gt;/dev/null`;</td></tr>
<tr><td class="h"><a name="536"></a>536</td><td></td><td></td><td></td><td></td><td class="s">  $out = decode('UTF-8', `latexmlmath &quot;$in&quot; 2&gt;/dev/null`);</td></tr>
<tr><td class="h"><a name="537"></a>537</td><td></td><td></td><td></td><td></td><td class="s">  push(@diagnostics, &quot;Failed math formula: $s&quot;) if $? != 0;</td></tr>
<tr><td class="h"><a name="538"></a>538</td><td></td><td></td><td></td><td></td><td class="s">  return $s if $? != 0;                # An error occurred, return original string</td></tr>
<tr><td class="h"><a name="539"></a>539</td><td></td><td></td><td></td><td></td><td class="s">  $out =~ s/&lt;\?xml[^&gt;]*\?&gt;\n?//;</td></tr>
<tr><td class="h"><a name="540"></a>540</td><td></td><td></td><td></td><td></td><td class="s">  $has_math = 1;</td></tr>
<tr><td class="h"><a name="541"></a>541</td><td></td><td></td><td></td><td></td><td class="s">  return $out;</td></tr>
<tr><td class="h"><a name="542"></a>542</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="543"></a>543</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="544"></a>544</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="545"></a>545</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="546"></a>546</td><td class="c3">1</td><td class="c3"><span title="Avg 1µs">1µs</span></td><td></td><td></td><td class="s">  my %tag = ('_' =&gt; 'u', '/' =&gt; 'em', '*' =&gt; 'strong', '`' =&gt; 'code');</td></tr>
<tr><td class="h"><a name="547"></a>547</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="548"></a>548</td><td></td><td></td><td></td><td></td><td class="s">  # to_emph -- replace emphasis marks and math</td></tr>
<tr><td class="h"><a name="549"></a>549</td><td></td><td></td><td></td><td></td><td class="s">  sub to_emph($);</td></tr>
<tr><td class="h"><a name="550"></a>550</td><td></td><td></td><td></td><td></td><td class="s">  sub to_emph($)</td></tr>
<tr><td class="h"><a name="551"></a>551</td><td></td><td></td><td></td><td></td><td class="s">  {</td></tr>
<tr><td class="h"><a name="552"></a>552</td><td></td><td></td><td></td><td></td><td class="s">    # Note: $` and $' must be stored in local variables before the</td></tr>
<tr><td class="h"><a name="553"></a>553</td><td></td><td></td><td></td><td></td><td class="s">    # recursive call, because they are global variables and might be</td></tr>
<tr><td class="h"><a name="554"></a>554</td><td></td><td></td><td></td><td></td><td class="s">    # changed in that call.</td></tr>
<tr><td class="h"><a name="555"></a>555</td><td></td><td></td><td></td><td></td><td class="s">    #</td></tr>
<tr><td class="h"><a name="556"></a>556</td><td></td><td></td><td></td><td></td><td class="s">    for ($_[0]) {</td></tr>
<tr><td class="h"><a name="557"></a>557</td><td></td><td></td><td></td><td></td><td class="s">      if (m{(?:^|\s|\p{P})\K([_/*`])(.+?)\g{1}(?=\p{P}|\s|$)}) {</td></tr>
<tr><td class="h"><a name="558"></a>558</td><td></td><td></td><td></td><td></td><td class="s">        my ($a, $z, $t, $m) = ($`, $', $1, $2);</td></tr>
<tr><td class="h"><a name="559"></a>559</td><td></td><td></td><td></td><td></td><td class="s">        return to_emph($a).&quot;&lt;$tag{$t}&gt;&quot;.to_emph($m).&quot;&lt;/$tag{$t}&gt;&quot;.to_emph($z);</td></tr>
<tr><td class="h"><a name="560"></a>560</td><td></td><td></td><td></td><td></td><td class="s">      } elsif (/(?:^|[^\\])\K\$\$[^\$]+\$\$/) { # $$...$$ not preceded by a '\'</td></tr>
<tr><td class="h"><a name="561"></a>561</td><td></td><td></td><td></td><td></td><td class="s">        my ($a, $m, $z) = ($`, $&amp;, $');</td></tr>
<tr><td class="h"><a name="562"></a>562</td><td></td><td></td><td></td><td></td><td class="s">        return to_emph($a) . to_mathml($m) . to_emph($z);</td></tr>
<tr><td class="h"><a name="563"></a>563</td><td></td><td></td><td></td><td></td><td class="s">      } elsif (/(?:^|[^\\])\K\$[^\$]+\$/) {        # $...$ not preceded by a '\'</td></tr>
<tr><td class="h"><a name="564"></a>564</td><td></td><td></td><td></td><td></td><td class="s">        my ($a, $m, $z) = ($`, $&amp;, $');</td></tr>
<tr><td class="h"><a name="565"></a>565</td><td></td><td></td><td></td><td></td><td class="s">        return to_emph($a) . to_mathml($m) . to_emph($z);</td></tr>
<tr><td class="h"><a name="566"></a>566</td><td></td><td></td><td></td><td></td><td class="s">      } elsif (/\\\$/) {                        # Escaped $</td></tr>
<tr><td class="h"><a name="567"></a>567</td><td></td><td></td><td></td><td></td><td class="s">        my ($a, $z) = ($`, $');</td></tr>
<tr><td class="h"><a name="568"></a>568</td><td></td><td></td><td></td><td></td><td class="s">        return to_emph($a) . '$' . to_emph($z);</td></tr>
<tr><td class="h"><a name="569"></a>569</td><td></td><td></td><td></td><td></td><td class="s">      } else {</td></tr>
<tr><td class="h"><a name="570"></a>570</td><td></td><td></td><td></td><td></td><td class="s">        return $_;</td></tr>
<tr><td class="h"><a name="571"></a>571</td><td></td><td></td><td></td><td></td><td class="s">      }</td></tr>
<tr><td class="h"><a name="572"></a>572</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="573"></a>573</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="574"></a>574</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="575"></a>575</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="576"></a>576</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="577"></a>577</td><td></td><td></td><td></td><td></td><td class="s"># break_url -- apply -urlDisplay option to a URL</td></tr>
<tr><td class="h"><a name="578"></a>578</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">sub break_url($)</td></tr>
<tr><td class="h"><a name="579"></a>579</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 75µs (39+36) within main::break_url which was called 8 times, avg 9µs/call:
# 8 times (39µs+36µs) by main::mklink at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#618">line 618</a>, avg 9µs/call</div></div>{</td></tr>
<tr><td class="h"><a name="580"></a>580</td><td class="c0">8</td><td class="c3"><span title="Avg 225ns">2µs</span></td><td></td><td></td><td class="s">  my ($s) = @_;</td></tr>
<tr><td class="h"><a name="581"></a>581</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="582"></a>582</td><td></td><td></td><td></td><td></td><td class="s">  # HTML delimiters are already escaped.</td></tr>
<tr><td class="h"><a name="583"></a>583</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="584"></a>584</td><td></td><td></td><td></td><td></td><td class="s">  # If the URL is a well-known one, replace it with an</td></tr>
<tr><td class="h"><a name="585"></a>585</td><td></td><td></td><td></td><td></td><td class="s">  # abbreviation. Otherwise, if the urlDisplay option is 'break',</td></tr>
<tr><td class="h"><a name="586"></a>586</td><td></td><td></td><td></td><td></td><td class="s">  # insert &lt;wbr&gt; tags to make the URL breakable. Otherwise, if the</td></tr>
<tr><td class="h"><a name="587"></a>587</td><td></td><td></td><td></td><td></td><td class="s">  # urlDisplay option is 'shorten', elide the middle part of the</td></tr>
<tr><td class="h"><a name="588"></a>588</td><td></td><td></td><td></td><td></td><td class="s">  # URL. Otherwise return the URL unchanged.</td></tr>
<tr><td class="h"><a name="589"></a>589</td><td class="c0">8</td><td class="c0"><span title="Avg 1µs">11µs</span></td><td class="c0">8</td><td class="c3">5µs</td><td class="s">  return &quot;$1/&lt;wbr&gt;$2&quot;<div class="calls"><div class="calls_out">  # spent     5µs making 8 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 612ns/call</div></div></td></tr>
<tr><td class="h"><a name="590"></a>590</td><td></td><td></td><td></td><td></td><td class="s">      if $s =~ /^https:\/\/github.com\/([^\/]+)\/([^\/]+)\/?$/;</td></tr>
<tr><td class="h"><a name="591"></a>591</td><td class="c0">8</td><td class="c0"><span title="Avg 1µs">11µs</span></td><td class="c0">8</td><td class="c3">3µs</td><td class="s">  return &quot;$1/&lt;wbr&gt;$2#$4&quot;<div class="calls"><div class="calls_out">  # spent     3µs making 8 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 362ns/call</div></div></td></tr>
<tr><td class="h"><a name="592"></a>592</td><td></td><td></td><td></td><td></td><td class="s">      if $s =~ /^https:\/\/github.com\/([^\/]+)\/([^\/]+)\/(issues|pull)\/([0-9]+)$/;</td></tr>
<tr><td class="h"><a name="593"></a>593</td><td class="c0">7</td><td class="c0"><span title="Avg 1µs">10µs</span></td><td class="c0">7</td><td class="c3">2µs</td><td class="s">  return &quot;$1/&lt;wbr&gt;$2#$4 (comment)&quot;<div class="calls"><div class="calls_out">  # spent     2µs making 7 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 343ns/call</div></div></td></tr>
<tr><td class="h"><a name="594"></a>594</td><td></td><td></td><td></td><td></td><td class="s">      if $s =~ /^https:\/\/github.com\/([^\/]+)\/([^\/]+)\/(issues|pull)\/([0-9]+)#issuecomment-/;</td></tr>
<tr><td class="h"><a name="595"></a>595</td><td class="c0">7</td><td class="c0"><span title="Avg 6µs">42µs</span></td><td class="c0">7</td><td class="c3">26µs</td><td class="s">  return $s =~ s|/\b|/&lt;wbr&gt;|gr<div class="calls"><div class="calls_out">  # spent    26µs making 7 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 4µs/call</div></div></td></tr>
<tr><td class="h"><a name="596"></a>596</td><td></td><td></td><td></td><td></td><td class="s">      if $url_display eq 'break';</td></tr>
<tr><td class="h"><a name="597"></a>597</td><td></td><td></td><td></td><td></td><td class="s">  return $s =~ s/^((?:[^&amp;]|&amp;[^;]+;){5})(?:[^&amp;]|&amp;[^;]+;)*((?:[^&amp;]|&amp;[^;]+;){6})$/$1…$2/r</td></tr>
<tr><td class="h"><a name="598"></a>598</td><td></td><td></td><td></td><td></td><td class="s">      if $url_display eq 'shorten';</td></tr>
<tr><td class="h"><a name="599"></a>599</td><td></td><td></td><td></td><td></td><td class="s">  return $s;</td></tr>
<tr><td class="h"><a name="600"></a>600</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="601"></a>601</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="602"></a>602</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="603"></a>603</td><td></td><td></td><td></td><td></td><td class="s"># mklink -- return HTML for a URL with anchortext: link, image or just text</td></tr>
<tr><td class="h"><a name="604"></a>604</td><td></td><td></td><td></td><td></td><td class="s">sub mklink($$$$)</td></tr>
<tr><td class="h"><a name="605"></a>605</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 218µs (69+149) within main::mklink which was called 14 times, avg 16µs/call:
# 8 times (44µs+107µs) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#692">line 692</a>, avg 19µs/call
# 6 times (25µs+42µs) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#659">line 659</a>, avg 11µs/call</div></div>{</td></tr>
<tr><td class="h"><a name="606"></a>606</td><td class="c0">14</td><td class="c0"><span title="Avg 700ns">10µs</span></td><td></td><td></td><td class="s">  my ($link, $type, $url, $anchortext) = @_;</td></tr>
<tr><td class="h"><a name="607"></a>607</td><td></td><td></td><td></td><td></td><td class="s">  # $link determines whether to make a link (&gt;0) or just show the text (&lt;0).</td></tr>
<tr><td class="h"><a name="608"></a>608</td><td></td><td></td><td></td><td></td><td class="s">  # $type determines whether to make a text (&quot;-&gt;&quot;) or an image (&quot;--&gt;&quot;).</td></tr>
<tr><td class="h"><a name="609"></a>609</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="610"></a>610</td><td class="c0">14</td><td class="c0"><span title="Avg 493ns">7µs</span></td><td class="c0">14</td><td class="c3">0s</td><td class="s">  $url = esc($url);<div class="calls"><div class="calls_out">  # spent    53µs making 14 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>, avg 4µs/call, recursion: max depth 1, sum of overlapping time 53µs</div></div></td></tr>
<tr><td class="h"><a name="611"></a>611</td><td class="c0">14</td><td class="c2"><span title="Avg 250ns">3µs</span></td><td></td><td></td><td class="s">  if ($link &gt; 0) {</td></tr>
<tr><td class="h"><a name="612"></a>612</td><td class="c0">14</td><td class="c1"><span title="Avg 336ns">5µs</span></td><td></td><td></td><td class="s">    my $s = '&lt;a href=&quot;' . $url . '&quot;&gt;';</td></tr>
<tr><td class="h"><a name="613"></a>613</td><td class="c0">14</td><td class="c0"><span title="Avg 714ns">10µs</span></td><td class="c0">6</td><td class="c3">0s</td><td class="s">    if ($type eq '--&gt;') {<div class="calls"><div class="calls_out">    # spent    20µs making 6 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>, avg 3µs/call, recursion: max depth 1, sum of overlapping time 20µs</div></div></td></tr>
<tr><td class="h"><a name="614"></a>614</td><td></td><td></td><td></td><td></td><td class="s">      $s .= '&lt;img src=&quot;' . $url . '&quot; alt=&quot;' . esc($anchortext) . '&quot;&gt;';</td></tr>
<tr><td class="h"><a name="615"></a>615</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($anchortext ne '') {</td></tr>
<tr><td class="h"><a name="616"></a>616</td><td></td><td></td><td></td><td></td><td class="s">      $s .= esc($anchortext, $emphasis);</td></tr>
<tr><td class="h"><a name="617"></a>617</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="618"></a>618</td><td class="c0">8</td><td class="c0"><span title="Avg 1µs">9µs</span></td><td class="c0">8</td><td class="c1">75µs</td><td class="s">      $s .= break_url($url); # Otherwise the URL itself is the anchor text<div class="calls"><div class="calls_out">      # spent    75µs making 8 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#579">main::break_url</a>, avg 9µs/call</div></div></td></tr>
<tr><td class="h"><a name="619"></a>619</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="620"></a>620</td><td class="c0">14</td><td class="c0"><span title="Avg 1µs">18µs</span></td><td></td><td></td><td class="s">    return &quot;$s&lt;/a&gt;&quot;;</td></tr>
<tr><td class="h"><a name="621"></a>621</td><td></td><td></td><td></td><td></td><td class="s">  } else {</td></tr>
<tr><td class="h"><a name="622"></a>622</td><td></td><td></td><td></td><td></td><td class="s">    return $anchortext ne '' ? esc($anchortext) : break_url($url);</td></tr>
<tr><td class="h"><a name="623"></a>623</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="624"></a>624</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="625"></a>625</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="626"></a>626</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="627"></a>627</td><td></td><td></td><td></td><td></td><td class="s"># esc -- escape HTML delimiters (&lt;&gt;&amp;&quot;), optionally handle emphasis &amp; Ralph links</td></tr>
<tr><td class="h"><a name="628"></a>628</td><td></td><td></td><td></td><td></td><td class="s">sub esc($;$$$$);</td></tr>
<tr><td class="h"><a name="629"></a>629</td><td></td><td></td><td></td><td></td><td class="s">sub esc($;$$$$)</td></tr>
<tr><td class="h"><a name="630"></a>630</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 16.6ms (2.76+13.9) within main::esc which was called 877 times, avg 19µs/call:
# 404 times (1.41ms+15.1ms) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1658">line 1658</a>, avg 41µs/call
# 216 times (614µs+-614µs) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#711">line 711</a>, avg 0s/call
# 205 times (569µs+-569µs) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#697">line 697</a>, avg 0s/call
#  14 times (39µs+-39µs) by main::mklink at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#610">line 610</a>, avg 0s/call
#   8 times (29µs+-29µs) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#692">line 692</a>, avg 0s/call
#   7 times (19µs+7µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1738">line 1738</a>, avg 4µs/call
#   6 times (16µs+-16µs) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#659">line 659</a>, avg 0s/call
#   6 times (16µs+-16µs) by main::mklink at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#613">line 613</a>, avg 0s/call
#   3 times (12µs+50µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1790">line 1790</a>, avg 21µs/call
#   2 times (7µs+-7µs) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#706">line 706</a>, avg 0s/call
#      once (8µs+2µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1291">line 1291</a>
#      once (5µs+3µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1728">line 1728</a>
#      once (4µs+1µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1283">line 1283</a>
#      once (3µs+500ns) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1734">line 1734</a>
#      once (3µs+100ns) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1731">line 1731</a>
#      once (3µs+400ns) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1735">line 1735</a></div></div>{</td></tr>
<tr><td class="h"><a name="631"></a>631</td><td class="c0">877</td><td class="c0"><span title="Avg 217ns">190µs</span></td><td></td><td></td><td class="s">  my ($s, $emph, $link, $break_urls, $github) = @_;</td></tr>
<tr><td class="h"><a name="632"></a>632</td><td class="c0">877</td><td class="c0"><span title="Avg 61ns">54µs</span></td><td></td><td></td><td class="s">  my ($replacement, $pre, $url, $post, $type, $r);</td></tr>
<tr><td class="h"><a name="633"></a>633</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="634"></a>634</td><td class="c0">877</td><td class="c0"><span title="Avg 177ns">155µs</span></td><td></td><td></td><td class="s">  if ($link) {</td></tr>
<tr><td class="h"><a name="635"></a>635</td><td></td><td></td><td></td><td></td><td class="s">    # Wrap Ralph-links and bare URLs in &lt;a&gt;.</td></tr>
<tr><td class="h"><a name="636"></a>636</td><td></td><td></td><td></td><td></td><td class="s">    # 1a) A double-quoted Ralph link: ... -&gt; URL &quot;ANCHOR&quot; ...</td></tr>
<tr><td class="h"><a name="637"></a>637</td><td></td><td></td><td></td><td></td><td class="s">    # 1b) A single-quoted Ralph link: ... -&gt; URL 'ANCHOR' ...</td></tr>
<tr><td class="h"><a name="638"></a>638</td><td></td><td></td><td></td><td></td><td class="s">    # 1a) An unquoted Ralph link: ... -&gt; URL ANCHOR</td></tr>
<tr><td class="h"><a name="639"></a>639</td><td></td><td></td><td></td><td></td><td class="s">    # 2) A Xueyuan link: ANCHOR -&gt; URL</td></tr>
<tr><td class="h"><a name="640"></a>640</td><td></td><td></td><td></td><td></td><td class="s">    # 3) An Ivan link: ... -&gt; ANCHOR URL ...</td></tr>
<tr><td class="h"><a name="641"></a>641</td><td></td><td></td><td></td><td></td><td class="s">    # 4a) A double-quoted inverted Xueyuan link: ... URL -&gt; &quot;ANCHOR&quot; ...</td></tr>
<tr><td class="h"><a name="642"></a>642</td><td></td><td></td><td></td><td></td><td class="s">    # 4b) A single-quoted inverted Xueyuan link: ... URL -&gt; 'ANCHOR' ...</td></tr>
<tr><td class="h"><a name="643"></a>643</td><td></td><td></td><td></td><td></td><td class="s">    # 4c) An unquoted inverted Xueyuan link: ... URL -&gt; ANCHOR</td></tr>
<tr><td class="h"><a name="644"></a>644</td><td></td><td></td><td></td><td></td><td class="s">    # 5) A markdown link: ... [ANCHOR](URL)</td></tr>
<tr><td class="h"><a name="645"></a>645</td><td></td><td></td><td></td><td></td><td class="s">    # 6) A bare URL: ... URL ...</td></tr>
<tr><td class="h"><a name="646"></a>646</td><td></td><td></td><td></td><td></td><td class="s">    # With --&gt; instead of -&gt;, the link is embedded as an image (&lt;img&gt;).</td></tr>
<tr><td class="h"><a name="647"></a>647</td><td></td><td></td><td></td><td></td><td class="s">    # If $link &lt; 0, omit the &lt;a&gt; tag and just insert the text or image.</td></tr>
<tr><td class="h"><a name="648"></a>648</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="649"></a>649</td><td></td><td></td><td></td><td></td><td class="s">    # Loop until we found all URLs.</td></tr>
<tr><td class="h"><a name="650"></a>650</td><td class="c0">205</td><td class="c0"><span title="Avg 110ns">23µs</span></td><td></td><td></td><td class="s">    $replacement = '';</td></tr>
<tr><td class="h"><a name="651"></a>651</td><td class="c0">205</td><td class="c0"><span title="Avg 64µs">13.2ms</span></td><td class="c0">410</td><td class="c0">12.9ms</td><td class="s">    while (($pre, $url, $post) = $s =~ /^(.*?)($urlpat)(.*)$/i) {<div class="calls"><div class="calls_out">    # spent  12.6ms making 205 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 62µs/call
    # spent   259µs making 205 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_regcomp">main::CORE:regcomp</a>, avg 1µs/call</div></div></td></tr>
<tr><td class="h"><a name="652"></a>652</td><td></td><td></td><td></td><td></td><td class="s">      # Look for &quot;-&gt;&quot; or &quot;--&gt;&quot; before or after the URL.</td></tr>
<tr><td class="h"><a name="653"></a>653</td><td class="c0">14</td><td class="c0"><span title="Avg 7µs">100µs</span></td><td class="c0">106</td><td class="c3">36µs</td><td class="s">      if ($pre =~ /(--?&gt;) *$/p) { # Ralph, Xueyuan or missing anchor text<div class="calls"><div class="calls_out">      # spent    28µs making 92 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 300ns/call
      # spent     9µs making 14 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_regcomp">main::CORE:regcomp</a>, avg 636ns/call</div></div></td></tr>
<tr><td class="h"><a name="654"></a>654</td><td class="c0">6</td><td class="c3"><span title="Avg 300ns">2µs</span></td><td></td><td></td><td class="s">        $type = $1;</td></tr>
<tr><td class="h"><a name="655"></a>655</td><td class="c0">6</td><td class="c3"><span title="Avg 333ns">2µs</span></td><td></td><td></td><td class="s">        $pre = $`;</td></tr>
<tr><td class="h"><a name="656"></a>656</td><td class="c0">6</td><td class="c0"><span title="Avg 3µs">19µs</span></td><td class="c0">18</td><td class="c3">7µs</td><td class="s">        if ($post =~ /^ *&quot;([^&quot;\t]*)&quot;/p || $post =~ /^ *'([^'\t]*)'/p ||<div class="calls"><div class="calls_out">        # spent     7µs making 18 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 400ns/call</div></div></td></tr>
<tr><td class="h"><a name="657"></a>657</td><td></td><td></td><td></td><td></td><td class="s">            $post =~ /^ *([^'&quot; \t][^\t]*[^ \t]) */p ||</td></tr>
<tr><td class="h"><a name="658"></a>658</td><td></td><td></td><td></td><td></td><td class="s">            $post =~ /^ *([^'&quot; \t]) */p) { # Ralph link</td></tr>
<tr><td class="h"><a name="659"></a>659</td><td class="c0">6</td><td class="c0"><span title="Avg 1µs">8µs</span></td><td class="c0">12</td><td class="c1">66µs</td><td class="s">          $replacement .= esc($pre, $emph, 0, 0, $github)<div class="calls"><div class="calls_out">          # spent    66µs making 6 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#605">main::mklink</a>, avg 11µs/call
          # spent    35µs making 6 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>, avg 6µs/call, recursion: max depth 1, sum of overlapping time 35µs</div></div></td></tr>
<tr><td class="h"><a name="660"></a>660</td><td></td><td></td><td></td><td></td><td class="s">              . mklink($link, $type, $url, $1);</td></tr>
<tr><td class="h"><a name="661"></a>661</td><td class="c0">6</td><td class="c3"><span title="Avg 350ns">2µs</span></td><td></td><td></td><td class="s">          $s = $';</td></tr>
<tr><td class="h"><a name="662"></a>662</td><td></td><td></td><td></td><td></td><td class="s">        } elsif ($pre =~ / *([^ \t][^\t]*[^ \t]|[^ \t]) *$/p) {        # Xueyuan link</td></tr>
<tr><td class="h"><a name="663"></a>663</td><td></td><td></td><td></td><td></td><td class="s">          $replacement .= esc($`, $emph, 0, 0, $github)</td></tr>
<tr><td class="h"><a name="664"></a>664</td><td></td><td></td><td></td><td></td><td class="s">              . mklink($link, $type, $url,$1);</td></tr>
<tr><td class="h"><a name="665"></a>665</td><td></td><td></td><td></td><td></td><td class="s">          $s = $post;</td></tr>
<tr><td class="h"><a name="666"></a>666</td><td></td><td></td><td></td><td></td><td class="s">        } else {                # Missing anchor text</td></tr>
<tr><td class="h"><a name="667"></a>667</td><td></td><td></td><td></td><td></td><td class="s">          $replacement .= esc($pre, $emph, 0, 0, $github)</td></tr>
<tr><td class="h"><a name="668"></a>668</td><td></td><td></td><td></td><td></td><td class="s">              . mklink($link, $type, $url, '');</td></tr>
<tr><td class="h"><a name="669"></a>669</td><td></td><td></td><td></td><td></td><td class="s">          $s = $post;</td></tr>
<tr><td class="h"><a name="670"></a>670</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="671"></a>671</td><td></td><td></td><td></td><td></td><td class="s">      } elsif ($pre =~ /(--?&gt;) *(.+?) *$/p) { # Ivan link</td></tr>
<tr><td class="h"><a name="672"></a>672</td><td></td><td></td><td></td><td></td><td class="s">        $replacement .= esc($`, $emph, 0, 0, $github)</td></tr>
<tr><td class="h"><a name="673"></a>673</td><td></td><td></td><td></td><td></td><td class="s">            . mklink($link, $1, $url, $2);</td></tr>
<tr><td class="h"><a name="674"></a>674</td><td></td><td></td><td></td><td></td><td class="s">        $s = $post;</td></tr>
<tr><td class="h"><a name="675"></a>675</td><td></td><td></td><td></td><td></td><td class="s">      } elsif ($post =~ /^ *(--?&gt;) *&quot;([^&quot;\t]*)&quot;/p ||</td></tr>
<tr><td class="h"><a name="676"></a>676</td><td></td><td></td><td></td><td></td><td class="s">               $post =~ /^ *(--?&gt;) *'([^'\t]*)'/p ||</td></tr>
<tr><td class="h"><a name="677"></a>677</td><td></td><td></td><td></td><td></td><td class="s">               $post =~ /^ *(--?&gt;) *([^ \t][^\t]*[^ \t]) */p ||</td></tr>
<tr><td class="h"><a name="678"></a>678</td><td></td><td></td><td></td><td></td><td class="s">               $post =~ /^ *(--?&gt;) *([^ \t]) */p ||</td></tr>
<tr><td class="h"><a name="679"></a>679</td><td></td><td></td><td></td><td></td><td class="s">               $post =~ /^ *(--?&gt;) *()/p) { # Inverted Xueyuan link</td></tr>
<tr><td class="h"><a name="680"></a>680</td><td></td><td></td><td></td><td></td><td class="s">        $replacement  .= esc($pre, $emph, 0, 0, $github)</td></tr>
<tr><td class="h"><a name="681"></a>681</td><td></td><td></td><td></td><td></td><td class="s">            . mklink($link, $1, $url, $2);</td></tr>
<tr><td class="h"><a name="682"></a>682</td><td></td><td></td><td></td><td></td><td class="s">        $s = $';</td></tr>
<tr><td class="h"><a name="683"></a>683</td><td></td><td></td><td></td><td></td><td class="s">      } elsif ($post =~ /^\)/ &amp;&amp; $pre =~ /!\[([^\]]+)\]\($/p) { # Markdown image</td></tr>
<tr><td class="h"><a name="684"></a>684</td><td></td><td></td><td></td><td></td><td class="s">        $r = $1;</td></tr>
<tr><td class="h"><a name="685"></a>685</td><td></td><td></td><td></td><td></td><td class="s">        $replacement .= esc($`) . mklink($link, &quot;--&gt;&quot;, $url, $r);</td></tr>
<tr><td class="h"><a name="686"></a>686</td><td></td><td></td><td></td><td></td><td class="s">            $s = $post =~ s/^\)//r;</td></tr>
<tr><td class="h"><a name="687"></a>687</td><td></td><td></td><td></td><td></td><td class="s">      } elsif ($post =~ /^\)/ &amp;&amp; $pre =~ /\[([^\]]+)\]\($/p) { # Markdown link</td></tr>
<tr><td class="h"><a name="688"></a>688</td><td></td><td></td><td></td><td></td><td class="s">        $r = $1;</td></tr>
<tr><td class="h"><a name="689"></a>689</td><td></td><td></td><td></td><td></td><td class="s">        $replacement .= esc($`, $emph) . mklink($link, &quot;-&gt;&quot;, $url, $r);</td></tr>
<tr><td class="h"><a name="690"></a>690</td><td></td><td></td><td></td><td></td><td class="s">            $s = $post =~ s/^\)//r;</td></tr>
<tr><td class="h"><a name="691"></a>691</td><td></td><td></td><td></td><td></td><td class="s">      } else {                                        # Bare URL.</td></tr>
<tr><td class="h"><a name="692"></a>692</td><td class="c0">8</td><td class="c0"><span title="Avg 3µs">21µs</span></td><td class="c0">16</td><td class="c0">151µs</td><td class="s">            $replacement .= esc($pre, $emph, 0, 0, $github)<div class="calls"><div class="calls_out">            # spent   151µs making 8 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#605">main::mklink</a>, avg 19µs/call
            # spent    60µs making 8 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>, avg 8µs/call, recursion: max depth 1, sum of overlapping time 60µs</div></div></td></tr>
<tr><td class="h"><a name="693"></a>693</td><td></td><td></td><td></td><td></td><td class="s">            . mklink($link, '-&gt;', $url, '');</td></tr>
<tr><td class="h"><a name="694"></a>694</td><td class="c0">8</td><td class="c3"><span title="Avg 250ns">2µs</span></td><td></td><td></td><td class="s">            $s = $post;</td></tr>
<tr><td class="h"><a name="695"></a>695</td><td></td><td></td><td></td><td></td><td class="s">      }</td></tr>
<tr><td class="h"><a name="696"></a>696</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="697"></a>697</td><td class="c0">205</td><td class="c0"><span title="Avg 695ns">142µs</span></td><td class="c0">205</td><td class="c3">0s</td><td class="s">    $s = $replacement . esc($s, $emph, 0, 0, $github);<div class="calls"><div class="calls_out">    # spent  1.84ms making 205 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>, avg 9µs/call, recursion: max depth 1, sum of overlapping time 1.84ms</div></div></td></tr>
<tr><td class="h"><a name="698"></a>698</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($break_urls) {        # Shorten or break URLs</td></tr>
<tr><td class="h"><a name="699"></a>699</td><td></td><td></td><td></td><td></td><td class="s">    $s = esc($s, $emph);</td></tr>
<tr><td class="h"><a name="700"></a>700</td><td></td><td></td><td></td><td></td><td class="s">    $s =~ s/($urlpat)/break_url($1)/gie;</td></tr>
<tr><td class="h"><a name="701"></a>701</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($github) {</td></tr>
<tr><td class="h"><a name="702"></a>702</td><td class="c0">216</td><td class="c0"><span title="Avg 107ns">23µs</span></td><td></td><td></td><td class="s">    $replacement = '';</td></tr>
<tr><td class="h"><a name="703"></a>703</td><td class="c0">216</td><td class="c0"><span title="Avg 1µs">247µs</span></td><td class="c0">216</td><td class="c0">106µs</td><td class="s">    while ($s =~ /(?:^|\W)\K((?:[a-z0-9._-]+\/)?[a-z0-9._-]+)?#([0-9]+)(?=\W|$)/i) {<div class="calls"><div class="calls_out">    # spent   106µs making 216 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 491ns/call</div></div></td></tr>
<tr><td class="h"><a name="704"></a>704</td><td class="c1">2</td><td class="c3"><span title="Avg 600ns">1µs</span></td><td></td><td></td><td class="s">     $s = $';</td></tr>
<tr><td class="h"><a name="705"></a>705</td><td class="c1">2</td><td class="c3"><span title="Avg 800ns">2µs</span></td><td></td><td></td><td class="s">     my ($repo, $issue) = ($1 // '', $2);</td></tr>
<tr><td class="h"><a name="706"></a>706</td><td class="c1">2</td><td class="c3"><span title="Avg 1µs">2µs</span></td><td class="c3">2</td><td class="c3">0s</td><td class="s">     $replacement .= esc($`, $emph);<div class="calls"><div class="calls_out">     # spent    15µs making 2 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>, avg 7µs/call, recursion: max depth 2, sum of overlapping time 15µs</div></div></td></tr>
<tr><td class="h"><a name="707"></a>707</td><td class="c1">2</td><td class="c0"><span title="Avg 6µs">11µs</span></td><td class="c0">4</td><td class="c3">9µs</td><td class="s">     $replacement .=  ($r = repository_to_url($repo))<div class="calls"><div class="calls_out">     # spent     5µs making 2 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#503">main::repository_to_url</a>, avg 2µs/call
     # spent     4µs making 2 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 2µs/call</div></div></td></tr>
<tr><td class="h"><a name="708"></a>708</td><td></td><td></td><td></td><td></td><td class="s">      ? '&lt;a href=&quot;'.esc(&quot;$r/issues/$issue&quot;).&quot;\&quot;&gt;$repo#$issue&lt;/a&gt;&quot;</td></tr>
<tr><td class="h"><a name="709"></a>709</td><td></td><td></td><td></td><td></td><td class="s">      : &quot;$repo#$issue&quot;;</td></tr>
<tr><td class="h"><a name="710"></a>710</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="711"></a>711</td><td class="c0">216</td><td class="c0"><span title="Avg 593ns">128µs</span></td><td class="c0">216</td><td class="c3">0s</td><td class="s">    $s = $replacement . esc($s, $emph);<div class="calls"><div class="calls_out">    # spent  1.19ms making 216 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>, avg 6µs/call, recursion: max depth 2, sum of overlapping time 1.19ms</div></div></td></tr>
<tr><td class="h"><a name="712"></a>712</td><td></td><td></td><td></td><td></td><td class="s">  } else {</td></tr>
<tr><td class="h"><a name="713"></a>713</td><td class="c0">456</td><td class="c0"><span title="Avg 998ns">455µs</span></td><td class="c0">456</td><td class="c0">195µs</td><td class="s">    $s =~ s/&amp;/&amp;amp;/g;<div class="calls"><div class="calls_out">    # spent   195µs making 456 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 427ns/call</div></div></td></tr>
<tr><td class="h"><a name="714"></a>714</td><td class="c0">456</td><td class="c0"><span title="Avg 881ns">402µs</span></td><td class="c0">456</td><td class="c0">184µs</td><td class="s">    $s =~ s/&lt;/&amp;lt;/g;<div class="calls"><div class="calls_out">    # spent   184µs making 456 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 403ns/call</div></div></td></tr>
<tr><td class="h"><a name="715"></a>715</td><td class="c0">456</td><td class="c0"><span title="Avg 807ns">368µs</span></td><td class="c0">456</td><td class="c0">160µs</td><td class="s">    $s =~ s/&gt;/&amp;gt;/g;<div class="calls"><div class="calls_out">    # spent   160µs making 456 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 352ns/call</div></div></td></tr>
<tr><td class="h"><a name="716"></a>716</td><td class="c0">456</td><td class="c0"><span title="Avg 829ns">378µs</span></td><td class="c0">456</td><td class="c0">167µs</td><td class="s">    $s =~ s/&quot;/&amp;quot;/g;<div class="calls"><div class="calls_out">    # spent   167µs making 456 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 365ns/call</div></div></td></tr>
<tr><td class="h"><a name="717"></a>717</td><td class="c0">456</td><td class="c0"><span title="Avg 151ns">69µs</span></td><td></td><td></td><td class="s">    if ($emph) {</td></tr>
<tr><td class="h"><a name="718"></a>718</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/:-\)/☺/g;</td></tr>
<tr><td class="h"><a name="719"></a>719</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/;-\)/😉\x{FE0E}/g;</td></tr>
<tr><td class="h"><a name="720"></a>720</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/:-\(/☹/g;</td></tr>
<tr><td class="h"><a name="721"></a>721</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s{:-/}{😕\x{FE0E}}g;</td></tr>
<tr><td class="h"><a name="722"></a>722</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/,-\)/😜\x{FE0E}/g;</td></tr>
<tr><td class="h"><a name="723"></a>723</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s{\\o/}{🙌\x{FE0E}}g;</td></tr>
<tr><td class="h"><a name="724"></a>724</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/(?:^|[^-])\K--&amp;gt;/⟶/g;</td></tr>
<tr><td class="h"><a name="725"></a>725</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/(?:^|[^-])\K-&amp;gt;/→/g;</td></tr>
<tr><td class="h"><a name="726"></a>726</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/(?:^|[^=])\K==&amp;gt;/⟹/g;</td></tr>
<tr><td class="h"><a name="727"></a>727</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/(?:^|[^=])\K=&amp;gt;/⇒/g;</td></tr>
<tr><td class="h"><a name="728"></a>728</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/&amp;lt;--(?!-)/⟵/g;</td></tr>
<tr><td class="h"><a name="729"></a>729</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/&amp;lt;-(?!-)/←/g;</td></tr>
<tr><td class="h"><a name="730"></a>730</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/&amp;lt;==(?!=)/⟸/g;</td></tr>
<tr><td class="h"><a name="731"></a>731</td><td></td><td></td><td></td><td></td><td class="s">      $s =~ s/&amp;lt;=(?!=)/⇐/g;</td></tr>
<tr><td class="h"><a name="732"></a>732</td><td></td><td></td><td></td><td></td><td class="s">      $s = to_emph($s);                # Italics, bold, underline, monospace, math</td></tr>
<tr><td class="h"><a name="733"></a>733</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="734"></a>734</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="735"></a>735</td><td class="c0">877</td><td class="c0"><span title="Avg 703ns">616µs</span></td><td></td><td></td><td class="s">  return $s;</td></tr>
<tr><td class="h"><a name="736"></a>736</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="737"></a>737</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="738"></a>738</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="739"></a>739</td><td></td><td></td><td></td><td></td><td class="s"># is_cur_scribe -- true if $nick is in %$curscribes_ref, ignores trailing &quot;_&quot;</td></tr>
<tr><td class="h"><a name="740"></a>740</td><td></td><td></td><td></td><td></td><td class="s">sub is_cur_scribe($$)</td></tr>
<tr><td class="h"><a name="741"></a>741</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 424µs (384+40) within main::is_cur_scribe which was called 202 times, avg 2µs/call:
# 202 times (384µs+40µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1088">line 1088</a>, avg 2µs/call</div></div>{</td></tr>
<tr><td class="h"><a name="742"></a>742</td><td class="c0">202</td><td class="c0"><span title="Avg 234ns">47µs</span></td><td></td><td></td><td class="s">  my ($nick, $curscribes_ref) = @_;</td></tr>
<tr><td class="h"><a name="743"></a>743</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="744"></a>744</td><td class="c0">202</td><td class="c0"><span title="Avg 2µs">411µs</span></td><td class="c0">202</td><td class="c3">40µs</td><td class="s">  return $$curscribes_ref{fc($nick =~ s/_+$//r)} || $$curscribes_ref{'*'};<div class="calls"><div class="calls_out">  # spent    40µs making 202 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 199ns/call</div></div></td></tr>
<tr><td class="h"><a name="745"></a>745</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="746"></a>746</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="747"></a>747</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="748"></a>748</td><td></td><td></td><td></td><td></td><td class="s"># add_scribes -- add scribes to the scribe list and the current scribes</td></tr>
<tr><td class="h"><a name="749"></a>749</td><td></td><td></td><td></td><td></td><td class="s">sub add_scribes($$$$)</td></tr>
<tr><td class="h"><a name="750"></a>750</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 68µs (34+35) within main::add_scribes which was called 4 times, avg 17µs/call:
# 2 times (12µs+3µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1344">line 1344</a>, avg 8µs/call
#    once (16µs+30µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1079">line 1079</a>
#    once (6µs+2µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1336">line 1336</a></div></div>{</td></tr>
<tr><td class="h"><a name="751"></a>751</td><td class="c0">4</td><td class="c3"><span title="Avg 525ns">2µs</span></td><td></td><td></td><td class="s">  my ($names, $curscribes_ref, $scribes_ref, $scribenames_ref) = @_;</td></tr>
<tr><td class="h"><a name="752"></a>752</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="753"></a>753</td><td></td><td></td><td></td><td></td><td class="s">  # We may assume $names matches zero or more comma-separated $scribepat</td></tr>
<tr><td class="h"><a name="754"></a>754</td><td class="c0">4</td><td class="c0"><span title="Avg 2µs">10µs</span></td><td></td><td></td><td class="s">  foreach (split(/ *, */, $names)) {        # Split at commas</td></tr>
<tr><td class="h"><a name="755"></a>755</td><td class="c0">4</td><td class="c0"><span title="Avg 11µs">42µs</span></td><td class="c0">8</td><td class="c3">34µs</td><td class="s">    my ($nick, $real) = /^$scribepat$/;        # Split into nick and real name<div class="calls"><div class="calls_out">    # spent    29µs making 4 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_regcomp">main::CORE:regcomp</a>, avg 7µs/call
    # spent     4µs making 4 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 1µs/call</div></div></td></tr>
<tr><td class="h"><a name="756"></a>756</td><td class="c0">4</td><td class="c0"><span title="Avg 2µs">7µs</span></td><td class="c0">4</td><td class="c3">1µs</td><td class="s">    my $n = fc($nick =~ s/_+$//r);        # Case-insensitive, without trailing _<div class="calls"><div class="calls_out">    # spent     1µs making 4 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 275ns/call</div></div></td></tr>
<tr><td class="h"><a name="757"></a>757</td><td class="c0">4</td><td class="c3"><span title="Avg 500ns">2µs</span></td><td></td><td></td><td class="s">    $$curscribes_ref{$n} = 1;                # Add nick as current scribe</td></tr>
<tr><td class="h"><a name="758"></a>758</td><td class="c0">4</td><td class="c3"><span title="Avg 350ns">1µs</span></td><td></td><td></td><td class="s">    push @$scribes_ref, $n;                # Add nick to overall scribe list</td></tr>
<tr><td class="h"><a name="759"></a>759</td><td></td><td></td><td></td><td></td><td class="s">    # Add a new real name, or use the nick as real name if there was none.</td></tr>
<tr><td class="h"><a name="760"></a>760</td><td class="c0">4</td><td class="c2"><span title="Avg 1µs">4µs</span></td><td></td><td></td><td class="s">    if ($real) {$$scribenames_ref{$n} = $real;}</td></tr>
<tr><td class="h"><a name="761"></a>761</td><td></td><td></td><td></td><td></td><td class="s">    elsif (!$$scribenames_ref{$n}) {$$scribenames_ref{$n} = $nick;}</td></tr>
<tr><td class="h"><a name="762"></a>762</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="763"></a>763</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="764"></a>764</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="765"></a>765</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="766"></a>766</td><td></td><td></td><td></td><td></td><td class="s"># delete_scribes -- remove from current scribe list</td></tr>
<tr><td class="h"><a name="767"></a>767</td><td></td><td></td><td></td><td></td><td class="s">sub delete_scribes($$)</td></tr>
<tr><td class="h"><a name="768"></a>768</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="769"></a>769</td><td></td><td></td><td></td><td></td><td class="s">  my ($names, $curscribes_ref) = @_;</td></tr>
<tr><td class="h"><a name="770"></a>770</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="771"></a>771</td><td></td><td></td><td></td><td></td><td class="s">  # We may assume $names matches zero or more comma-separated $scribepat</td></tr>
<tr><td class="h"><a name="772"></a>772</td><td></td><td></td><td></td><td></td><td class="s">  foreach (split(/ *, */, $names)) {        # Split at commas</td></tr>
<tr><td class="h"><a name="773"></a>773</td><td></td><td></td><td></td><td></td><td class="s">    my ($nick, $real) = /^$scribepat$/;        # Split into name and real name</td></tr>
<tr><td class="h"><a name="774"></a>774</td><td></td><td></td><td></td><td></td><td class="s">    my $n = fc($nick =~ s/_+$//r);        # Case-insensitive, without trailing _</td></tr>
<tr><td class="h"><a name="775"></a>775</td><td></td><td></td><td></td><td></td><td class="s">    delete $$curscribes_ref{$n};        # Remove from curscribes</td></tr>
<tr><td class="h"><a name="776"></a>776</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="777"></a>777</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="778"></a>778</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="779"></a>779</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="780"></a>780</td><td></td><td></td><td></td><td></td><td class="s"># link_to_recording -- return an HTML link to the recording at $time, or &quot;&quot;</td></tr>
<tr><td class="h"><a name="781"></a>781</td><td></td><td></td><td></td><td></td><td class="s">sub link_to_recording($$)</td></tr>
<tr><td class="h"><a name="782"></a>782</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 134µs within main::link_to_recording which was called 202 times, avg 665ns/call:
# 202 times (134µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1658">line 1658</a>, avg 665ns/call</div></div>{</td></tr>
<tr><td class="h"><a name="783"></a>783</td><td class="c0">202</td><td class="c0"><span title="Avg 149ns">30µs</span></td><td></td><td></td><td class="s">  my ($url, $time) = @_;</td></tr>
<tr><td class="h"><a name="784"></a>784</td><td class="c0">202</td><td class="c0"><span title="Avg 74ns">15µs</span></td><td></td><td></td><td class="s">  my ($offset, $endoffset);</td></tr>
<tr><td class="h"><a name="785"></a>785</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="786"></a>786</td><td class="c0">202</td><td class="c0"><span title="Avg 32µs">6.47ms</span></td><td></td><td></td><td class="s">  return '' if !defined $url || !defined $recordingstart || !defined $time;</td></tr>
<tr><td class="h"><a name="787"></a>787</td><td></td><td></td><td></td><td></td><td class="s">  $offset = $time - $recordingstart;</td></tr>
<tr><td class="h"><a name="788"></a>788</td><td></td><td></td><td></td><td></td><td class="s">  # If they are more than 8 hours apart, we assume we're comparing</td></tr>
<tr><td class="h"><a name="789"></a>789</td><td></td><td></td><td></td><td></td><td class="s">  # across midnight and add 24 hours.</td></tr>
<tr><td class="h"><a name="790"></a>790</td><td></td><td></td><td></td><td></td><td class="s">  $offset += 24 * 3600 if $offset &lt; -8 * 3600;</td></tr>
<tr><td class="h"><a name="791"></a>791</td><td></td><td></td><td></td><td></td><td class="s">  return '' if $offset &lt; 0;        # We're before the start of the recording</td></tr>
<tr><td class="h"><a name="792"></a>792</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="793"></a>793</td><td></td><td></td><td></td><td></td><td class="s">  # Check if we are already after the end of the recording.</td></tr>
<tr><td class="h"><a name="794"></a>794</td><td></td><td></td><td></td><td></td><td class="s">  if (defined $recordingend) {</td></tr>
<tr><td class="h"><a name="795"></a>795</td><td></td><td></td><td></td><td></td><td class="s">    $endoffset = $recordingend - $time;</td></tr>
<tr><td class="h"><a name="796"></a>796</td><td></td><td></td><td></td><td></td><td class="s">    $endoffset += 24 * 3600 if $endoffset &lt; -8 * 3600;</td></tr>
<tr><td class="h"><a name="797"></a>797</td><td></td><td></td><td></td><td></td><td class="s">    return '' if $endoffset &lt;= 0;</td></tr>
<tr><td class="h"><a name="798"></a>798</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="799"></a>799</td><td></td><td></td><td></td><td></td><td class="s">  return sprintf &quot; &lt;a href=\&quot;%1\$s#t=%2\$s\&quot; class=recording title=\&quot;matching video record\&quot;&gt;🎞\x{FE0E}&lt;/a&gt;&quot;, esc($url), $offset;</td></tr>
<tr><td class="h"><a name="800"></a>800</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="801"></a>801</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="802"></a>802</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="803"></a>803</td><td></td><td></td><td></td><td></td><td class="s"># add_repositories -- expand repository names to full URLs and remember them</td></tr>
<tr><td class="h"><a name="804"></a>804</td><td></td><td></td><td></td><td></td><td class="s">sub add_repositories($)</td></tr>
<tr><td class="h"><a name="805"></a>805</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="806"></a>806</td><td></td><td></td><td></td><td></td><td class="s">  my $repos = shift;</td></tr>
<tr><td class="h"><a name="807"></a>807</td><td></td><td></td><td></td><td></td><td class="s">  my $r;</td></tr>
<tr><td class="h"><a name="808"></a>808</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="809"></a>809</td><td></td><td></td><td></td><td></td><td class="s">  # $repos is a comma- or space-separated list of possibly abbreviated</td></tr>
<tr><td class="h"><a name="810"></a>810</td><td></td><td></td><td></td><td></td><td class="s">  # repository names. Expand them to full URLs and prefix the</td></tr>
<tr><td class="h"><a name="811"></a>811</td><td></td><td></td><td></td><td></td><td class="s">  # resulting list of URLs to the global @repositories. E.g.,</td></tr>
<tr><td class="h"><a name="812"></a>812</td><td></td><td></td><td></td><td></td><td class="s">  # &quot;foo/bar, other/bar, baz&quot; is expanded to</td></tr>
<tr><td class="h"><a name="813"></a>813</td><td></td><td></td><td></td><td></td><td class="s">  # &quot;https://github.com/foo/bar, https://github.com/other/bar,</td></tr>
<tr><td class="h"><a name="814"></a>814</td><td></td><td></td><td></td><td></td><td class="s">  # https://github.com/other/baz&quot;.</td></tr>
<tr><td class="h"><a name="815"></a>815</td><td></td><td></td><td></td><td></td><td class="s">  #</td></tr>
<tr><td class="h"><a name="816"></a>816</td><td></td><td></td><td></td><td></td><td class="s">  foreach (split /[ ,]+/, $repos) {</td></tr>
<tr><td class="h"><a name="817"></a>817</td><td></td><td></td><td></td><td></td><td class="s">    if (($r = repository_to_url($_))) {</td></tr>
<tr><td class="h"><a name="818"></a>818</td><td></td><td></td><td></td><td></td><td class="s">      unshift @repositories, $r;</td></tr>
<tr><td class="h"><a name="819"></a>819</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="820"></a>820</td><td></td><td></td><td></td><td></td><td class="s">      push @diagnostics, &quot;Could not interpret as a repository: $_&quot;;</td></tr>
<tr><td class="h"><a name="821"></a>821</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="822"></a>822</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="823"></a>823</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="824"></a>824</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="825"></a>825</td><td></td><td></td><td></td><td></td><td class="s"># remove_repositories -- remove one or more repositories from the list</td></tr>
<tr><td class="h"><a name="826"></a>826</td><td></td><td></td><td></td><td></td><td class="s">sub remove_repositories($)</td></tr>
<tr><td class="h"><a name="827"></a>827</td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h"><a name="828"></a>828</td><td></td><td></td><td></td><td></td><td class="s">  my ($repos) = @_;</td></tr>
<tr><td class="h"><a name="829"></a>829</td><td></td><td></td><td></td><td></td><td class="s">  my $r;</td></tr>
<tr><td class="h"><a name="830"></a>830</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="831"></a>831</td><td></td><td></td><td></td><td></td><td class="s">  foreach (split /[ ,]+/, $repos) {</td></tr>
<tr><td class="h"><a name="832"></a>832</td><td></td><td></td><td></td><td></td><td class="s">    if (($r = repository_to_url($_))) {</td></tr>
<tr><td class="h"><a name="833"></a>833</td><td></td><td></td><td></td><td></td><td class="s">      @repositories = grep $_ ne $r, @repositories;</td></tr>
<tr><td class="h"><a name="834"></a>834</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="835"></a>835</td><td></td><td></td><td></td><td></td><td class="s">      push @diagnostics, &quot;Could not interpret as a repository: $_&quot;;</td></tr>
<tr><td class="h"><a name="836"></a>836</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="837"></a>837</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="838"></a>838</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="839"></a>839</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="840"></a>840</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="841"></a>841</td><td></td><td></td><td></td><td></td><td class="s"># make_id -- make a unique ID based using a hash of a given text</td></tr>
<tr><td class="h"><a name="842"></a>842</td><td></td><td></td><td></td><td></td><td class="s">sub make_id($)</td></tr>
<tr><td class="h"><a name="843"></a>843</td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 4.41ms (4.03+374µs) within main::make_id which was called 298 times, avg 15µs/call:
# 202 times (2.57ms+241µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1090">line 1090</a>, avg 14µs/call
#  74 times (1.10ms+90µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1663">line 1663</a>, avg 16µs/call
#  22 times (362µs+43µs) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1662">line 1662</a>, avg 18µs/call</div></div>{</td></tr>
<tr><td class="h"><a name="844"></a>844</td><td class="c0">298</td><td class="c0"><span title="Avg 116ns">35µs</span></td><td></td><td></td><td class="s">  my $hash = 0;</td></tr>
<tr><td class="h"><a name="845"></a>845</td><td class="c0">298</td><td class="c0"><span title="Avg 13µs">3.81ms</span></td><td class="c0">298</td><td class="c0">374µs</td><td class="s">  $hash = (($hash + $_) &lt;&lt; 7) + ($hash &gt;&gt; 11) foreach unpack('c*', $_[0]);<div class="calls"><div class="calls_out">  # spent   374µs making 298 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_unpack">main::CORE:unpack</a>, avg 1µs/call</div></div></td></tr>
<tr><td class="h"><a name="846"></a>846</td><td class="c0">298</td><td class="c0"><span title="Avg 120ns">36µs</span></td><td></td><td></td><td class="s">  $hash &amp;= 0xFFFF;</td></tr>
<tr><td class="h"><a name="847"></a>847</td><td class="c0">298</td><td class="c0"><span title="Avg 377ns">112µs</span></td><td></td><td></td><td class="s">  $hash++ while exists $ids{$hash};</td></tr>
<tr><td class="h"><a name="848"></a>848</td><td class="c0">298</td><td class="c0"><span title="Avg 518ns">154µs</span></td><td></td><td></td><td class="s">  $ids{$hash} = 1;</td></tr>
<tr><td class="h"><a name="849"></a>849</td><td class="c0">298</td><td class="c0"><span title="Avg 1µs">346µs</span></td><td></td><td></td><td class="s">  return sprintf &quot;%04x&quot;, $hash;</td></tr>
<tr><td class="h"><a name="850"></a>850</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="851"></a>851</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="852"></a>852</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="853"></a>853</td><td></td><td></td><td></td><td></td><td class="s"># Main body</td></tr>
<tr><td class="h"><a name="854"></a>854</td><td class="c3">1</td><td class="c0"><span title="Avg 7µs">7µs</span></td><td class="c3">2</td><td class="c3">3µs</td><td class="s">my $revision = '$Revision: hash-ids-230 $'<div class="calls"><div class="calls_out"># spent     3µs making 2 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 2µs/call</div></div></td></tr>
<tr><td class="h"><a name="855"></a>855</td><td></td><td></td><td></td><td></td><td class="s">  =~ s/\$Revision: //r</td></tr>
<tr><td class="h"><a name="856"></a>856</td><td></td><td></td><td></td><td></td><td class="s">  =~ s/ \$//r;</td></tr>
<tr><td class="h"><a name="857"></a>857</td><td class="c3">1</td><td class="c3"><span title="Avg 3µs">3µs</span></td><td class="c3">2</td><td class="c3">1µs</td><td class="s">my $versiondate = '$Date: Wed Sep 18 18:30:11 2024 UTC $'<div class="calls"><div class="calls_out"># spent     1µs making 2 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 700ns/call</div></div></td></tr>
<tr><td class="h"><a name="858"></a>858</td><td></td><td></td><td></td><td></td><td class="s">  =~ s/\$Date: //r</td></tr>
<tr><td class="h"><a name="859"></a>859</td><td></td><td></td><td></td><td></td><td class="s">  =~ s/ \$//r;</td></tr>
<tr><td class="h"><a name="860"></a>860</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="861"></a>861</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my @scribes;                        # List of scribes</td></tr>
<tr><td class="h"><a name="862"></a>862</td><td></td><td></td><td></td><td></td><td class="s">my %scribenames;                # Map scribe nicknames to real names</td></tr>
<tr><td class="h"><a name="863"></a>863</td><td></td><td></td><td></td><td></td><td class="s">my @records;                        # Array of parsed lines</td></tr>
<tr><td class="h"><a name="864"></a>864</td><td></td><td></td><td></td><td></td><td class="s">my $date;                        # Date of the meeting</td></tr>
<tr><td class="h"><a name="865"></a>865</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my $meeting = &quot;(MEETING TITLE)&quot;; # Name of the meeting (HTML-escaped)</td></tr>
<tr><td class="h"><a name="866"></a>866</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my $prev_meeting = '';                # HTML-formatted link to previous meeting</td></tr>
<tr><td class="h"><a name="867"></a>867</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $next_meeting = '';                # HTML-formatted link to next meeting</td></tr>
<tr><td class="h"><a name="868"></a>868</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my %present;                        # List of participants</td></tr>
<tr><td class="h"><a name="869"></a>869</td><td></td><td></td><td></td><td></td><td class="s">my %regrets;                        # List of regrets</td></tr>
<tr><td class="h"><a name="870"></a>870</td><td></td><td></td><td></td><td></td><td class="s">my $minutes_url;                # URL of the minutes according to RRSAgent</td></tr>
<tr><td class="h"><a name="871"></a>871</td><td></td><td></td><td></td><td></td><td class="s">my $logging_url;                # URL of the log according to RRSAgent</td></tr>
<tr><td class="h"><a name="872"></a>872</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my $agenda = '';                # HTML-formatted link to an agenda</td></tr>
<tr><td class="h"><a name="873"></a>873</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my %chairs;                        # List of meeting chairs</td></tr>
<tr><td class="h"><a name="874"></a>874</td><td></td><td></td><td></td><td></td><td class="s">my %lastspeaker;                # Current speaker (separate for each scribe)</td></tr>
<tr><td class="h"><a name="875"></a>875</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $speakerid = 's00';                # Generates unique ID for each speaker</td></tr>
<tr><td class="h"><a name="876"></a>876</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $has_slides = 0;                # Set to 1 if there is at least one slideset</td></tr>
<tr><td class="h"><a name="877"></a>877</td><td class="c3">1</td><td class="c3"><span title="Avg 0s">0s</span></td><td></td><td></td><td class="s">my $lastslideset;                # URL of the slideset being presented</td></tr>
<tr><td class="h"><a name="878"></a>878</td><td></td><td></td><td></td><td></td><td class="s">my $embeddedslideset;           # id of the link element that embeds a data url</td></tr>
<tr><td class="h"><a name="879"></a>879</td><td></td><td></td><td></td><td></td><td class="s">                                # encoding of the slideset (for i-slide)</td></tr>
<tr><td class="h"><a name="880"></a>880</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $embeddedslidesetcounter = 0;# counter of embedded slidesets</td></tr>
<tr><td class="h"><a name="881"></a>881</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $recording;                         # URL of the recording of the meeting</td></tr>
<tr><td class="h"><a name="882"></a>882</td><td></td><td></td><td></td><td></td><td class="s">my $recording_link;                # HTML-formatted link to the recording</td></tr>
<tr><td class="h"><a name="883"></a>883</td><td></td><td></td><td></td><td></td><td class="s">my %speakers;                        # Unique ID for each speaker</td></tr>
<tr><td class="h"><a name="884"></a>884</td><td></td><td></td><td></td><td></td><td class="s">my %namedanchors;                # Set of already used IDs for NamedAnchorsHere</td></tr>
<tr><td class="h"><a name="885"></a>885</td><td></td><td></td><td></td><td></td><td class="s">my %curscribes;                        # Indexes are the current scribenicks</td></tr>
<tr><td class="h"><a name="886"></a>886</td><td></td><td></td><td></td><td></td><td class="s">my %verbatim;                        # End of preformatted mode for nick: ``` or ]]</td></tr>
<tr><td class="h"><a name="887"></a>887</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">my $agenda_icon = '&lt;img alt=&quot;Agenda.&quot; title=&quot;Agenda&quot; ' .</td></tr>
<tr><td class="h"><a name="888"></a>888</td><td></td><td></td><td></td><td></td><td class="s">  'src=&quot;https://www.w3.org/StyleSheets/scribe2/chronometer.png&quot;&gt;';</td></tr>
<tr><td class="h"><a name="889"></a>889</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $irclog_icon = '&lt;img alt=&quot;IRC log.&quot; title=&quot;IRC log&quot; ' .</td></tr>
<tr><td class="h"><a name="890"></a>890</td><td></td><td></td><td></td><td></td><td class="s">  'src=&quot;https://www.w3.org/StyleSheets/scribe2/text-plain.png&quot;&gt;';</td></tr>
<tr><td class="h"><a name="891"></a>891</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $previous_icon = '&lt;img alt=&quot;Previous meeting.&quot; title=&quot;Previous meeting&quot; ' .</td></tr>
<tr><td class="h"><a name="892"></a>892</td><td></td><td></td><td></td><td></td><td class="s">  'src=&quot;https://www.w3.org/StyleSheets/scribe2/go-previous.png&quot;&gt;';</td></tr>
<tr><td class="h"><a name="893"></a>893</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">my $next_icon = '&lt;img alt=&quot;Next meeting.&quot; title=&quot;Next meeting&quot; ' .</td></tr>
<tr><td class="h"><a name="894"></a>894</td><td></td><td></td><td></td><td></td><td class="s">  'src=&quot;https://www.w3.org/StyleSheets/scribe2/go-next.png&quot;&gt;';</td></tr>
<tr><td class="h"><a name="895"></a>895</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $w3clogo = '&lt;a href=&quot;https://www.w3.org/&quot;&gt;&lt;img src=&quot;https://www.w3.org/' .</td></tr>
<tr><td class="h"><a name="896"></a>896</td><td></td><td></td><td></td><td></td><td class="s">  'StyleSheets/TR/2016/logos/W3C&quot; alt=W3C border=0 height=48 width=72&gt;&lt;/a&gt;';</td></tr>
<tr><td class="h"><a name="897"></a>897</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="898"></a>898</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td></td><td></td><td class="s">my %bots = (fc('RRSAgent') =&gt; 1, # Nicks that probably aren't scribe</td></tr>
<tr><td class="h"><a name="899"></a>899</td><td></td><td></td><td></td><td></td><td class="s">            fc('trackbot') =&gt; 1,</td></tr>
<tr><td class="h"><a name="900"></a>900</td><td></td><td></td><td></td><td></td><td class="s">            fc('ghurlbot') =&gt; 1,</td></tr>
<tr><td class="h"><a name="901"></a>901</td><td></td><td></td><td></td><td></td><td class="s">            fc('gb') =&gt; 1,</td></tr>
<tr><td class="h"><a name="902"></a>902</td><td></td><td></td><td></td><td></td><td class="s">            fc('github-bot') =&gt; 1,</td></tr>
<tr><td class="h"><a name="903"></a>903</td><td></td><td></td><td></td><td></td><td class="s">            fc('agendabot') =&gt; 1,</td></tr>
<tr><td class="h"><a name="904"></a>904</td><td></td><td></td><td></td><td></td><td class="s">            fc('Zakim') =&gt; 1);</td></tr>
<tr><td class="h"><a name="905"></a>905</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="906"></a>906</td><td></td><td></td><td></td><td></td><td class="s">my %options = (&quot;team&quot; =&gt; sub {$styleset = 'team'},</td></tr>
<tr><td class="h"><a name="907"></a>907</td><td></td><td></td><td></td><td></td><td class="s">               &quot;member&quot; =&gt; sub {$styleset = 'member'},</td></tr>
<tr><td class="h"><a name="908"></a>908</td><td></td><td></td><td></td><td></td><td class="s">               &quot;fancy&quot; =&gt; sub {$styleset = 'fancy'},</td></tr>
<tr><td class="h"><a name="909"></a>909</td><td></td><td></td><td></td><td></td><td class="s">               &quot;embedDiagnostics!&quot; =&gt; \$embed_diagnostics,</td></tr>
<tr><td class="h"><a name="910"></a>910</td><td></td><td></td><td></td><td></td><td class="s">               &quot;implicitContinuations!&quot; =&gt; \$implicitcont,</td></tr>
<tr><td class="h"><a name="911"></a>911</td><td></td><td></td><td></td><td></td><td class="s">               &quot;allowSpaceContinuation!&quot; =&gt; \$spacecont,</td></tr>
<tr><td class="h"><a name="912"></a>912</td><td></td><td></td><td></td><td></td><td class="s">               &quot;keepLines!&quot; =&gt; \$keeplines,</td></tr>
<tr><td class="h"><a name="913"></a>913</td><td></td><td></td><td></td><td></td><td class="s">               &quot;urlDisplay=s&quot; =&gt; sub {</td></tr>
<tr><td class="h"><a name="914"></a>914</td><td></td><td></td><td></td><td></td><td class="s">                 if ($_[1] =~ /^(?:break|shorten|full$)/i) {$url_display=$_[1]}</td></tr>
<tr><td class="h"><a name="915"></a>915</td><td></td><td></td><td></td><td></td><td class="s">                 else {die &quot;--urlDisplay must be break, shorten or full\n&quot;}},</td></tr>
<tr><td class="h"><a name="916"></a>916</td><td></td><td></td><td></td><td></td><td class="s">               &quot;final!&quot; =&gt; \$final,</td></tr>
<tr><td class="h"><a name="917"></a>917</td><td></td><td></td><td></td><td></td><td class="s">               &quot;draft!&quot; =&gt; sub {$final = ! $_[1]},</td></tr>
<tr><td class="h"><a name="918"></a>918</td><td></td><td></td><td></td><td></td><td class="s">               &quot;scribenick=s&quot; =&gt; \$scribenick,</td></tr>
<tr><td class="h"><a name="919"></a>919</td><td></td><td></td><td></td><td></td><td class="s">               &quot;dashTopics!&quot; =&gt; \$dash_topics,</td></tr>
<tr><td class="h"><a name="920"></a>920</td><td></td><td></td><td></td><td></td><td class="s">               &quot;useZakimTopics!&quot; =&gt; \$use_zakim,</td></tr>
<tr><td class="h"><a name="921"></a>921</td><td></td><td></td><td></td><td></td><td class="s">               &quot;scribeOnly!&quot; =&gt; \$scribeonly,</td></tr>
<tr><td class="h"><a name="922"></a>922</td><td></td><td></td><td></td><td></td><td class="s">               &quot;emphasis!&quot; =&gt; \$emphasis,</td></tr>
<tr><td class="h"><a name="923"></a>923</td><td></td><td></td><td></td><td></td><td class="s">               &quot;mathjax=s&quot; =&gt; \$mathjax,</td></tr>
<tr><td class="h"><a name="924"></a>924</td><td></td><td></td><td></td><td></td><td class="s">               &quot;islide=s&quot; =&gt; \$islide,</td></tr>
<tr><td class="h"><a name="925"></a>925</td><td></td><td></td><td></td><td></td><td class="s">               &quot;oldStyle!&quot; =&gt; \$old_style,</td></tr>
<tr><td class="h"><a name="926"></a>926</td><td></td><td></td><td></td><td></td><td class="s">               &quot;stylesheet:s&quot; =&gt; \$stylesheet,</td></tr>
<tr><td class="h"><a name="927"></a>927</td><td></td><td></td><td></td><td></td><td class="s">               &quot;logo:s&quot; =&gt; \$logo,</td></tr>
<tr><td class="h"><a name="928"></a>928</td><td></td><td></td><td></td><td></td><td class="s">               &quot;nologo&quot; =&gt; sub {$logo = ''},</td></tr>
<tr><td class="h"><a name="929"></a>929</td><td class="c3">1</td><td class="c0"><span title="Avg 9µs">9µs</span></td><td></td><td></td><td class="s">               &quot;collapseLimit:i&quot; =&gt; \$collapse_limit,</td></tr>
<tr><td class="h"><a name="930"></a>930</td><td></td><td></td><td></td><td></td><td class="s">               &quot;githubIssues!&quot; =&gt; \$github,</td></tr>
<tr><td class="h"><a name="931"></a>931</td><td></td><td></td><td></td><td></td><td class="s">               &quot;ghurlbot!&quot; =&gt; \$ghurlbot,</td></tr>
<tr><td class="h"><a name="932"></a>932</td><td></td><td></td><td></td><td></td><td class="s">               &quot;minutes=s&quot; =&gt; \$minutes_url);</td></tr>
<tr><td class="h"><a name="933"></a>933</td><td class="c3">1</td><td class="c3"><span title="Avg 1µs">1µs</span></td><td></td><td></td><td class="s">my @month = ('', 'January', 'February', 'March', 'April', 'May', 'June', 'July',</td></tr>
<tr><td class="h"><a name="934"></a>934</td><td></td><td></td><td></td><td></td><td class="s">             'August', 'September', 'October', 'November', 'December');</td></tr>
<tr><td class="h"><a name="935"></a>935</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="936"></a>936</td><td></td><td></td><td></td><td></td><td class="s"># Automatically encode output to stdout and stderr as UTF-8. We do not</td></tr>
<tr><td class="h"><a name="937"></a>937</td><td></td><td></td><td></td><td></td><td class="s"># automatically decode stdin as UTF-8, because the program might</td></tr>
<tr><td class="h"><a name="938"></a>938</td><td></td><td></td><td></td><td></td><td class="s"># occasionally be used on old files that are in Latin-1.</td></tr>
<tr><td class="h"><a name="939"></a>939</td><td></td><td></td><td></td><td></td><td class="s"># guess_encoding() below detects that case.</td></tr>
<tr><td class="h"><a name="940"></a>940</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="941"></a>941</td><td class="c3">1</td><td class="c1"><span title="Avg 4µs">4µs</span></td><td class="c3">1</td><td class="c3">2µs</td><td class="s">binmode(STDOUT, ':utf8');<div class="calls"><div class="calls_out"># spent     2µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_binmode">main::CORE:binmode</a></div></div></td></tr>
<tr><td class="h"><a name="942"></a>942</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td class="c3">1</td><td class="c3">700ns</td><td class="s">binmode(STDERR, ':utf8');<div class="calls"><div class="calls_out"># spent   700ns making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_binmode">main::CORE:binmode</a></div></div></td></tr>
<tr><td class="h"><a name="943"></a>943</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="944"></a>944</td><td class="c3">1</td><td class="c3"><span title="Avg 500ns">500ns</span></td><td></td><td></td><td class="s">GetOptionsFromString($ENV{&quot;SCRIBEOPTIONS&quot;}, %options) if $ENV{&quot;SCRIBEOPTIONS&quot;};</td></tr>
<tr><td class="h"><a name="945"></a>945</td><td class="c3">1</td><td class="c2"><span title="Avg 4µs">4µs</span></td><td class="c3">1</td><td class="c3">3µs</td><td class="s">GetOptions(%options) or pod2usage(2);<div class="calls"><div class="calls_out"># spent     3µs making 1 call to <a href="Getopt-Long-pm-3-line.html#266">Getopt::Long::GetOptions</a></div></div></td></tr>
<tr><td class="h"><a name="946"></a>946</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="947"></a>947</td><td></td><td></td><td></td><td></td><td class="s"># Step 1: Read all lines into a temporary array; replace tabs by</td></tr>
<tr><td class="h"><a name="948"></a>948</td><td></td><td></td><td></td><td></td><td class="s"># spaces and remove carriage returns and newlines; then try each</td></tr>
<tr><td class="h"><a name="949"></a>949</td><td></td><td></td><td></td><td></td><td class="s"># parser in turn to parse them into records, until one succeeds.</td></tr>
<tr><td class="h"><a name="950"></a>950</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="951"></a>951</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">do {</td></tr>
<tr><td class="h"><a name="952"></a>952</td><td class="c3">1</td><td class="c3"><span title="Avg 1µs">1µs</span></td><td></td><td></td><td class="s">  local $/;</td></tr>
<tr><td class="h"><a name="953"></a>953</td><td class="c3">1</td><td class="c0"><span title="Avg 58µs">58µs</span></td><td class="c3">1</td><td class="c2">55µs</td><td class="s">  my $input = &lt;&gt;;<div class="calls"><div class="calls_out">  # spent    55µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_readline">main::CORE:readline</a></div></div></td></tr>
<tr><td class="h"><a name="954"></a>954</td><td></td><td></td><td></td><td></td><td class="s">  # Try to guess the encoding: ASCII, UTF-8/16/32 or Latin-1.</td></tr>
<tr><td class="h"><a name="955"></a>955</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td class="c3">1</td><td class="c0">2.10ms</td><td class="s">  my $decoder = guess_encoding($input, 'latin-1');<div class="calls"><div class="calls_out">  # spent  2.10ms making 1 call to <a href="Encode-Guess-pm-65-line.html#62">Encode::Guess::guess_encoding</a></div></div></td></tr>
<tr><td class="h"><a name="956"></a>956</td><td></td><td></td><td></td><td></td><td class="s">  # Decode the input. If not known or ambiguous, try UTF-8.</td></tr>
<tr><td class="h"><a name="957"></a>957</td><td class="c3">1</td><td class="c0"><span title="Avg 97µs">97µs</span></td><td class="c3">1</td><td class="c0">94µs</td><td class="s">  $input = ref($decoder) ? $decoder-&gt;decode($input) : decode('UTF-8', $input);<div class="calls"><div class="calls_out">  # spent    94µs making 1 call to <a href="Encode-pm-23-line.html#Encode__XS__decode">Encode::XS::decode</a></div></div></td></tr>
<tr><td class="h"><a name="958"></a>958</td><td></td><td></td><td></td><td></td><td class="s">  # Split into lines, remove newlines, replace tabs by spaces.</td></tr>
<tr><td class="h"><a name="959"></a>959</td><td class="c3">1</td><td class="c0"><span title="Avg 246µs">246µs</span></td><td></td><td></td><td class="s">  my @input = map tr/\t/ /r, split(/\r?\n/, $input);</td></tr>
<tr><td class="h"><a name="960"></a>960</td><td class="c3">1</td><td class="c1"><span title="Avg 4µs">4µs</span></td><td class="c3">1</td><td class="c3">1µs</td><td class="s">  $input[0] =~ s/^\x{FEFF}// if scalar @input; # Remove the BOM, if any<div class="calls"><div class="calls_out">  # spent     1µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a></div></div></td></tr>
<tr><td class="h"><a name="961"></a>961</td><td class="c3">1</td><td class="c3"><span title="Avg 1µs">1µs</span></td><td></td><td></td><td class="s">  my ($nlines, $errline, $n, $e) = (0, '', 0, '');</td></tr>
<tr><td class="h"><a name="962"></a>962</td><td></td><td></td><td></td><td></td><td class="s">  do {</td></tr>
<tr><td class="h"><a name="963"></a>963</td><td class="c3">1</td><td class="c2"><span title="Avg 4µs">4µs</span></td><td class="c3">1</td><td class="c0">722µs</td><td class="s">    last if &amp;$_(\@input, \@records, \$n, \$e);<div class="calls"><div class="calls_out">    # spent   722µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#217">main::RRSAgent_text_format</a></div></div></td></tr>
<tr><td class="h"><a name="964"></a>964</td><td></td><td></td><td></td><td></td><td class="s">    ($nlines, $errline) = ($n, $e) if $n &gt; $nlines;</td></tr>
<tr><td class="h"><a name="965"></a>965</td><td></td><td></td><td></td><td></td><td class="s">    @records = ();</td></tr>
<tr><td class="h"><a name="966"></a>966</td><td class="c3">1</td><td class="c3"><span title="Avg 700ns">700ns</span></td><td></td><td></td><td class="s">  } foreach (@parsers);</td></tr>
<tr><td class="h"><a name="967"></a>967</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">  push(@diagnostics, 'Input is empty.') if !@records &amp;&amp; !$nlines;</td></tr>
<tr><td class="h"><a name="968"></a>968</td><td class="c3">1</td><td class="c0"><span title="Avg 9µs">9µs</span></td><td></td><td></td><td class="s">  push(@diagnostics, &quot;Unrecognized input at line $nlines: $errline&quot;)</td></tr>
<tr><td class="h"><a name="969"></a>969</td><td></td><td></td><td></td><td></td><td class="s">      if !@records &amp;&amp; $nlines;</td></tr>
<tr><td class="h"><a name="970"></a>970</td><td></td><td></td><td></td><td></td><td class="s">};</td></tr>
<tr><td class="h"><a name="971"></a>971</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="972"></a>972</td><td></td><td></td><td></td><td></td><td class="s"># Step 2: Process s/old/new/ and i/where/what/ commands.</td></tr>
<tr><td class="h"><a name="973"></a>973</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="974"></a>974</td><td></td><td></td><td></td><td></td><td class="s"># First mark all s/// and i/// lines as 'c', so that they don't get</td></tr>
<tr><td class="h"><a name="975"></a>975</td><td></td><td></td><td></td><td></td><td class="s"># changed by other s/// lines. Then loop over all lines again and</td></tr>
<tr><td class="h"><a name="976"></a>976</td><td></td><td></td><td></td><td></td><td class="s"># apply the substitutions and insertions. Successful s/// and i///</td></tr>
<tr><td class="h"><a name="977"></a>977</td><td></td><td></td><td></td><td></td><td class="s"># become of type 'o' (omit).</td></tr>
<tr><td class="h"><a name="978"></a>978</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="979"></a>979</td><td></td><td></td><td></td><td></td><td class="s"># If people try to use s/// to replace URLs and they copy-paste the</td></tr>
<tr><td class="h"><a name="980"></a>980</td><td></td><td></td><td></td><td></td><td class="s"># URLs from certain old minutes, there might be zero-width non-joiner</td></tr>
<tr><td class="h"><a name="981"></a>981</td><td></td><td></td><td></td><td></td><td class="s"># characters in the URLs. Remove them before matching.</td></tr>
<tr><td class="h"><a name="982"></a>982</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="983"></a>983</td><td class="c3">1</td><td class="c3"><span title="Avg 600ns">600ns</span></td><td></td><td></td><td class="s">foreach (@records) {</td></tr>
<tr><td class="h"><a name="984"></a>984</td><td></td><td></td><td></td><td></td><td class="s">  $_-&gt;{type} = 'c' if</td></tr>
<tr><td class="h"><a name="985"></a>985</td><td class="c0">202</td><td class="c0"><span title="Avg 974ns">197µs</span></td><td class="c0">202</td><td class="c1">76µs</td><td class="s">      $_-&gt;{text} =~ /^ *(s|i)(\/|\|)(.*?)\2(.*?)(?:\2([gG])? *)?$/;<div class="calls"><div class="calls_out">      # spent    76µs making 202 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 378ns/call</div></div></td></tr>
<tr><td class="h"><a name="986"></a>986</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="987"></a>987</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="988"></a>988</td><td class="c3">1</td><td class="c0"><span title="Avg 27µs">27µs</span></td><td></td><td></td><td class="s">for (my $i = 0; $i &lt; @records; $i++) {</td></tr>
<tr><td class="h"><a name="989"></a>989</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="990"></a>990</td><td class="c0">202</td><td class="c0"><span title="Avg 236ns">48µs</span></td><td class="c0">4</td><td class="c3">16µs</td><td class="s">  if ($records[$i]-&gt;{type} eq 'c' &amp;&amp;<div class="calls"><div class="calls_out">  # spent    16µs making 4 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 4µs/call</div></div></td></tr>
<tr><td class="h"><a name="991"></a>991</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{text} =~ /^ *(s|i)(\/|\|)(.*?)\2(.*?)(?:\2([gG])? *)?$/) {</td></tr>
<tr><td class="h"><a name="992"></a>992</td><td class="c0">4</td><td class="c1"><span title="Avg 1µs">5µs</span></td><td></td><td></td><td class="s">    my ($cmd, $delim, $old, $new, $global) = ($1, $2, $3, $4, $5);</td></tr>
<tr><td class="h"><a name="993"></a>993</td><td class="c0">4</td><td class="c1"><span title="Avg 1µs">5µs</span></td><td class="c0">4</td><td class="c3">1µs</td><td class="s">    my $old2 = $old =~ s/\x{200C}//gr;                # Version without any U+200C<div class="calls"><div class="calls_out">    # spent     1µs making 4 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 350ns/call</div></div></td></tr>
<tr><td class="h"><a name="994"></a>994</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="995"></a>995</td><td class="c0">4</td><td class="c0"><span title="Avg 7µs">26µs</span></td><td class="c0">8</td><td class="c3">18µs</td><td class="s">    push(@diagnostics, &quot;Warning: ‘$records[$i]-&gt;{text}’ interpreted as replacing ‘$old’ by ‘$new’&quot;)<div class="calls"><div class="calls_out">    # spent    18µs making 4 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_regcomp">main::CORE:regcomp</a>, avg 4µs/call
    # spent   800ns making 4 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 200ns/call</div></div></td></tr>
<tr><td class="h"><a name="996"></a>996</td><td></td><td></td><td></td><td></td><td class="s">        if $cmd eq 's' &amp;&amp; $new =~ /\Q$delim\E/;</td></tr>
<tr><td class="h"><a name="997"></a>997</td><td class="c0">4</td><td class="c3"><span title="Avg 175ns">700ns</span></td><td></td><td></td><td class="s">    push(@diagnostics, &quot;Warning: ‘$records[$i]-&gt;{text}’ interpreted as inserting ‘$new’ before ‘$old’&quot;)</td></tr>
<tr><td class="h"><a name="998"></a>998</td><td></td><td></td><td></td><td></td><td class="s">        if $cmd eq 'i' &amp;&amp; $new =~ /\Q$delim\E/;</td></tr>
<tr><td class="h"><a name="999"></a>999</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1000"></a>1000</td><td class="c0">4</td><td class="c3"><span title="Avg 500ns">2µs</span></td><td></td><td></td><td class="s">    if ($cmd eq 'i') {                                # i/where/what/</td></tr>
<tr><td class="h"><a name="1001"></a>1001</td><td></td><td></td><td></td><td></td><td class="s">      my $j = $i - 1;</td></tr>
<tr><td class="h"><a name="1002"></a>1002</td><td></td><td></td><td></td><td></td><td class="s">      $j-- until $j &lt; 0 || ($records[$j]-&gt;{type} eq 'i' &amp;&amp;</td></tr>
<tr><td class="h"><a name="1003"></a>1003</td><td></td><td></td><td></td><td></td><td class="s">                            ($records[$j]-&gt;{text} =~ /\Q$old\E/ ||</td></tr>
<tr><td class="h"><a name="1004"></a>1004</td><td></td><td></td><td></td><td></td><td class="s">                             $records[$j]-&gt;{text} =~ /\Q$old2\E/));</td></tr>
<tr><td class="h"><a name="1005"></a>1005</td><td></td><td></td><td></td><td></td><td class="s">      if ($j &gt;= 0) {</td></tr>
<tr><td class="h"><a name="1006"></a>1006</td><td></td><td></td><td></td><td></td><td class="s">        splice(@records, $j, 0,</td></tr>
<tr><td class="h"><a name="1007"></a>1007</td><td></td><td></td><td></td><td></td><td class="s">               {type=&gt;'i',speaker=&gt;$records[$i]-&gt;{speaker},text=&gt;$new});</td></tr>
<tr><td class="h"><a name="1008"></a>1008</td><td></td><td></td><td></td><td></td><td class="s">        $i++;                        # All records shifted by the splice</td></tr>
<tr><td class="h"><a name="1009"></a>1009</td><td></td><td></td><td></td><td></td><td class="s">        $records[$i]-&gt;{type} = 'o';</td></tr>
<tr><td class="h"><a name="1010"></a>1010</td><td></td><td></td><td></td><td></td><td class="s">        push(@diagnostics, 'Succeeded: ' . $records[$i]-&gt;{text});</td></tr>
<tr><td class="h"><a name="1011"></a>1011</td><td></td><td></td><td></td><td></td><td class="s">      } else {</td></tr>
<tr><td class="h"><a name="1012"></a>1012</td><td></td><td></td><td></td><td></td><td class="s">        push(@diagnostics, 'Failed: ' . $records[$i]-&gt;{text});</td></tr>
<tr><td class="h"><a name="1013"></a>1013</td><td></td><td></td><td></td><td></td><td class="s">      }</td></tr>
<tr><td class="h"><a name="1014"></a>1014</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1015"></a>1015</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (! defined $global) {                # s/old/new/</td></tr>
<tr><td class="h"><a name="1016"></a>1016</td><td class="c0">4</td><td class="c3"><span title="Avg 325ns">1µs</span></td><td></td><td></td><td class="s">      my $j = $i - 1;</td></tr>
<tr><td class="h"><a name="1017"></a>1017</td><td></td><td></td><td></td><td></td><td class="s">      $j-- until $j &lt; 0 || ($records[$j]-&gt;{type} eq 'i' &amp;&amp;</td></tr>
<tr><td class="h"><a name="1018"></a>1018</td><td></td><td></td><td></td><td></td><td class="s">                            ($records[$j]-&gt;{text} =~ s/\Q$old\E/$new/ ||</td></tr>
<tr><td class="h"><a name="1019"></a>1019</td><td class="c0">4</td><td class="c0"><span title="Avg 811µs">3.25ms</span></td><td class="c0">780</td><td class="c0">210µs</td><td class="s">                             $records[$j]-&gt;{text} =~ s/\Q$old2\E/$new/));<div class="calls"><div class="calls_out">                             # spent   148µs making 386 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 385ns/call
                             # spent    56µs making 386 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_regcomp">main::CORE:regcomp</a>, avg 146ns/call
                             # spent     4µs making   8 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_substcont">main::CORE:substcont</a>, avg 562ns/call</div></div></td></tr>
<tr><td class="h"><a name="1020"></a>1020</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1021"></a>1021</td><td></td><td></td><td></td><td></td><td class="s">      push(@diagnostics,</td></tr>
<tr><td class="h"><a name="1022"></a>1022</td><td class="c0">4</td><td class="c1"><span title="Avg 1µs">4µs</span></td><td></td><td></td><td class="s">           ($j &gt;= 0 ? 'Succeeded: ' : 'Failed: ') . $records[$i]-&gt;{text});</td></tr>
<tr><td class="h"><a name="1023"></a>1023</td><td class="c0">4</td><td class="c3"><span title="Avg 400ns">2µs</span></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'o' if $j &gt;= 0; # Omit successful command</td></tr>
<tr><td class="h"><a name="1024"></a>1024</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1025"></a>1025</td><td></td><td></td><td></td><td></td><td class="s">    } else {                                        # s/old/new/g or .../G</td></tr>
<tr><td class="h"><a name="1026"></a>1026</td><td></td><td></td><td></td><td></td><td class="s">      my $n = 0;</td></tr>
<tr><td class="h"><a name="1027"></a>1027</td><td></td><td></td><td></td><td></td><td class="s">      for (0 .. ($global eq 'g' ? $i-1 : @records-1)) {</td></tr>
<tr><td class="h"><a name="1028"></a>1028</td><td></td><td></td><td></td><td></td><td class="s">        $n++ if $records[$_]-&gt;{type} eq 'i' &amp;&amp;</td></tr>
<tr><td class="h"><a name="1029"></a>1029</td><td></td><td></td><td></td><td></td><td class="s">            ($records[$_]-&gt;{text} =~ s/\Q$old\E/$new/ ||</td></tr>
<tr><td class="h"><a name="1030"></a>1030</td><td></td><td></td><td></td><td></td><td class="s">             $records[$_]-&gt;{text} =~ s/\Q$old2\E/$new/);</td></tr>
<tr><td class="h"><a name="1031"></a>1031</td><td></td><td></td><td></td><td></td><td class="s">      }</td></tr>
<tr><td class="h"><a name="1032"></a>1032</td><td></td><td></td><td></td><td></td><td class="s">      push(@diagnostics,</td></tr>
<tr><td class="h"><a name="1033"></a>1033</td><td></td><td></td><td></td><td></td><td class="s">           ($n ? &quot;Succeeded $n times: &quot; : &quot;Failed: &quot;) . $records[$i]-&gt;{text});</td></tr>
<tr><td class="h"><a name="1034"></a>1034</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'o' if $n; # Omit successful command</td></tr>
<tr><td class="h"><a name="1035"></a>1035</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1036"></a>1036</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="1037"></a>1037</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1038"></a>1038</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1039"></a>1039</td><td></td><td></td><td></td><td></td><td class="s"># Step 3: Search for scribeOptions, as they may affect the whole log.</td></tr>
<tr><td class="h"><a name="1040"></a>1040</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1041"></a>1041</td><td class="c3">1</td><td class="c3"><span title="Avg 600ns">600ns</span></td><td></td><td></td><td class="s">foreach my $p (@records) {</td></tr>
<tr><td class="h"><a name="1042"></a>1042</td><td class="c0">202</td><td class="c0"><span title="Avg 793ns">160µs</span></td><td class="c0">202</td><td class="c3">37µs</td><td class="s">  if ($p-&gt;{text} =~ /^ *scribeoptions *: *(.*?) *$/i) {<div class="calls"><div class="calls_out">  # spent    37µs making 202 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 182ns/call</div></div></td></tr>
<tr><td class="h"><a name="1043"></a>1043</td><td></td><td></td><td></td><td></td><td class="s">    Getopt::Long::Configure(&quot;pass_through&quot;);</td></tr>
<tr><td class="h"><a name="1044"></a>1044</td><td></td><td></td><td></td><td></td><td class="s">    my ($ret, $args) = GetOptionsFromString($1, %options);</td></tr>
<tr><td class="h"><a name="1045"></a>1045</td><td></td><td></td><td></td><td></td><td class="s">    push(@diagnostics, 'Unknown option in scribeoptions: ' . join(' ', @$args))</td></tr>
<tr><td class="h"><a name="1046"></a>1046</td><td></td><td></td><td></td><td></td><td class="s">        if scalar @$args;</td></tr>
<tr><td class="h"><a name="1047"></a>1047</td><td></td><td></td><td></td><td></td><td class="s">    $p-&gt;{type} = 'o';                        # Omit line from output</td></tr>
<tr><td class="h"><a name="1048"></a>1048</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="1049"></a>1049</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1050"></a>1050</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1051"></a>1051</td><td></td><td></td><td></td><td></td><td class="s"># Step 4: Find the initial scribe(s).</td></tr>
<tr><td class="h"><a name="1052"></a>1052</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1053"></a>1053</td><td></td><td></td><td></td><td></td><td class="s"># The first scribe/scribenick command is also assumed to apply to the</td></tr>
<tr><td class="h"><a name="1054"></a>1054</td><td></td><td></td><td></td><td></td><td class="s"># lines that come before it, so search for that first command (unless</td></tr>
<tr><td class="h"><a name="1055"></a>1055</td><td></td><td></td><td></td><td></td><td class="s"># --scribenick was given on the command line). If no command is found,</td></tr>
<tr><td class="h"><a name="1056"></a>1056</td><td></td><td></td><td></td><td></td><td class="s"># assume the person who typed most was the scribe. And if nobody typed</td></tr>
<tr><td class="h"><a name="1057"></a>1057</td><td></td><td></td><td></td><td></td><td class="s"># anything, set the scribe to '*'.</td></tr>
<tr><td class="h"><a name="1058"></a>1058</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1059"></a>1059</td><td></td><td></td><td></td><td></td><td class="s"># The hash %count is also used further down to print the list of</td></tr>
<tr><td class="h"><a name="1060"></a>1060</td><td></td><td></td><td></td><td></td><td class="s"># people who were active on IRC in the diagnostics.</td></tr>
<tr><td class="h"><a name="1061"></a>1061</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1062"></a>1062</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">my %count;</td></tr>
<tr><td class="h"><a name="1063"></a>1063</td><td class="c3">1</td><td class="c3"><span title="Avg 600ns">600ns</span></td><td></td><td></td><td class="s">foreach (@records) {</td></tr>
<tr><td class="h"><a name="1064"></a>1064</td><td class="c0">202</td><td class="c0"><span title="Avg 583ns">118µs</span></td><td></td><td></td><td class="s">  $count{$_-&gt;{speaker}}++ if $_-&gt;{type} eq 'i' &amp;&amp; !$bots{fc($_-&gt;{speaker})};</td></tr>
<tr><td class="h"><a name="1065"></a>1065</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1066"></a>1066</td><td class="c3">1</td><td class="c1"><span title="Avg 6µs">6µs</span></td><td></td><td></td><td class="s">while (!defined $scribenick &amp;&amp; (my ($i,$p) = each @records)) {</td></tr>
<tr><td class="h"><a name="1067"></a>1067</td><td class="c0">10</td><td class="c0"><span title="Avg 14µs">136µs</span></td><td class="c0">30</td><td class="c0">113µs</td><td class="s">  if ($p-&gt;{text} =~ /^ *scribe(?:nick)? *\+[:：]? *$/i) {<div class="calls"><div class="calls_out">  # spent    97µs making 10 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_regcomp">main::CORE:regcomp</a>, avg 10µs/call
  # spent    16µs making 20 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 810ns/call</div></div></td></tr>
<tr><td class="h"><a name="1068"></a>1068</td><td></td><td></td><td></td><td></td><td class="s">    $scribenick = $p-&gt;{speaker};</td></tr>
<tr><td class="h"><a name="1069"></a>1069</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($p-&gt;{text} =~ /^ *scribe(?:nick)? *(?:[:：]|\+[:：]?) *($scribepat(?:, *$scribepat)*)$/i) {</td></tr>
<tr><td class="h"><a name="1070"></a>1070</td><td></td><td></td><td></td><td></td><td class="s">    $scribenick = $1;</td></tr>
<tr><td class="h"><a name="1071"></a>1071</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="1072"></a>1072</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1073"></a>1073</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">if (!defined $scribenick) {</td></tr>
<tr><td class="h"><a name="1074"></a>1074</td><td></td><td></td><td></td><td></td><td class="s">  $scribenick = (sort {$count{$b} &lt;=&gt; $count{$a}} sort keys %count)[0];</td></tr>
<tr><td class="h"><a name="1075"></a>1075</td><td></td><td></td><td></td><td></td><td class="s">  # If still undef, it means there are no lines at all...</td></tr>
<tr><td class="h"><a name="1076"></a>1076</td><td></td><td></td><td></td><td></td><td class="s">  $scribenick = '*' if !defined $scribenick;</td></tr>
<tr><td class="h"><a name="1077"></a>1077</td><td></td><td></td><td></td><td></td><td class="s">  push(@diagnostics, &quot;No scribenick or scribe found. Guessed: $scribenick&quot;);</td></tr>
<tr><td class="h"><a name="1078"></a>1078</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1079"></a>1079</td><td class="c3">1</td><td class="c1"><span title="Avg 5µs">5µs</span></td><td class="c3">1</td><td class="c3">46µs</td><td class="s">add_scribes($scribenick, \%curscribes, \@scribes, \%scribenames);<div class="calls"><div class="calls_out"># spent    46µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#750">main::add_scribes</a></div></div></td></tr>
<tr><td class="h"><a name="1080"></a>1080</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1081"></a>1081</td><td></td><td></td><td></td><td></td><td class="s"># Step 5: Interpret each record, collect topics, actions, etc.</td></tr>
<tr><td class="h"><a name="1082"></a>1082</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1083"></a>1083</td><td></td><td></td><td></td><td></td><td class="s"># Interpret each line. %curscribes is the current set of scribes in lowercase.</td></tr>
<tr><td class="h"><a name="1084"></a>1084</td><td></td><td></td><td></td><td></td><td class="s"># $lastspeaker is the current speaker, for use in continuation lines.</td></tr>
<tr><td class="h"><a name="1085"></a>1085</td><td></td><td></td><td></td><td></td><td class="s"># $lastspeaker is set to foo whenever the scribe writes &quot;foo: ...&quot;.</td></tr>
<tr><td class="h"><a name="1086"></a>1086</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1087"></a>1087</td><td class="c3">1</td><td class="c0"><span title="Avg 65µs">65µs</span></td><td></td><td></td><td class="s">for (my $i = 0; $i &lt; @records; $i++) {</td></tr>
<tr><td class="h"><a name="1088"></a>1088</td><td class="c0">202</td><td class="c0"><span title="Avg 794ns">160µs</span></td><td class="c0">202</td><td class="c0">424µs</td><td class="s">  my $is_scribe = is_cur_scribe($records[$i]-&gt;{speaker}, \%curscribes);<div class="calls"><div class="calls_out">  # spent   424µs making 202 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#741">main::is_cur_scribe</a>, avg 2µs/call</div></div></td></tr>
<tr><td class="h"><a name="1089"></a>1089</td><td class="c0">202</td><td class="c0"><span title="Avg 235ns">47µs</span></td><td></td><td></td><td class="s">  $_ = $records[$i]-&gt;{text};</td></tr>
<tr><td class="h"><a name="1090"></a>1090</td><td class="c0">202</td><td class="c0"><span title="Avg 766ns">155µs</span></td><td class="c0">202</td><td class="c0">2.81ms</td><td class="s">  $records[$i]-&gt;{id} = make_id($_);<div class="calls"><div class="calls_out">  # spent  2.81ms making 202 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#843">main::make_id</a>, avg 14µs/call</div></div></td></tr>
<tr><td class="h"><a name="1091"></a>1091</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1092"></a>1092</td><td class="c0">202</td><td class="c0"><span title="Avg 92µs">18.7ms</span></td><td class="c0">13475</td><td class="c0">7.05ms</td><td class="s">  if ($records[$i]-&gt;{type} eq 'o') {<div class="calls"><div class="calls_out">  # spent  5.36ms making 12065 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 445ns/call
  # spent  1.68ms making  1410 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_regcomp">main::CORE:regcomp</a>, avg 1µs/call</div></div></td></tr>
<tr><td class="h"><a name="1093"></a>1093</td><td></td><td></td><td></td><td></td><td class="s">    # This record was already processed</td></tr>
<tr><td class="h"><a name="1094"></a>1094</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1095"></a>1095</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *$/) {</td></tr>
<tr><td class="h"><a name="1096"></a>1096</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit empty line</td></tr>
<tr><td class="h"><a name="1097"></a>1097</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1098"></a>1098</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *(```|\[\[) *$/ &amp;&amp;        # Start preformatted text</td></tr>
<tr><td class="h"><a name="1099"></a>1099</td><td></td><td></td><td></td><td></td><td class="s">      !exists $verbatim{$records[$i]-&gt;{speaker}}) {</td></tr>
<tr><td class="h"><a name="1100"></a>1100</td><td></td><td></td><td></td><td></td><td class="s">    $verbatim{$records[$i]-&gt;{speaker}} = $1 eq &quot;```&quot; ? &quot;```&quot; : &quot;]]&quot;;</td></tr>
<tr><td class="h"><a name="1101"></a>1101</td><td></td><td></td><td></td><td></td><td class="s">    if ($is_scribe) {</td></tr>
<tr><td class="h"><a name="1102"></a>1102</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{text} = &quot;&quot;;        # Next lines will be appended</td></tr>
<tr><td class="h"><a name="1103"></a>1103</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'D';        # Preformatted text by scribe</td></tr>
<tr><td class="h"><a name="1104"></a>1104</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="1105"></a>1105</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'o';        # Omit this record</td></tr>
<tr><td class="h"><a name="1106"></a>1106</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1107"></a>1107</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1108"></a>1108</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/ *(```|\]\]) *$/ &amp;&amp;                # End of preformatted text</td></tr>
<tr><td class="h"><a name="1109"></a>1109</td><td></td><td></td><td></td><td></td><td class="s">      ($verbatim{$records[$i]-&gt;{speaker}} // &quot;&quot;) eq $1) {</td></tr>
<tr><td class="h"><a name="1110"></a>1110</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                        # Omit this record</td></tr>
<tr><td class="h"><a name="1111"></a>1111</td><td></td><td></td><td></td><td></td><td class="s">    delete $verbatim{$records[$i]-&gt;{speaker}};        # Remove verbatim mode</td></tr>
<tr><td class="h"><a name="1112"></a>1112</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1113"></a>1113</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (exists $verbatim{$records[$i]-&gt;{speaker}}) { # Preformatted text</td></tr>
<tr><td class="h"><a name="1114"></a>1114</td><td></td><td></td><td></td><td></td><td class="s">    if ($is_scribe) {</td></tr>
<tr><td class="h"><a name="1115"></a>1115</td><td></td><td></td><td></td><td></td><td class="s">      # Scribe's verbatim text is collected into a single record</td></tr>
<tr><td class="h"><a name="1116"></a>1116</td><td></td><td></td><td></td><td></td><td class="s">      my $j = $i - 1;</td></tr>
<tr><td class="h"><a name="1117"></a>1117</td><td></td><td></td><td></td><td></td><td class="s">      $j-- while $records[$j]-&gt;{type} eq 'o' ||</td></tr>
<tr><td class="h"><a name="1118"></a>1118</td><td></td><td></td><td></td><td></td><td class="s">          $records[$j]-&gt;{speaker} ne $records[$i]-&gt;{speaker};</td></tr>
<tr><td class="h"><a name="1119"></a>1119</td><td></td><td></td><td></td><td></td><td class="s">      $records[$j]-&gt;{text} .= $records[$i]-&gt;{text} . &quot;\n&quot;; # Append to 1st line</td></tr>
<tr><td class="h"><a name="1120"></a>1120</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'o';                           # Omit this record</td></tr>
<tr><td class="h"><a name="1121"></a>1121</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="1122"></a>1122</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'I';                # Mark as preformatted line</td></tr>
<tr><td class="h"><a name="1123"></a>1123</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1124"></a>1124</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1125"></a>1125</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *present *[:：=] *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1126"></a>1126</td><td></td><td></td><td></td><td></td><td class="s">    if ($records[$i]-&gt;{speaker} eq 'Zakim' &amp;&amp; !$use_zakim) {} # Ignore Zakim?</td></tr>
<tr><td class="h"><a name="1127"></a>1127</td><td></td><td></td><td></td><td></td><td class="s">    elsif ($1 eq '(no one)') {%present = ()}</td></tr>
<tr><td class="h"><a name="1128"></a>1128</td><td></td><td></td><td></td><td></td><td class="s">    else {%present = map {fc($_) =&gt; $_} split(/ *, */, $1)}</td></tr>
<tr><td class="h"><a name="1129"></a>1129</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1130"></a>1130</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1131"></a>1131</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *present *\+[:：]? *$/i) {</td></tr>
<tr><td class="h"><a name="1132"></a>1132</td><td class="c3">1</td><td class="c3"><span title="Avg 1µs">1µs</span></td><td></td><td></td><td class="s">    $present{fc $records[$i]-&gt;{speaker}} = $records[$i]-&gt;{speaker};</td></tr>
<tr><td class="h"><a name="1133"></a>1133</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1134"></a>1134</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1135"></a>1135</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *present *\+[:：]? *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1136"></a>1136</td><td class="c0">16</td><td class="c0"><span title="Avg 2µs">25µs</span></td><td></td><td></td><td class="s">    $present{fc $_} = $_ foreach split(/ *, */, $1);</td></tr>
<tr><td class="h"><a name="1137"></a>1137</td><td class="c0">16</td><td class="c2"><span title="Avg 231ns">4µs</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1138"></a>1138</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1139"></a>1139</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *present *-[:：]? *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1140"></a>1140</td><td></td><td></td><td></td><td></td><td class="s">    delete $present{fc $_} foreach split(/ *, */, $1);</td></tr>
<tr><td class="h"><a name="1141"></a>1141</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1142"></a>1142</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1143"></a>1143</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *regrets? *[:：] *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1144"></a>1144</td><td></td><td></td><td></td><td></td><td class="s">    %regrets = map { fc($_) =&gt; $_ } split(/ *, */, $1);</td></tr>
<tr><td class="h"><a name="1145"></a>1145</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1146"></a>1146</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1147"></a>1147</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *regrets? *\+[:：]? *$/i) {</td></tr>
<tr><td class="h"><a name="1148"></a>1148</td><td></td><td></td><td></td><td></td><td class="s">    $regrets{fc $records[$i]-&gt;{speaker}} = $records[$i]-&gt;{speaker};</td></tr>
<tr><td class="h"><a name="1149"></a>1149</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1150"></a>1150</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1151"></a>1151</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *regrets? *\+[:：]? *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1152"></a>1152</td><td></td><td></td><td></td><td></td><td class="s">    $regrets{fc $_} = $_ foreach split(/ *, */, $1);</td></tr>
<tr><td class="h"><a name="1153"></a>1153</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1154"></a>1154</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1155"></a>1155</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *regrets? *-[:：]? *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1156"></a>1156</td><td></td><td></td><td></td><td></td><td class="s">    delete $regrets{fc $_} foreach split(/ *, */, $1);</td></tr>
<tr><td class="h"><a name="1157"></a>1157</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1158"></a>1158</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1159"></a>1159</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *repo(?:s|sitory|sitories)? *(?:[:：]|\+[:：]?) *(.*?) *$/i ||</td></tr>
<tr><td class="h"><a name="1160"></a>1160</td><td></td><td></td><td></td><td></td><td class="s">      /^ *(?:ghurlbot|gb) *, *(?:discuss(?:ing)?|use|using|take +up|taking +up|this +(?:will +be|is)) +(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1161"></a>1161</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'repo';        # Mark as repository line</td></tr>
<tr><td class="h"><a name="1162"></a>1162</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1163"></a>1163</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1164"></a>1164</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *repo(?:s|sitory|sitories)? *-[:：]? *([^ ].*)$/i ||</td></tr>
<tr><td class="h"><a name="1165"></a>1165</td><td></td><td></td><td></td><td></td><td class="s">    /^ *(?:ghurlbot|gb) *, *(?:forget|drop|remove|don't +use|do +not +use) +([^ ].*)$/i) {</td></tr>
<tr><td class="h"><a name="1166"></a>1166</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'drop';        # Mark as drop-repository line</td></tr>
<tr><td class="h"><a name="1167"></a>1167</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1168"></a>1168</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1169"></a>1169</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *slides(?:et)? *[:：] *(.*?($urlpat).*)$/i) {</td></tr>
<tr><td class="h"><a name="1170"></a>1170</td><td class="c3">1</td><td class="c3"><span title="Avg 500ns">500ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'slideset';        # Mark as slideset line</td></tr>
<tr><td class="h"><a name="1171"></a>1171</td><td class="c3">1</td><td class="c3"><span title="Avg 700ns">700ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1172"></a>1172</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">    $lastslideset = $2;</td></tr>
<tr><td class="h"><a name="1173"></a>1173</td><td class="c3">1</td><td class="c3"><span title="Avg 500ns">500ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{archive} = &quot;&quot;;</td></tr>
<tr><td class="h"><a name="1174"></a>1174</td><td></td><td></td><td></td><td></td><td class="s">    # For Google slides, we download a PDF export of the slideset</td></tr>
<tr><td class="h"><a name="1175"></a>1175</td><td></td><td></td><td></td><td></td><td class="s">    # and store it as base64 data URL</td></tr>
<tr><td class="h"><a name="1176"></a>1176</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td class="c3">1</td><td class="c3">1µs</td><td class="s">    if ($lastslideset =~ /https:\/\/docs\.google\.com\/presentation\/d\/[^\/]+\//) {<div class="calls"><div class="calls_out">    # spent     1µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a></div></div></td></tr>
<tr><td class="h"><a name="1177"></a>1177</td><td></td><td></td><td></td><td></td><td class="s">        my $pdfexport = $lastslideset;</td></tr>
<tr><td class="h"><a name="1178"></a>1178</td><td></td><td></td><td></td><td></td><td class="s">        $pdfexport =~ s/(https:\/\/docs\.google\.com\/presentation\/d\/[^\/]+)\/.*$/$1\/export?format=pdf/;</td></tr>
<tr><td class="h"><a name="1179"></a>1179</td><td></td><td></td><td></td><td></td><td class="s">        my $response = $ua-&gt;get($pdfexport);</td></tr>
<tr><td class="h"><a name="1180"></a>1180</td><td></td><td></td><td></td><td></td><td class="s">        if ($response-&gt;is_success) {</td></tr>
<tr><td class="h"><a name="1181"></a>1181</td><td></td><td></td><td></td><td></td><td class="s">            $embeddedslidesetcounter++;</td></tr>
<tr><td class="h"><a name="1182"></a>1182</td><td></td><td></td><td></td><td></td><td class="s">            $embeddedslideset = &quot;slideset-data-&quot; . $embeddedslidesetcounter;</td></tr>
<tr><td class="h"><a name="1183"></a>1183</td><td></td><td></td><td></td><td></td><td class="s">            $records[$i]-&gt;{archive} = &quot; (&lt;a id='&quot; . $embeddedslideset .&quot;' href='data:application/pdf;base64,&quot; . encode_base64($response-&gt;decoded_content) . &quot;'&gt;archived PDF copy&lt;/a&gt;)&quot;;</td></tr>
<tr><td class="h"><a name="1184"></a>1184</td><td></td><td></td><td></td><td></td><td class="s">        }</td></tr>
<tr><td class="h"><a name="1185"></a>1185</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1186"></a>1186</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">    $has_slides = 1;</td></tr>
<tr><td class="h"><a name="1187"></a>1187</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1188"></a>1188</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *slides(?:et)? *[:：]/i) { # Forget the slideset</td></tr>
<tr><td class="h"><a name="1189"></a>1189</td><td class="c3">1</td><td class="c3"><span title="Avg 600ns">600ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'd' if $is_scribe;</td></tr>
<tr><td class="h"><a name="1190"></a>1190</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">    $lastslideset = undef;</td></tr>
<tr><td class="h"><a name="1191"></a>1191</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">    $embeddedslideset = undef;</td></tr>
<tr><td class="h"><a name="1192"></a>1192</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1193"></a>1193</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *\[ *slide *(\d+) *\] *$/i &amp;&amp; $lastslideset) {</td></tr>
<tr><td class="h"><a name="1194"></a>1194</td><td class="c0">8</td><td class="c3"><span title="Avg 338ns">3µs</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'slide';        # Mark as slide line</td></tr>
<tr><td class="h"><a name="1195"></a>1195</td><td class="c0">8</td><td class="c3"><span title="Avg 338ns">3µs</span></td><td></td><td></td><td class="s">    my $slidenumber = $1;</td></tr>
<tr><td class="h"><a name="1196"></a>1196</td><td></td><td></td><td></td><td></td><td class="s">    # Put ref in {archive}, with fragment #page=n for embedded slideset.</td></tr>
<tr><td class="h"><a name="1197"></a>1197</td><td class="c0">8</td><td class="c3"><span title="Avg 100ns">800ns</span></td><td></td><td></td><td class="s">    if ($embeddedslideset) {</td></tr>
<tr><td class="h"><a name="1198"></a>1198</td><td></td><td></td><td></td><td></td><td class="s">        $records[$i]-&gt;{archive} = $embeddedslideset . &quot;#&quot; . &quot;page=&quot; . $slidenumber;</td></tr>
<tr><td class="h"><a name="1199"></a>1199</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1200"></a>1200</td><td></td><td></td><td></td><td></td><td class="s">    # Put link in {data}, with fragment ID &quot;#n&quot; (or #page=n for PDF URLs).</td></tr>
<tr><td class="h"><a name="1201"></a>1201</td><td class="c0">8</td><td class="c0"><span title="Avg 2µs">14µs</span></td><td class="c0">8</td><td class="c3">4µs</td><td class="s">    $records[$i]-&gt;{data} = $lastslideset . &quot;#&quot; .<div class="calls"><div class="calls_out">    # spent     4µs making 8 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 538ns/call</div></div></td></tr>
<tr><td class="h"><a name="1202"></a>1202</td><td></td><td></td><td></td><td></td><td class="s">        ($lastslideset =~ /\.pdf/ ? &quot;page=&quot; : &quot;&quot;) . $slidenumber;</td></tr>
<tr><td class="h"><a name="1203"></a>1203</td><td class="c0">8</td><td class="c2"><span title="Avg 412ns">3µs</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = &quot;$slidenumber&quot;;</td></tr>
<tr><td class="h"><a name="1204"></a>1204</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1205"></a>1205</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *recording *[:：] *(.*?($urlpat).*)$/i) {</td></tr>
<tr><td class="h"><a name="1206"></a>1206</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1207"></a>1207</td><td></td><td></td><td></td><td></td><td class="s">    $recording_link = esc($1, $emphasis, 1, 1);</td></tr>
<tr><td class="h"><a name="1208"></a>1208</td><td></td><td></td><td></td><td></td><td class="s">    $recording = $2;</td></tr>
<tr><td class="h"><a name="1209"></a>1209</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1210"></a>1210</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *recording *[:：]/i) {        # Recording but without a URL. Error?</td></tr>
<tr><td class="h"><a name="1211"></a>1211</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'd' if $is_scribe;</td></tr>
<tr><td class="h"><a name="1212"></a>1212</td><td></td><td></td><td></td><td></td><td class="s">    $recording = undef;</td></tr>
<tr><td class="h"><a name="1213"></a>1213</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1214"></a>1214</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *recording +(?:is +starting|starts)[. ]*$/i) {</td></tr>
<tr><td class="h"><a name="1215"></a>1215</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1216"></a>1216</td><td></td><td></td><td></td><td></td><td class="s">    $recordingstart = $records[$i]-&gt;{time} if defined $records[$i]-&gt;{time};</td></tr>
<tr><td class="h"><a name="1217"></a>1217</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1218"></a>1218</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *recording +start(?:ed|s) +at +[:：]([0-9][0-9])[. ]*$/i) {</td></tr>
<tr><td class="h"><a name="1219"></a>1219</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1220"></a>1220</td><td></td><td></td><td></td><td></td><td class="s">    $recordingstart = 3600*floor(($records[$i]-&gt;{time} - 60*$1)/3600) + 60*$1</td></tr>
<tr><td class="h"><a name="1221"></a>1221</td><td></td><td></td><td></td><td></td><td class="s">        if defined($records[$i]-&gt;{time});</td></tr>
<tr><td class="h"><a name="1222"></a>1222</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1223"></a>1223</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1224"></a>1224</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *recording +ends[. ]*$/i) {</td></tr>
<tr><td class="h"><a name="1225"></a>1225</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1226"></a>1226</td><td></td><td></td><td></td><td></td><td class="s">    $recordingend = $records[$i]-&gt;{time} if defined $records[$i]-&gt;{time};</td></tr>
<tr><td class="h"><a name="1227"></a>1227</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1228"></a>1228</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *recording +end(?:ed|s) +at +[:：]([0-9][0-9])[. ]*$/i) {</td></tr>
<tr><td class="h"><a name="1229"></a>1229</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1230"></a>1230</td><td></td><td></td><td></td><td></td><td class="s">    $recordingend = 3600*floor(($records[$i]-&gt;{time} - 60*$1)/3600) + 60*$1</td></tr>
<tr><td class="h"><a name="1231"></a>1231</td><td></td><td></td><td></td><td></td><td class="s">        if defined $records[$i]-&gt;{time};</td></tr>
<tr><td class="h"><a name="1232"></a>1232</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1233"></a>1233</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *topic *[:：] *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1234"></a>1234</td><td class="c1">2</td><td class="c3"><span title="Avg 350ns">700ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 't';                # Mark as topic line</td></tr>
<tr><td class="h"><a name="1235"></a>1235</td><td class="c1">2</td><td class="c3"><span title="Avg 400ns">800ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1236"></a>1236</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1237"></a>1237</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *sub-?topic *[:：] *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1238"></a>1238</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'T';                # Mark as subtopic line</td></tr>
<tr><td class="h"><a name="1239"></a>1239</td><td class="c3">1</td><td class="c3"><span title="Avg 500ns">500ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1240"></a>1240</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1241"></a>1241</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($dash_topics &amp;&amp; /^ *-+ *$/) {</td></tr>
<tr><td class="h"><a name="1242"></a>1242</td><td></td><td></td><td></td><td></td><td class="s">    my $topicfound = 0;</td></tr>
<tr><td class="h"><a name="1243"></a>1243</td><td></td><td></td><td></td><td></td><td class="s">    for (my $j = $i + 1; $j &lt; @records; $j++) {</td></tr>
<tr><td class="h"><a name="1244"></a>1244</td><td></td><td></td><td></td><td></td><td class="s">      if ($records[$j]-&gt;{speaker} eq $records[$i]-&gt;{speaker}) {</td></tr>
<tr><td class="h"><a name="1245"></a>1245</td><td></td><td></td><td></td><td></td><td class="s">        $records[$i]-&gt;{type} = 't';</td></tr>
<tr><td class="h"><a name="1246"></a>1246</td><td></td><td></td><td></td><td></td><td class="s">        $records[$i]-&gt;{text} = $records[$j]-&gt;{text} =~ s/^ *(.*?) *$/$1/r;</td></tr>
<tr><td class="h"><a name="1247"></a>1247</td><td></td><td></td><td></td><td></td><td class="s">        $records[$j]-&gt;{type} = 'o';</td></tr>
<tr><td class="h"><a name="1248"></a>1248</td><td></td><td></td><td></td><td></td><td class="s">        $topicfound = 1;</td></tr>
<tr><td class="h"><a name="1249"></a>1249</td><td></td><td></td><td></td><td></td><td class="s">        last;</td></tr>
<tr><td class="h"><a name="1250"></a>1250</td><td></td><td></td><td></td><td></td><td class="s">      }</td></tr>
<tr><td class="h"><a name="1251"></a>1251</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1252"></a>1252</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1253"></a>1253</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} eq 'RRSAgent' &amp;&amp; / to generate ([^ #]+)/) {</td></tr>
<tr><td class="h"><a name="1254"></a>1254</td><td class="c0">4</td><td class="c3"><span title="Avg 325ns">1µs</span></td><td></td><td></td><td class="s">    $minutes_url = $1;</td></tr>
<tr><td class="h"><a name="1255"></a>1255</td><td class="c0">4</td><td class="c3"><span title="Avg 200ns">800ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore this line</td></tr>
<tr><td class="h"><a name="1256"></a>1256</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1257"></a>1257</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} eq 'RRSAgent' &amp;&amp;</td></tr>
<tr><td class="h"><a name="1258"></a>1258</td><td></td><td></td><td></td><td></td><td class="s">           /(?:[Ll]ogging to|recorded in|See) ([^ #]+)/){</td></tr>
<tr><td class="h"><a name="1259"></a>1259</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td></td><td></td><td class="s">    $logging_url = $1;</td></tr>
<tr><td class="h"><a name="1260"></a>1260</td><td class="c3">1</td><td class="c3"><span title="Avg 3µs">3µs</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore this line</td></tr>
<tr><td class="h"><a name="1261"></a>1261</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1262"></a>1262</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *rrsagent,/i) {</td></tr>
<tr><td class="h"><a name="1263"></a>1263</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore this line</td></tr>
<tr><td class="h"><a name="1264"></a>1264</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1265"></a>1265</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} eq 'RRSAgent') {</td></tr>
<tr><td class="h"><a name="1266"></a>1266</td><td></td><td></td><td></td><td></td><td class="s">    # Ignore RRSAgent's list of actions, etc.</td></tr>
<tr><td class="h"><a name="1267"></a>1267</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore this line</td></tr>
<tr><td class="h"><a name="1268"></a>1268</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1269"></a>1269</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *action *[:：] *(.*?) *$/i ||</td></tr>
<tr><td class="h"><a name="1270"></a>1270</td><td></td><td></td><td></td><td></td><td class="s">           /^ *action +(.*?(?: to |[:：]).*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1271"></a>1271</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'a';                # Mark as action line</td></tr>
<tr><td class="h"><a name="1272"></a>1272</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1273"></a>1273</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1274"></a>1274</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *resol(?:ved|ution) *[:：] *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1275"></a>1275</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'r';                # Mark as resolution line</td></tr>
<tr><td class="h"><a name="1276"></a>1276</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1277"></a>1277</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1278"></a>1278</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *issue *[:：] *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1279"></a>1279</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'u';                # Mark as issue line</td></tr>
<tr><td class="h"><a name="1280"></a>1280</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1281"></a>1281</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1282"></a>1282</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *agenda *[:：] *($urlpat) *$/i) {</td></tr>
<tr><td class="h"><a name="1283"></a>1283</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td class="c3">1</td><td class="c3">5µs</td><td class="s">    $agenda = '&lt;a href=&quot;' . esc($1) . &quot;\&quot;&gt;$agenda_icon&lt;/a&gt;\n&quot;;<div class="calls"><div class="calls_out">    # spent     5µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a></div></div></td></tr>
<tr><td class="h"><a name="1284"></a>1284</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1285"></a>1285</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1286"></a>1286</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *agenda *[:：] *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1287"></a>1287</td><td></td><td></td><td></td><td></td><td class="s">    push(@diagnostics, &quot;Found 'Agenda:' not followed by a URL: '$1'.&quot;);</td></tr>
<tr><td class="h"><a name="1288"></a>1288</td><td></td><td></td><td></td><td></td><td class="s">    # $records[$i]-&gt;{type} = 'o';        # Omit line from output</td></tr>
<tr><td class="h"><a name="1289"></a>1289</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1290"></a>1290</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *meeting *[:：] *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1291"></a>1291</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td class="c3">1</td><td class="c3">10µs</td><td class="s">    $meeting = esc($1);<div class="calls"><div class="calls_out">    # spent    10µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a></div></div></td></tr>
<tr><td class="h"><a name="1292"></a>1292</td><td class="c3">1</td><td class="c3"><span title="Avg 600ns">600ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1293"></a>1293</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1294"></a>1294</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *previous +meeting *[:：] *($urlpat) *$/i) {</td></tr>
<tr><td class="h"><a name="1295"></a>1295</td><td></td><td></td><td></td><td></td><td class="s">    $prev_meeting = '&lt;a href=&quot;' . esc($1) . &quot;\&quot;&gt;$previous_icon&lt;/a&gt;\n&quot;;</td></tr>
<tr><td class="h"><a name="1296"></a>1296</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1297"></a>1297</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1298"></a>1298</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *next +meeting *[:：] *($urlpat) *$/i) {</td></tr>
<tr><td class="h"><a name="1299"></a>1299</td><td></td><td></td><td></td><td></td><td class="s">    $next_meeting = '&lt;a href=&quot;' . esc($1) . &quot;\&quot;&gt;$next_icon&lt;/a&gt;\n&quot;;</td></tr>
<tr><td class="h"><a name="1300"></a>1300</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1301"></a>1301</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1302"></a>1302</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *(previous|next) +meeting *[:：] *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1303"></a>1303</td><td></td><td></td><td></td><td></td><td class="s">    push(@diagnostics,&quot;Found '$1 meeting:' not followed by a URL: '$2'.&quot;);</td></tr>
<tr><td class="h"><a name="1304"></a>1304</td><td></td><td></td><td></td><td></td><td class="s">    # $records[$i]-&gt;{type} = 'o';        # Omit line from output</td></tr>
<tr><td class="h"><a name="1305"></a>1305</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1306"></a>1306</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *chairs? *-[:：]? *$/i) {</td></tr>
<tr><td class="h"><a name="1307"></a>1307</td><td></td><td></td><td></td><td></td><td class="s">    delete $chairs{fc $records[$i]-&gt;{speaker}}; # Remove speaker from chairs</td></tr>
<tr><td class="h"><a name="1308"></a>1308</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1309"></a>1309</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1310"></a>1310</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *chairs? *-[:：]? *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1311"></a>1311</td><td></td><td></td><td></td><td></td><td class="s">    delete $chairs{fc $_} foreach (split(/ *, */, $1)); # Remove given chairs</td></tr>
<tr><td class="h"><a name="1312"></a>1312</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1313"></a>1313</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1314"></a>1314</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *chairs? *\+[:：]? *$/i) {</td></tr>
<tr><td class="h"><a name="1315"></a>1315</td><td></td><td></td><td></td><td></td><td class="s">    my $s = $records[$i]-&gt;{speaker};</td></tr>
<tr><td class="h"><a name="1316"></a>1316</td><td></td><td></td><td></td><td></td><td class="s">    $chairs{fc $s} = $s;                # Add to collected chairs</td></tr>
<tr><td class="h"><a name="1317"></a>1317</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1318"></a>1318</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1319"></a>1319</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *chairs? *[:：] *$/i) {</td></tr>
<tr><td class="h"><a name="1320"></a>1320</td><td></td><td></td><td></td><td></td><td class="s">    push(@diagnostics, &quot;Ignored empty command \&quot;$records[$i]-&gt;{text}\&quot;&quot;);</td></tr>
<tr><td class="h"><a name="1321"></a>1321</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1322"></a>1322</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *chairs? *([:：]|\+[:：]?) *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1323"></a>1323</td><td class="c3">1</td><td class="c3"><span title="Avg 1µs">1µs</span></td><td></td><td></td><td class="s">    %chairs = () if $1 eq ':' || $1 eq '：'; # Reset the list of chairs</td></tr>
<tr><td class="h"><a name="1324"></a>1324</td><td class="c3">1</td><td class="c3"><span title="Avg 3µs">3µs</span></td><td></td><td></td><td class="s">    $chairs{fc $_} = $_ foreach (split(/ *, */, $2)); # Add all to chairs list</td></tr>
<tr><td class="h"><a name="1325"></a>1325</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1326"></a>1326</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1327"></a>1327</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *date *[:：] *(\d+ \w+ \d+)/i) {</td></tr>
<tr><td class="h"><a name="1328"></a>1328</td><td></td><td></td><td></td><td></td><td class="s">    $date = $1;</td></tr>
<tr><td class="h"><a name="1329"></a>1329</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1330"></a>1330</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1331"></a>1331</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *scribe(?:nick)? *-[:：]? *$/i) {</td></tr>
<tr><td class="h"><a name="1332"></a>1332</td><td></td><td></td><td></td><td></td><td class="s">    delete_scribes($records[$i]-&gt;{speaker}, \%curscribes);</td></tr>
<tr><td class="h"><a name="1333"></a>1333</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1334"></a>1334</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1335"></a>1335</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *scribe(?:nick)? *\+[:：]? *$/i) {</td></tr>
<tr><td class="h"><a name="1336"></a>1336</td><td class="c3">1</td><td class="c3"><span title="Avg 1µs">1µs</span></td><td class="c3">1</td><td class="c3">7µs</td><td class="s">    add_scribes($records[$i]-&gt;{speaker}, \%curscribes, \@scribes,\%scribenames);<div class="calls"><div class="calls_out">    # spent     7µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#750">main::add_scribes</a></div></div></td></tr>
<tr><td class="h"><a name="1337"></a>1337</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1338"></a>1338</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1339"></a>1339</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *scribe(?:nick)? *[:：] *$/i) {</td></tr>
<tr><td class="h"><a name="1340"></a>1340</td><td></td><td></td><td></td><td></td><td class="s">    push(@diagnostics, &quot;Ignored empty command \&quot;$records[$i]-&gt;{text}\&quot;&quot;);</td></tr>
<tr><td class="h"><a name="1341"></a>1341</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1342"></a>1342</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *scribe(?:nick)? *([:：]|\+[:：]?) *($scribepat(?:, *$scribepat)*)$/i) {</td></tr>
<tr><td class="h"><a name="1343"></a>1343</td><td class="c1">2</td><td class="c3"><span title="Avg 700ns">1µs</span></td><td></td><td></td><td class="s">    %curscribes = () if $1 eq ':' || $1 eq '：'; # Reset scribe nicks</td></tr>
<tr><td class="h"><a name="1344"></a>1344</td><td class="c1">2</td><td class="c3"><span title="Avg 1µs">3µs</span></td><td class="c3">2</td><td class="c3">16µs</td><td class="s">    add_scribes($2, \%curscribes, \@scribes, \%scribenames);<div class="calls"><div class="calls_out">    # spent    16µs making 2 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#750">main::add_scribes</a>, avg 8µs/call</div></div></td></tr>
<tr><td class="h"><a name="1345"></a>1345</td><td class="c1">2</td><td class="c3"><span title="Avg 2µs">3µs</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1346"></a>1346</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1347"></a>1347</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *scribe *[:：] *([^ ].*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1348"></a>1348</td><td></td><td></td><td></td><td></td><td class="s">    # Probably an old-fashioned scribe command without a nick</td></tr>
<tr><td class="h"><a name="1349"></a>1349</td><td></td><td></td><td></td><td></td><td class="s">    push @scribes, $1;                        # Add to collected scribe list</td></tr>
<tr><td class="h"><a name="1350"></a>1350</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1351"></a>1351</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1352"></a>1352</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *scribe(?:nick)? *-[:：]? *([^ ].*)? *$/i) {</td></tr>
<tr><td class="h"><a name="1353"></a>1353</td><td></td><td></td><td></td><td></td><td class="s">    delete_scribes($1, \%curscribes);</td></tr>
<tr><td class="h"><a name="1354"></a>1354</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1355"></a>1355</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1356"></a>1356</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($use_zakim &amp;&amp; $records[$i]-&gt;{speaker} eq 'Zakim' &amp;&amp;</td></tr>
<tr><td class="h"><a name="1357"></a>1357</td><td></td><td></td><td></td><td></td><td class="s">           (/^agendum \d+\. &quot;(.*)&quot; taken up/ ||           # Old Zakim</td></tr>
<tr><td class="h"><a name="1358"></a>1358</td><td></td><td></td><td></td><td></td><td class="s">            /^agendum \d+ -- (.*)/)) {                   # New Zakim</td></tr>
<tr><td class="h"><a name="1359"></a>1359</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 't';                # Mark as topic line</td></tr>
<tr><td class="h"><a name="1360"></a>1360</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1361"></a>1361</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} =~ s/ -- taken up \[from.*//;</td></tr>
<tr><td class="h"><a name="1362"></a>1362</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1363"></a>1363</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($use_zakim &amp;&amp; $records[$i]-&gt;{speaker} eq 'Zakim' &amp;&amp;</td></tr>
<tr><td class="h"><a name="1364"></a>1364</td><td></td><td></td><td></td><td></td><td class="s">           /the attendees (?:were|have been) (.*?),?$/){</td></tr>
<tr><td class="h"><a name="1365"></a>1365</td><td></td><td></td><td></td><td></td><td class="s">    $present{fc $_} = $_ foreach split(/, */, ($1 =~ s/\(no one\)//r));</td></tr>
<tr><td class="h"><a name="1366"></a>1366</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1367"></a>1367</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1368"></a>1368</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($use_zakim &amp;&amp; $records[$i]-&gt;{speaker} eq 'Zakim' &amp;&amp;</td></tr>
<tr><td class="h"><a name="1369"></a>1369</td><td></td><td></td><td></td><td></td><td class="s">           /^\.\.\. (.*)$/) {</td></tr>
<tr><td class="h"><a name="1370"></a>1370</td><td></td><td></td><td></td><td></td><td class="s">    my $s = $1;                                # See what this is a continuation of</td></tr>
<tr><td class="h"><a name="1371"></a>1371</td><td></td><td></td><td></td><td></td><td class="s">    my $j = $i - 1;</td></tr>
<tr><td class="h"><a name="1372"></a>1372</td><td></td><td></td><td></td><td></td><td class="s">    $j-- while $j &gt;= 0 &amp;&amp; ($records[$j]-&gt;{text} =~ /^\.\.\. / ||</td></tr>
<tr><td class="h"><a name="1373"></a>1373</td><td></td><td></td><td></td><td></td><td class="s">                           $records[$j]-&gt;{speaker} ne 'Zakim');</td></tr>
<tr><td class="h"><a name="1374"></a>1374</td><td></td><td></td><td></td><td></td><td class="s">    if ($j &gt;= 0 &amp;&amp; $records[$j]-&gt;{text} =~ /the attendees (?:were|have been) /){</td></tr>
<tr><td class="h"><a name="1375"></a>1375</td><td></td><td></td><td></td><td></td><td class="s">      $present{fc $_} = $_ foreach grep($_ ne '', split(/, */, $s));</td></tr>
<tr><td class="h"><a name="1376"></a>1376</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($j &gt;= 0 &amp;&amp; $records[$j]-&gt;{text} =~ /, you wanted /) {</td></tr>
<tr><td class="h"><a name="1377"></a>1377</td><td></td><td></td><td></td><td></td><td class="s">      $records[$j]-&gt;{text} .= ' ' . $s;</td></tr>
<tr><td class="h"><a name="1378"></a>1378</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($j &gt;= 0 &amp;&amp; $records[$j]-&gt;{type} eq 't') { # Continued agendum</td></tr>
<tr><td class="h"><a name="1379"></a>1379</td><td></td><td></td><td></td><td></td><td class="s">      $records[$j]-&gt;{text} .= ' ' . $s;</td></tr>
<tr><td class="h"><a name="1380"></a>1380</td><td></td><td></td><td></td><td></td><td class="s">      $records[$j]-&gt;{text} =~ s/ -- taken up \[from.*//;</td></tr>
<tr><td class="h"><a name="1381"></a>1381</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1382"></a>1382</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Omit line from output</td></tr>
<tr><td class="h"><a name="1383"></a>1383</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1384"></a>1384</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($use_zakim &amp;&amp; $records[$i]-&gt;{speaker} eq 'Zakim' &amp;&amp;</td></tr>
<tr><td class="h"><a name="1385"></a>1385</td><td></td><td></td><td></td><td></td><td class="s">           /[^ ,]+, you wanted /) {</td></tr>
<tr><td class="h"><a name="1386"></a>1386</td><td></td><td></td><td></td><td></td><td class="s">    # Leave Zakim's lines of the form: &quot;Jim, you wanted to ...&quot;</td></tr>
<tr><td class="h"><a name="1387"></a>1387</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1388"></a>1388</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($use_zakim &amp;&amp; $records[$i]-&gt;{speaker} eq 'Zakim') {</td></tr>
<tr><td class="h"><a name="1389"></a>1389</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore most conversations with Zakim</td></tr>
<tr><td class="h"><a name="1390"></a>1390</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1391"></a>1391</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($use_zakim &amp;&amp;</td></tr>
<tr><td class="h"><a name="1392"></a>1392</td><td></td><td></td><td></td><td></td><td class="s">    ( /^ *zakim,/i ||</td></tr>
<tr><td class="h"><a name="1393"></a>1393</td><td></td><td></td><td></td><td></td><td class="s">      /^ *(?:chair +)?(?:ack|recognize)s? \w/i ||</td></tr>
<tr><td class="h"><a name="1394"></a>1394</td><td></td><td></td><td></td><td></td><td class="s">      /^ *agg?enda *\d* *[\+\-\=\?]/i ||</td></tr>
<tr><td class="h"><a name="1395"></a>1395</td><td></td><td></td><td></td><td></td><td class="s">      /^ *(?:delete|drop|forget|remove) +agend(?:um|a) +\d+ *$/i ||</td></tr>
<tr><td class="h"><a name="1396"></a>1396</td><td></td><td></td><td></td><td></td><td class="s">      /^ *(?:take +up +|open +|move +to +)?(?:agend(?:um|a) +|next +agend(?:um|a))/i ||</td></tr>
<tr><td class="h"><a name="1397"></a>1397</td><td></td><td></td><td></td><td></td><td class="s">      /^ *next +agend(?:um|a) *$/i ||</td></tr>
<tr><td class="h"><a name="1398"></a>1398</td><td></td><td></td><td></td><td></td><td class="s">      /^ *(?:skip|(?:really +)?close) +(?:this +agend(?:um|a)|agend(?:um|a) +\d+) *$/i ||</td></tr>
<tr><td class="h"><a name="1399"></a>1399</td><td></td><td></td><td></td><td></td><td class="s">      /^ *q(?:ueue|q)? *[-+=?]/i ||</td></tr>
<tr><td class="h"><a name="1400"></a>1400</td><td></td><td></td><td></td><td></td><td class="s">      /^ *(?:ple?a?se? +)?(?:show +)?(?:the +)?(?:verbose +|full +)?q(?:ueue)?\?? *$/i ||</td></tr>
<tr><td class="h"><a name="1401"></a>1401</td><td></td><td></td><td></td><td></td><td class="s">      /^ *(?:vqueue|vq|qv)\?/i ||</td></tr>
<tr><td class="h"><a name="1402"></a>1402</td><td></td><td></td><td></td><td></td><td class="s">      /^ *[-+=?] *q(?:ueue|q)?\b/i ||</td></tr>
<tr><td class="h"><a name="1403"></a>1403</td><td></td><td></td><td></td><td></td><td class="s">      /^ *(?:ple?a?se? +)?clear +(?:the +)?agenda *$/i ||</td></tr>
<tr><td class="h"><a name="1404"></a>1404</td><td></td><td></td><td></td><td></td><td class="s">      /^ *(?:(?:list|show) +(?:all +)?(?:the +)?questions|questions *\?) *$/i ||</td></tr>
<tr><td class="h"><a name="1405"></a>1405</td><td></td><td></td><td></td><td></td><td class="s">      /^ *(?:drop|close) +question +[0-9]+ *$/i)) {</td></tr>
<tr><td class="h"><a name="1406"></a>1406</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore most conversations with Zakim</td></tr>
<tr><td class="h"><a name="1407"></a>1407</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1408"></a>1408</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *trackbot *, *(?:(?:dis)?associate|bye|start|end|status)\b/i) {</td></tr>
<tr><td class="h"><a name="1409"></a>1409</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore some commands to trackbot</td></tr>
<tr><td class="h"><a name="1410"></a>1410</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1411"></a>1411</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} eq 'trackbot' &amp;&amp;</td></tr>
<tr><td class="h"><a name="1412"></a>1412</td><td></td><td></td><td></td><td></td><td class="s">           /^([a-zA-Z]+-[0-9]+) -- (.*)$/) {</td></tr>
<tr><td class="h"><a name="1413"></a>1413</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'B';                # A structured response from trackbot</td></tr>
<tr><td class="h"><a name="1414"></a>1414</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{data} = $2;</td></tr>
<tr><td class="h"><a name="1415"></a>1415</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1416"></a>1416</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1417"></a>1417</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} eq 'trackbot' &amp;&amp; /^$urlpat$/i) {</td></tr>
<tr><td class="h"><a name="1418"></a>1418</td><td></td><td></td><td></td><td></td><td class="s">    my $j = $i - 1;                        # A URL response from trackbot</td></tr>
<tr><td class="h"><a name="1419"></a>1419</td><td></td><td></td><td></td><td></td><td class="s">    $j-- while $j &gt;= 0 &amp;&amp; ($records[$j]-&gt;{type} eq 'o' ||</td></tr>
<tr><td class="h"><a name="1420"></a>1420</td><td></td><td></td><td></td><td></td><td class="s">                           $records[$j]-&gt;{speaker} ne 'trackbot');</td></tr>
<tr><td class="h"><a name="1421"></a>1421</td><td></td><td></td><td></td><td></td><td class="s">    if ($j &lt; 0) {                        # URL belongs to nothing?</td></tr>
<tr><td class="h"><a name="1422"></a>1422</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'b';</td></tr>
<tr><td class="h"><a name="1423"></a>1423</td><td></td><td></td><td></td><td></td><td class="s">    } else {                                # Make previous line into a link</td></tr>
<tr><td class="h"><a name="1424"></a>1424</td><td></td><td></td><td></td><td></td><td class="s">      $records[$j]-&gt;{text} = '-&gt;'.$records[$i]-&gt;{text}.' '.$records[$j]-&gt;{text};</td></tr>
<tr><td class="h"><a name="1425"></a>1425</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'o';</td></tr>
<tr><td class="h"><a name="1426"></a>1426</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1427"></a>1427</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1428"></a>1428</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} eq 'trackbot') {</td></tr>
<tr><td class="h"><a name="1429"></a>1429</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'b'                # A response from trackbot</td></tr>
<tr><td class="h"><a name="1430"></a>1430</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1431"></a>1431</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} eq 'agendabot') {</td></tr>
<tr><td class="h"><a name="1432"></a>1432</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore most conversations w/ agendabot</td></tr>
<tr><td class="h"><a name="1433"></a>1433</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1434"></a>1434</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *agendabot *,/i) {</td></tr>
<tr><td class="h"><a name="1435"></a>1435</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore most conversations w/ agendabot</td></tr>
<tr><td class="h"><a name="1436"></a>1436</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1437"></a>1437</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (! $ghurlbot &amp;&amp; /^ *(?:ghurlbot|gb) *,/i) {</td></tr>
<tr><td class="h"><a name="1438"></a>1438</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore other commands to ghurlbot</td></tr>
<tr><td class="h"><a name="1439"></a>1439</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1440"></a>1440</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (! $ghurlbot &amp;&amp; $records[$i]-&gt;{speaker} =~ /^ghurlbot$|^gb$/) {</td></tr>
<tr><td class="h"><a name="1441"></a>1441</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore if --noghurlbot was set</td></tr>
<tr><td class="h"><a name="1442"></a>1442</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1443"></a>1443</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} =~ /^ghurlbot$|^gb$/ &amp;&amp;</td></tr>
<tr><td class="h"><a name="1444"></a>1444</td><td></td><td></td><td></td><td></td><td class="s">           /^($urlpat) -&gt; ((?:Issue |Action |Pull Request |\#)[0-9]+) ?(.*)$/i) {</td></tr>
<tr><td class="h"><a name="1445"></a>1445</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'B';                # A structured response from ghurlbot</td></tr>
<tr><td class="h"><a name="1446"></a>1446</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{data} = $3;</td></tr>
<tr><td class="h"><a name="1447"></a>1447</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = &quot;-&gt;$1 $2&quot;;</td></tr>
<tr><td class="h"><a name="1448"></a>1448</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1449"></a>1449</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} =~ /^ghurlbot$|^gb$/ &amp;&amp;</td></tr>
<tr><td class="h"><a name="1450"></a>1450</td><td></td><td></td><td></td><td></td><td class="s">           /^($urlpat) -&gt; (@.*)$/i) {        # A link to a GitHub user</td></tr>
<tr><td class="h"><a name="1451"></a>1451</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'B';</td></tr>
<tr><td class="h"><a name="1452"></a>1452</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{data} = '';</td></tr>
<tr><td class="h"><a name="1453"></a>1453</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = &quot;-&gt;$1 $2&quot;;</td></tr>
<tr><td class="h"><a name="1454"></a>1454</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1455"></a>1455</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} =~ /^ghurlbot$|^gb$/ &amp;&amp;</td></tr>
<tr><td class="h"><a name="1456"></a>1456</td><td></td><td></td><td></td><td></td><td class="s">           /^(?:Cannot|Closed|Reopened|Created)/) {</td></tr>
<tr><td class="h"><a name="1457"></a>1457</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'b';</td></tr>
<tr><td class="h"><a name="1458"></a>1458</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1459"></a>1459</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($records[$i]-&gt;{speaker} =~ /^ghurlbot$|^gb$/ &amp;&amp;</td></tr>
<tr><td class="h"><a name="1460"></a>1460</td><td></td><td></td><td></td><td></td><td class="s">  /^(?:[^ ,]+, )?OK\.?/) {</td></tr>
<tr><td class="h"><a name="1461"></a>1461</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'o';                # Ignore &quot;OK&quot; responses from ghurlbot</td></tr>
<tr><td class="h"><a name="1462"></a>1462</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1463"></a>1463</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *namedanchorhere *[:：] *(.*?) *$/i) {</td></tr>
<tr><td class="h"><a name="1464"></a>1464</td><td></td><td></td><td></td><td></td><td class="s">    my $a = $1 =~ s/ /_/gr;</td></tr>
<tr><td class="h"><a name="1465"></a>1465</td><td></td><td></td><td></td><td></td><td class="s">    if ($a =~ /^$/) {</td></tr>
<tr><td class="h"><a name="1466"></a>1466</td><td></td><td></td><td></td><td></td><td class="s">      push(@diagnostics, &quot;Empty named anchor ignored.&quot;);</td></tr>
<tr><td class="h"><a name="1467"></a>1467</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($a =~ /^x[0-9][0-9]+$/) {</td></tr>
<tr><td class="h"><a name="1468"></a>1468</td><td></td><td></td><td></td><td></td><td class="s">      push(@diagnostics, &quot;Named anchor \&quot;$a\&quot; ignored. (\&quot;xNN\&quot; is reserved.)&quot;);</td></tr>
<tr><td class="h"><a name="1469"></a>1469</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($a =~ /^(?:(?:Action|Resolution)Summary|links|attendees|toc|meeting)$/) {</td></tr>
<tr><td class="h"><a name="1470"></a>1470</td><td></td><td></td><td></td><td></td><td class="s">      push(@diagnostics, &quot;Named anchor \&quot;$a\&quot; ignored. (The name is reserved.)&quot;);</td></tr>
<tr><td class="h"><a name="1471"></a>1471</td><td></td><td></td><td></td><td></td><td class="s">    } elsif (exists $namedanchors{$a}) {</td></tr>
<tr><td class="h"><a name="1472"></a>1472</td><td></td><td></td><td></td><td></td><td class="s">      push(@diagnostics, &quot;Duplicate named anchor \&quot;$a\&quot; ignored.&quot;);</td></tr>
<tr><td class="h"><a name="1473"></a>1473</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="1474"></a>1474</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'n';</td></tr>
<tr><td class="h"><a name="1475"></a>1475</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{data} = esc($a);</td></tr>
<tr><td class="h"><a name="1476"></a>1476</td><td></td><td></td><td></td><td></td><td class="s">      $namedanchors{$a} = 1;</td></tr>
<tr><td class="h"><a name="1477"></a>1477</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1478"></a>1478</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1479"></a>1479</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *\Q&lt;$records[$i]-&gt;{speaker}\E&gt;/i) {</td></tr>
<tr><td class="h"><a name="1480"></a>1480</td><td></td><td></td><td></td><td></td><td class="s">    # Ralph's escape for a scribe's personal remarks: &quot;&lt;mynick&gt; my opinion&quot;</td></tr>
<tr><td class="h"><a name="1481"></a>1481</td><td></td><td></td><td></td><td></td><td class="s">    # But it also works for non-scribes.</td></tr>
<tr><td class="h"><a name="1482"></a>1482</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} =~ s/^.*?&gt; ?//i;</td></tr>
<tr><td class="h"><a name="1483"></a>1483</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1484"></a>1484</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($is_scribe &amp;&amp; /^ *\\(.*)/) {                        # Starts with backslash</td></tr>
<tr><td class="h"><a name="1485"></a>1485</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'd';                                # Descriptive text</td></tr>
<tr><td class="h"><a name="1486"></a>1486</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;                                # Remove backslash</td></tr>
<tr><td class="h"><a name="1487"></a>1487</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1488"></a>1488</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *\\(.*)/) {                                # Starts with backslash</td></tr>
<tr><td class="h"><a name="1489"></a>1489</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $1;                                # Remove backslash</td></tr>
<tr><td class="h"><a name="1490"></a>1490</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1491"></a>1491</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($is_scribe &amp;&amp;</td></tr>
<tr><td class="h"><a name="1492"></a>1492</td><td></td><td></td><td></td><td></td><td class="s">           (/^($speakerpat) *[:：] *(.*)$/ ||</td></tr>
<tr><td class="h"><a name="1493"></a>1493</td><td></td><td></td><td></td><td></td><td class="s">            (!$spacecont &amp;&amp; /^ +($speakerpat) *[:：] *(.*)$/)) &amp;&amp;</td></tr>
<tr><td class="h"><a name="1494"></a>1494</td><td></td><td></td><td></td><td></td><td class="s">           $records[$i]-&gt;{type} ne 'c' &amp;&amp;        # ... and not a failed s///</td></tr>
<tr><td class="h"><a name="1495"></a>1495</td><td></td><td></td><td></td><td></td><td class="s">           ! /^ *$urlpat/i &amp;&amp;                        # ... and not a URL</td></tr>
<tr><td class="h"><a name="1496"></a>1496</td><td></td><td></td><td></td><td></td><td class="s">           ! /^ *$specialpat *[:：]/i) {        # ... nor special</td></tr>
<tr><td class="h"><a name="1497"></a>1497</td><td></td><td></td><td></td><td></td><td class="s">    # A speaker line</td></tr>
<tr><td class="h"><a name="1498"></a>1498</td><td class="c0">26</td><td class="c1"><span title="Avg 246ns">6µs</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 's';                # Mark as scribe line</td></tr>
<tr><td class="h"><a name="1499"></a>1499</td><td class="c0">26</td><td class="c0"><span title="Avg 581ns">15µs</span></td><td></td><td></td><td class="s">    $lastspeaker{$records[$i]-&gt;{speaker}} = $1; # For any continuation lines</td></tr>
<tr><td class="h"><a name="1500"></a>1500</td><td class="c0">26</td><td class="c0"><span title="Avg 250ns">6µs</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{speaker} = $1;</td></tr>
<tr><td class="h"><a name="1501"></a>1501</td><td class="c0">26</td><td class="c0"><span title="Avg 362ns">9µs</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{text} = $2;</td></tr>
<tr><td class="h"><a name="1502"></a>1502</td><td class="c0">26</td><td class="c0"><span title="Avg 923ns">24µs</span></td><td></td><td></td><td class="s">    $speakers{fc $1} = ++$speakerid if !exists $speakers{fc $1};</td></tr>
<tr><td class="h"><a name="1503"></a>1503</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1504"></a>1504</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($is_scribe &amp;&amp; defined $lastspeaker{$records[$i]-&gt;{speaker}} &amp;&amp;</td></tr>
<tr><td class="h"><a name="1505"></a>1505</td><td></td><td></td><td></td><td></td><td class="s">           (/^ *(?:\.\.\.*|…) *(.*?) *$/ ||</td></tr>
<tr><td class="h"><a name="1506"></a>1506</td><td></td><td></td><td></td><td></td><td class="s">            ($implicitcont &amp;&amp; /^ *(.*?) *$/) ||</td></tr>
<tr><td class="h"><a name="1507"></a>1507</td><td></td><td></td><td></td><td></td><td class="s">            ($spacecont &amp;&amp; /^ +(.*?) *$/)) &amp;&amp;</td></tr>
<tr><td class="h"><a name="1508"></a>1508</td><td></td><td></td><td></td><td></td><td class="s">           $records[$i]-&gt;{type} ne 'c') { # ... and not a failed s///</td></tr>
<tr><td class="h"><a name="1509"></a>1509</td><td></td><td></td><td></td><td></td><td class="s">    # Looks like a continuation line</td></tr>
<tr><td class="h"><a name="1510"></a>1510</td><td class="c0">99</td><td class="c0"><span title="Avg 321ns">32µs</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{speaker} = $lastspeaker{$records[$i]-&gt;{speaker}};</td></tr>
<tr><td class="h"><a name="1511"></a>1511</td><td class="c0">99</td><td class="c0"><span title="Avg 180ns">18µs</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 's';                # Mark as scribe line</td></tr>
<tr><td class="h"><a name="1512"></a>1512</td><td class="c0">198</td><td class="c0"><span title="Avg 275ns">55µs</span></td><td></td><td></td><td class="s">    my $j = $i - 1; $j-- while $j &gt; 0 &amp;&amp; $records[$j]-&gt;{type} eq 'o';</td></tr>
<tr><td class="h"><a name="1513"></a>1513</td><td class="c0">99</td><td class="c0"><span title="Avg 468ns">46µs</span></td><td></td><td></td><td class="s">    if ($j &gt;= 0 &amp;&amp; $records[$j]-&gt;{type} eq 's' &amp;&amp;</td></tr>
<tr><td class="h"><a name="1514"></a>1514</td><td></td><td></td><td></td><td></td><td class="s">        $records[$j]-&gt;{speaker} eq $records[$i]-&gt;{speaker}) {</td></tr>
<tr><td class="h"><a name="1515"></a>1515</td><td></td><td></td><td></td><td></td><td class="s">      # Concatenate previous and current line and remove previous line</td></tr>
<tr><td class="h"><a name="1516"></a>1516</td><td class="c0">96</td><td class="c0"><span title="Avg 1µs">131µs</span></td><td></td><td></td><td class="s">      $records[$i]-&gt;{text} = $records[$j]-&gt;{text} . &quot;\t&quot; . $1;</td></tr>
<tr><td class="h"><a name="1517"></a>1517</td><td class="c0">96</td><td class="c0"><span title="Avg 178ns">17µs</span></td><td></td><td></td><td class="s">      $records[$j]-&gt;{type} = 'o';        # Omit previous line from output</td></tr>
<tr><td class="h"><a name="1518"></a>1518</td><td></td><td></td><td></td><td></td><td class="s">    } else {</td></tr>
<tr><td class="h"><a name="1519"></a>1519</td><td></td><td></td><td></td><td></td><td class="s">      # Cannot concatenate with previous line, remove &quot;...&quot; instead.</td></tr>
<tr><td class="h"><a name="1520"></a>1520</td><td class="c0">3</td><td class="c3"><span title="Avg 467ns">1µs</span></td><td></td><td></td><td class="s">      $records[$i]-&gt;{text} = $1;</td></tr>
<tr><td class="h"><a name="1521"></a>1521</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1522"></a>1522</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1523"></a>1523</td><td></td><td></td><td></td><td></td><td class="s">  } elsif (/^ *(?:\.\.\.*|…) *(.*?) *$/) {</td></tr>
<tr><td class="h"><a name="1524"></a>1524</td><td></td><td></td><td></td><td></td><td class="s">    # Is this a continuation of an action/resolution/issue/topic/description?</td></tr>
<tr><td class="h"><a name="1525"></a>1525</td><td></td><td></td><td></td><td></td><td class="s">    my ($s, $j, $speaker) = ($1, $i - 1, $records[$i]-&gt;{speaker});</td></tr>
<tr><td class="h"><a name="1526"></a>1526</td><td></td><td></td><td></td><td></td><td class="s">    $j-- while $j &gt; 0 &amp;&amp; ($records[$j]-&gt;{type} eq 'o' ||</td></tr>
<tr><td class="h"><a name="1527"></a>1527</td><td></td><td></td><td></td><td></td><td class="s">                          $records[$j]-&gt;{speaker} ne $speaker);</td></tr>
<tr><td class="h"><a name="1528"></a>1528</td><td></td><td></td><td></td><td></td><td class="s">    if ($j &gt;= 0 &amp;&amp; $records[$j]-&gt;{type} =~ /^[artTud]$/) {</td></tr>
<tr><td class="h"><a name="1529"></a>1529</td><td></td><td></td><td></td><td></td><td class="s">      $records[$j]-&gt;{text} .= &quot;\t&quot; . $s;</td></tr>
<tr><td class="h"><a name="1530"></a>1530</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'o';        # Omit this line from output</td></tr>
<tr><td class="h"><a name="1531"></a>1531</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($is_scribe) {</td></tr>
<tr><td class="h"><a name="1532"></a>1532</td><td></td><td></td><td></td><td></td><td class="s">      # Not a continuation of anything, but it is by the scribe.</td></tr>
<tr><td class="h"><a name="1533"></a>1533</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{type} = 'd';                # Mark as descriptive text</td></tr>
<tr><td class="h"><a name="1534"></a>1534</td><td></td><td></td><td></td><td></td><td class="s">      $records[$i]-&gt;{text} = $s;                # Remove &quot;...&quot;</td></tr>
<tr><td class="h"><a name="1535"></a>1535</td><td></td><td></td><td></td><td></td><td class="s">      $lastspeaker{$speaker} = undef;                # No continuation expected</td></tr>
<tr><td class="h"><a name="1536"></a>1536</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1537"></a>1537</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1538"></a>1538</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($is_scribe &amp;&amp; $records[$i]-&gt;{type} eq 'c') {</td></tr>
<tr><td class="h"><a name="1539"></a>1539</td><td></td><td></td><td></td><td></td><td class="s">    # It's a failed s/// command by the speaker. Leave it as a 'c'.</td></tr>
<tr><td class="h"><a name="1540"></a>1540</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1541"></a>1541</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($is_scribe &amp;&amp; /^ *-&gt; *$urlpat/i) {</td></tr>
<tr><td class="h"><a name="1542"></a>1542</td><td></td><td></td><td></td><td></td><td class="s">    # If the scribe used a Ralph-link (-&gt; url ...), still allow continuations</td></tr>
<tr><td class="h"><a name="1543"></a>1543</td><td></td><td></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'd';                # Mark as descriptive text</td></tr>
<tr><td class="h"><a name="1544"></a>1544</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1545"></a>1545</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($is_scribe &amp;&amp; /^ *[-+]\d+(?:\W.*)?$/) {</td></tr>
<tr><td class="h"><a name="1546"></a>1546</td><td></td><td></td><td></td><td></td><td class="s">    # Looks like the scribe was trying to say &quot;+1&quot; or similar. Treat</td></tr>
<tr><td class="h"><a name="1547"></a>1547</td><td></td><td></td><td></td><td></td><td class="s">    # it as IRC text rather than a scribe's summary.</td></tr>
<tr><td class="h"><a name="1548"></a>1548</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1549"></a>1549</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($is_scribe) {</td></tr>
<tr><td class="h"><a name="1550"></a>1550</td><td class="c1">2</td><td class="c3"><span title="Avg 300ns">600ns</span></td><td></td><td></td><td class="s">    $records[$i]-&gt;{type} = 'd';                # Mark as descriptive text</td></tr>
<tr><td class="h"><a name="1551"></a>1551</td><td class="c1">2</td><td class="c3"><span title="Avg 400ns">800ns</span></td><td></td><td></td><td class="s">    $lastspeaker{$records[$i]-&gt;{speaker}} = undef; # No continuation expected</td></tr>
<tr><td class="h"><a name="1552"></a>1552</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="1553"></a>1553</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1554"></a>1554</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1555"></a>1555</td><td></td><td></td><td></td><td></td><td class="s"># If date wasn't given, guess it from a URL, if any</td></tr>
<tr><td class="h"><a name="1556"></a>1556</td><td class="c3">1</td><td class="c0"><span title="Avg 9µs">9µs</span></td><td class="c3">1</td><td class="c3">2µs</td><td class="s">if (!defined $date &amp;&amp; defined $minutes_url &amp;&amp;<div class="calls"><div class="calls_out"># spent     2µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a></div></div></td></tr>
<tr><td class="h"><a name="1557"></a>1557</td><td></td><td></td><td></td><td></td><td class="s">    $minutes_url =~ m|/(\d\d\d\d)/(\d\d)/(\d\d)-|) {</td></tr>
<tr><td class="h"><a name="1558"></a>1558</td><td></td><td></td><td></td><td></td><td class="s">  $date = $3 . ' ' . $month[0+$2] . ' ' . $1;</td></tr>
<tr><td class="h"><a name="1559"></a>1559</td><td></td><td></td><td></td><td></td><td class="s">} elsif (!defined $date &amp;&amp; defined $logging_url &amp;&amp;</td></tr>
<tr><td class="h"><a name="1560"></a>1560</td><td></td><td></td><td></td><td></td><td class="s">         $logging_url =~ m|/(\d\d\d\d)/(\d\d)/(\d\d)-|) {</td></tr>
<tr><td class="h"><a name="1561"></a>1561</td><td></td><td></td><td></td><td></td><td class="s">  $date = $3 . ' ' . $month[0+$2] . ' ' . $1;</td></tr>
<tr><td class="h"><a name="1562"></a>1562</td><td></td><td></td><td></td><td></td><td class="s">} elsif (!defined $date) {</td></tr>
<tr><td class="h"><a name="1563"></a>1563</td><td></td><td></td><td></td><td></td><td class="s">  $date = &quot;&quot;;</td></tr>
<tr><td class="h"><a name="1564"></a>1564</td><td></td><td></td><td></td><td></td><td class="s">  push(@diagnostics, &quot;Found no dated URLs. You may need to use 'Date:'.&quot;);</td></tr>
<tr><td class="h"><a name="1565"></a>1565</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1566"></a>1566</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1567"></a>1567</td><td></td><td></td><td></td><td></td><td class="s"># Add lists of (1) speakers that do not appear in %present; (2) all</td></tr>
<tr><td class="h"><a name="1568"></a>1568</td><td></td><td></td><td></td><td></td><td class="s"># speakers; and (3) all people active on IRC.</td></tr>
<tr><td class="h"><a name="1569"></a>1569</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1570"></a>1570</td><td class="c3">1</td><td class="c0"><span title="Avg 45µs">45µs</span></td><td class="c3">1</td><td class="c3">17µs</td><td class="s">my @all_speakers = fc_uniq(map $_-&gt;{speaker}, grep $_-&gt;{type} eq 's', @records);<div class="calls"><div class="calls_out"># spent    17µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#495">main::fc_uniq</a></div></div></td></tr>
<tr><td class="h"><a name="1571"></a>1571</td><td class="c3">1</td><td class="c2"><span title="Avg 4µs">4µs</span></td><td></td><td></td><td class="s">my @also = grep !exists($present{fc $_}), @all_speakers;</td></tr>
<tr><td class="h"><a name="1572"></a>1572</td><td></td><td></td><td></td><td></td><td class="s">push @diagnostics, &quot;Maybe present: &quot; .</td></tr>
<tr><td class="h"><a name="1573"></a>1573</td><td class="c3">1</td><td class="c0"><span title="Avg 21µs">21µs</span></td><td class="c3">1</td><td class="c3">15µs</td><td class="s">    join(&quot;, &quot;, sort {fc($a) cmp fc($b)} @also) if @also;<div class="calls"><div class="calls_out">    # spent    15µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_sort">main::CORE:sort</a></div></div></td></tr>
<tr><td class="h"><a name="1574"></a>1574</td><td></td><td></td><td></td><td></td><td class="s">push @diagnostics, &quot;All speakers: &quot; .</td></tr>
<tr><td class="h"><a name="1575"></a>1575</td><td class="c3">1</td><td class="c0"><span title="Avg 11µs">11µs</span></td><td class="c3">1</td><td class="c3">9µs</td><td class="s">    join(&quot;, &quot;, sort {fc($a) cmp fc($b)} @all_speakers) if @all_speakers;<div class="calls"><div class="calls_out">    # spent     9µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_sort">main::CORE:sort</a></div></div></td></tr>
<tr><td class="h"><a name="1576"></a>1576</td><td></td><td></td><td></td><td></td><td class="s">push @diagnostics, &quot;Active on IRC: &quot; .</td></tr>
<tr><td class="h"><a name="1577"></a>1577</td><td class="c3">1</td><td class="c0"><span title="Avg 19µs">19µs</span></td><td class="c3">1</td><td class="c3">14µs</td><td class="s">    join(&quot;, &quot;, sort {fc($a) cmp fc($b)} keys %count) if %count;<div class="calls"><div class="calls_out">    # spent    14µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_sort">main::CORE:sort</a></div></div></td></tr>
<tr><td class="h"><a name="1578"></a>1578</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1579"></a>1579</td><td></td><td></td><td></td><td></td><td class="s"># Step 6. Convert records to HTML and then fill a template.</td></tr>
<tr><td class="h"><a name="1580"></a>1580</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1581"></a>1581</td><td></td><td></td><td></td><td></td><td class="s"># Each type of record is converted to a specific HTML fragment, with</td></tr>
<tr><td class="h"><a name="1582"></a>1582</td><td></td><td></td><td></td><td></td><td class="s"># %1$s replaced by the speaker, %2$s by the ID, %3$s by the text, %4$s</td></tr>
<tr><td class="h"><a name="1583"></a>1583</td><td></td><td></td><td></td><td></td><td class="s"># by the speaker ID, %5$s by the record's data (if any), %6$s by a</td></tr>
<tr><td class="h"><a name="1584"></a>1584</td><td></td><td></td><td></td><td></td><td class="s"># link to a recording of the meeting if any, and %7$s by the base64 of an</td></tr>
<tr><td class="h"><a name="1585"></a>1585</td><td></td><td></td><td></td><td></td><td class="s"># archived downloaded content if any.</td></tr>
<tr><td class="h"><a name="1586"></a>1586</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1587"></a>1587</td><td></td><td></td><td></td><td></td><td class="s"># The 1 or 0 after the pattern indicates whether the text (%3$) can be</td></tr>
<tr><td class="h"><a name="1588"></a>1588</td><td></td><td></td><td></td><td></td><td class="s"># parsed for emphasis and math. (Only applicable if --emphasis was</td></tr>
<tr><td class="h"><a name="1589"></a>1589</td><td></td><td></td><td></td><td></td><td class="s"># specified.)</td></tr>
<tr><td class="h"><a name="1590"></a>1590</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1591"></a>1591</td><td></td><td></td><td></td><td></td><td class="s"># Also replace \t (i.e., placeholders for line breaks) as appropriate.</td></tr>
<tr><td class="h"><a name="1592"></a>1592</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1593"></a>1593</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">my $embedded_recording = $recording;</td></tr>
<tr><td class="h"><a name="1594"></a>1594</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my $canonical_recording = $recording;</td></tr>
<tr><td class="h"><a name="1595"></a>1595</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">if (defined $recording) {</td></tr>
<tr><td class="h"><a name="1596"></a>1596</td><td></td><td></td><td></td><td></td><td class="s">  # Modify URL for certain known video sites.</td></tr>
<tr><td class="h"><a name="1597"></a>1597</td><td></td><td></td><td></td><td></td><td class="s">  if ($recording =~ /^https:\/\/youtu\.be\/(.*)$/) {</td></tr>
<tr><td class="h"><a name="1598"></a>1598</td><td></td><td></td><td></td><td></td><td class="s">    $canonical_recording = &quot;https://www.youtube.com/watch?v=&quot; . $1;</td></tr>
<tr><td class="h"><a name="1599"></a>1599</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="1600"></a>1600</td><td></td><td></td><td></td><td></td><td class="s">  if ($canonical_recording =~ /youtube\.com\/watch\?v=/) {</td></tr>
<tr><td class="h"><a name="1601"></a>1601</td><td></td><td></td><td></td><td></td><td class="s">    $embedded_recording = $canonical_recording =~ s/watch\?v=/embed\//r;</td></tr>
<tr><td class="h"><a name="1602"></a>1602</td><td></td><td></td><td></td><td></td><td class="s">    $embedded_recording .= &quot;?enablejsapi=1&amp;amp;rel=0&amp;amp;modestbranding=1&quot;;</td></tr>
<tr><td class="h"><a name="1603"></a>1603</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($canonical_recording =~ /watch\.videodelivery\.net\//) {</td></tr>
<tr><td class="h"><a name="1604"></a>1604</td><td></td><td></td><td></td><td></td><td class="s">    $embedded_recording = $canonical_recording =~ s/watch\./iframe\./r;</td></tr>
<tr><td class="h"><a name="1605"></a>1605</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="1606"></a>1606</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1607"></a>1607</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1608"></a>1608</td><td></td><td></td><td></td><td></td><td class="s"># Formats for the different types of lines. 1 = speaker, 2 = ID of a</td></tr>
<tr><td class="h"><a name="1609"></a>1609</td><td></td><td></td><td></td><td></td><td class="s"># heading, action, etc. or a message by a bot, 3 = text, 4 = the ID of</td></tr>
<tr><td class="h"><a name="1610"></a>1610</td><td></td><td></td><td></td><td></td><td class="s"># the speaker, 5 = unique ID for the line, 6 = URL of recording</td></tr>
<tr><td class="h"><a name="1611"></a>1611</td><td class="c3">1</td><td class="c0"><span title="Avg 9µs">9µs</span></td><td></td><td></td><td class="s">my %linepat = (</td></tr>
<tr><td class="h"><a name="1612"></a>1612</td><td></td><td></td><td></td><td></td><td class="s">  a =&gt; [&quot;&lt;p id=%2\$s class=action&gt;&lt;strong&gt;ACTION:&lt;/strong&gt; %3\$s&lt;/p&gt;\n&quot;, 1],</td></tr>
<tr><td class="h"><a name="1613"></a>1613</td><td></td><td></td><td></td><td></td><td class="s">  b =&gt; [&quot;&lt;p id=%2\$s class=bot&gt;&lt;cite&gt;&amp;lt;%1\$s&amp;gt;&lt;/cite&gt; %3\$s&lt;/p&gt;\n&quot;, 0],</td></tr>
<tr><td class="h"><a name="1614"></a>1614</td><td></td><td></td><td></td><td></td><td class="s">  B =&gt; [&quot;&lt;p id=%2\$s class=bot&gt;&lt;cite&gt;&amp;lt;%1\$s&amp;gt;&lt;/cite&gt; &lt;strong&gt;%3\$s&lt;/strong&gt; %5\$s&lt;/p&gt;\n&quot;, 0],</td></tr>
<tr><td class="h"><a name="1615"></a>1615</td><td></td><td></td><td></td><td></td><td class="s">  d =&gt; [&quot;&lt;p id=%2\$s class=summary&gt;%3\$s&lt;/p&gt;\n&quot;, 1],</td></tr>
<tr><td class="h"><a name="1616"></a>1616</td><td></td><td></td><td></td><td></td><td class="s">  D =&gt; [&quot;&lt;pre id=%2\$s class=summary&gt;\n%3\$s&lt;/pre&gt;\n&quot;, 0],</td></tr>
<tr><td class="h"><a name="1617"></a>1617</td><td></td><td></td><td></td><td></td><td class="s">  i =&gt; [$scribeonly ? '' : &quot;&lt;p id=%2\$s class=irc&gt;&lt;cite&gt;&amp;lt;%1\$s&amp;gt;&lt;/cite&gt; %3\$s&lt;/p&gt;\n&quot;, 1],</td></tr>
<tr><td class="h"><a name="1618"></a>1618</td><td></td><td></td><td></td><td></td><td class="s">  I =&gt; [$scribeonly ? '' : &quot;&lt;p id=%2\$s class=irc&gt;&lt;cite&gt;&amp;lt;%1\$s&amp;gt;&lt;/cite&gt; &lt;code&gt;%3\$s&lt;/code&gt;&lt;/p&gt;\n&quot;, 0],</td></tr>
<tr><td class="h"><a name="1619"></a>1619</td><td></td><td></td><td></td><td></td><td class="s">  c =&gt; [$scribeonly ? '' : &quot;&lt;p id=%2\$s class=irc&gt;&lt;cite&gt;&amp;lt;%1\$s&amp;gt;&lt;/cite&gt; %3\$s&lt;/p&gt;\n&quot;, 0],</td></tr>
<tr><td class="h"><a name="1620"></a>1620</td><td></td><td></td><td></td><td></td><td class="s">  o =&gt; ['', 0],</td></tr>
<tr><td class="h"><a name="1621"></a>1621</td><td></td><td></td><td></td><td></td><td class="s">  r =&gt; [&quot;&lt;p id=%5\$s class=resolution&gt;&lt;strong&gt;RESOLUTION:&lt;/strong&gt; %3\$s&lt;/p&gt;\n&quot;,, 1],</td></tr>
<tr><td class="h"><a name="1622"></a>1622</td><td></td><td></td><td></td><td></td><td class="s">  s =&gt; [&quot;&lt;p id=%2\$s class=\&quot;phone %4\$s\&quot;&gt;&lt;cite&gt;%1\$s:&lt;/cite&gt; %3\$s&lt;/p&gt;\n&quot;, 1],</td></tr>
<tr><td class="h"><a name="1623"></a>1623</td><td></td><td></td><td></td><td></td><td class="s">  n =&gt; [&quot;&lt;p class=anchor id=\&quot;%2\$s\&quot;&gt;&lt;a href=\&quot;#%5\$s\&quot;&gt;⚓&lt;/a&gt;&lt;/p&gt;\n&quot;, 0],</td></tr>
<tr><td class="h"><a name="1624"></a>1624</td><td></td><td></td><td></td><td></td><td class="s">  u =&gt; [&quot;&lt;p id=%2\$s class=issue&gt;&lt;strong&gt;ISSUE:&lt;/strong&gt; %3\$s&lt;/p&gt;\n&quot;, 1],</td></tr>
<tr><td class="h"><a name="1625"></a>1625</td><td></td><td></td><td></td><td></td><td class="s">  T =&gt; [&quot;&lt;h4 id=%2\$s&gt;%3\$s%6\$s&lt;/h4&gt;\n&quot;, 1],</td></tr>
<tr><td class="h"><a name="1626"></a>1626</td><td></td><td></td><td></td><td></td><td class="s">  t =&gt; [&quot;&lt;/section&gt;\n\n&lt;section&gt;\n&lt;h3 id=%2\$s&gt;%3\$s%6\$s&lt;/h3&gt;\n&quot;, 1],</td></tr>
<tr><td class="h"><a name="1627"></a>1627</td><td></td><td></td><td></td><td></td><td class="s">  slideset =&gt; [&quot;&lt;p id=%2\$s class=summary&gt;Slideset: %3\$s%7\$s&lt;/p&gt;\n&quot;, 0],</td></tr>
<tr><td class="h"><a name="1628"></a>1628</td><td></td><td></td><td></td><td></td><td class="s">  slide =&gt; [&quot;&lt;p id=%2\$s class=summary&gt;&lt;a class=islide data-islide-srcref=\&quot;%7\$s\&quot; href=\&quot;%5\$s\&quot;&gt;[Slide %3\$s]&lt;/a&gt;&lt;/p&gt;\n&quot;, 1],</td></tr>
<tr><td class="h"><a name="1629"></a>1629</td><td></td><td></td><td></td><td></td><td class="s">  repo =&gt; [&quot;&lt;p id=%2\$s class=summary&gt;Repository: %3\$s&lt;/p&gt;\n&quot;, 0],</td></tr>
<tr><td class="h"><a name="1630"></a>1630</td><td></td><td></td><td></td><td></td><td class="s">  drop =&gt; [&quot;&lt;p id=%2\$s class=summary&gt;Repository- %3\$s&lt;/p&gt;\n&quot;, 1],</td></tr>
<tr><td class="h"><a name="1631"></a>1631</td><td></td><td></td><td></td><td></td><td class="s">    );</td></tr>
<tr><td class="h"><a name="1632"></a>1632</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1633"></a>1633</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">my $minutes = '';</td></tr>
<tr><td class="h"><a name="1634"></a>1634</td><td class="c3">1</td><td class="c3"><span title="Avg 700ns">700ns</span></td><td></td><td></td><td class="s">foreach my $p (@records) {</td></tr>
<tr><td class="h"><a name="1635"></a>1635</td><td class="c0">202</td><td class="c0"><span title="Avg 161ns">32µs</span></td><td></td><td></td><td class="s">  if ($github) {</td></tr>
<tr><td class="h"><a name="1636"></a>1636</td><td class="c0">202</td><td class="c0"><span title="Avg 623ns">126µs</span></td><td></td><td></td><td class="s">    if ($p-&gt;{type} eq 'repo' &amp;&amp; $p-&gt;{text} eq '') {</td></tr>
<tr><td class="h"><a name="1637"></a>1637</td><td></td><td></td><td></td><td></td><td class="s">      # An empty repo line resets the list of repositories.</td></tr>
<tr><td class="h"><a name="1638"></a>1638</td><td></td><td></td><td></td><td></td><td class="s">      @repositories = ();</td></tr>
<tr><td class="h"><a name="1639"></a>1639</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($p-&gt;{type} eq 'repo') {</td></tr>
<tr><td class="h"><a name="1640"></a>1640</td><td></td><td></td><td></td><td></td><td class="s">      # A repo line adds repositories to use for issues in the next lines.</td></tr>
<tr><td class="h"><a name="1641"></a>1641</td><td></td><td></td><td></td><td></td><td class="s">      add_repositories($p-&gt;{text});</td></tr>
<tr><td class="h"><a name="1642"></a>1642</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($p-&gt;{type} eq 't' || $p-&gt;{type} eq 'T') {</td></tr>
<tr><td class="h"><a name="1643"></a>1643</td><td></td><td></td><td></td><td></td><td class="s">      # GitHub repositories in topic lines are added to the repositories.</td></tr>
<tr><td class="h"><a name="1644"></a>1644</td><td class="c0">3</td><td class="c0"><span title="Avg 15µs">46µs</span></td><td class="c0">6</td><td class="c3">39µs</td><td class="s">      add_repositories($1) while $p-&gt;{text} =~ /($githuburl)/g;<div class="calls"><div class="calls_out">      # spent    36µs making 3 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_regcomp">main::CORE:regcomp</a>, avg 12µs/call
      # spent     2µs making 3 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 800ns/call</div></div></td></tr>
<tr><td class="h"><a name="1645"></a>1645</td><td></td><td></td><td></td><td></td><td class="s">    } elsif ($p-&gt;{type} eq 'drop') {</td></tr>
<tr><td class="h"><a name="1646"></a>1646</td><td></td><td></td><td></td><td></td><td class="s">      # Remove the given repository.</td></tr>
<tr><td class="h"><a name="1647"></a>1647</td><td></td><td></td><td></td><td></td><td class="s">      remove_repositories($p-&gt;{text});</td></tr>
<tr><td class="h"><a name="1648"></a>1648</td><td></td><td></td><td></td><td></td><td class="s">    }</td></tr>
<tr><td class="h"><a name="1649"></a>1649</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="1650"></a>1650</td><td></td><td></td><td></td><td></td><td class="s">  # The last part generates nothing, but avoids warnings for unused args.</td></tr>
<tr><td class="h"><a name="1651"></a>1651</td><td></td><td></td><td></td><td></td><td class="s">  my $line = sprintf $linepat{$p-&gt;{type}}[0] . '%1$.0s%2$.0s%3$.0s%4$.0s%5$.0s%6$.0s%7$.0s',</td></tr>
<tr><td class="h"><a name="1652"></a>1652</td><td></td><td></td><td></td><td></td><td class="s">      esc($p-&gt;{speaker}),                                                    # %1</td></tr>
<tr><td class="h"><a name="1653"></a>1653</td><td></td><td></td><td></td><td></td><td class="s">      $p-&gt;{id},                                                                    # %2</td></tr>
<tr><td class="h"><a name="1654"></a>1654</td><td></td><td></td><td></td><td></td><td class="s">      esc($p-&gt;{text}, $emphasis &amp;&amp; $linepat{$p-&gt;{type}}[1], 1, 1, $github), # %3</td></tr>
<tr><td class="h"><a name="1655"></a>1655</td><td></td><td></td><td></td><td></td><td class="s">      $speakers{fc $p-&gt;{speaker}} // '',                                    # %4</td></tr>
<tr><td class="h"><a name="1656"></a>1656</td><td></td><td></td><td></td><td></td><td class="s">      $p-&gt;{data} // '',                                                            # %5</td></tr>
<tr><td class="h"><a name="1657"></a>1657</td><td></td><td></td><td></td><td></td><td class="s">      link_to_recording($canonical_recording, $p-&gt;{time}),                    # %6</td></tr>
<tr><td class="h"><a name="1658"></a>1658</td><td class="c0">202</td><td class="c0"><span title="Avg 4µs">877µs</span></td><td class="c0">606</td><td class="c0">16.7ms</td><td class="s">      $p-&gt;{archive} // '';                                                    # %7<div class="calls"><div class="calls_out">      # spent  16.5ms making 404 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>, avg 41µs/call
      # spent   134µs making 202 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#782">main::link_to_recording</a>, avg 665ns/call</div></div></td></tr>
<tr><td class="h"><a name="1659"></a>1659</td><td class="c0">202</td><td class="c0"><span title="Avg 886ns">179µs</span></td><td class="c0">202</td><td class="c3">36µs</td><td class="s">  if (!$keeplines) {<div class="calls"><div class="calls_out">  # spent    36µs making 202 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 181ns/call</div></div></td></tr>
<tr><td class="h"><a name="1660"></a>1660</td><td></td><td></td><td></td><td></td><td class="s">    $line =~ tr/\t/ /;</td></tr>
<tr><td class="h"><a name="1661"></a>1661</td><td></td><td></td><td></td><td></td><td class="s">  } elsif ($line =~ /\t/) {</td></tr>
<tr><td class="h"><a name="1662"></a>1662</td><td class="c0">44</td><td class="c0"><span title="Avg 4µs">194µs</span></td><td class="c0">88</td><td class="c0">512µs</td><td class="s">    $line =~ s|\t([^\t]*)|&quot;&lt;br&gt;\n&lt;span id=&quot; . make_id($1) . &quot;&gt;… $1&quot;|e; # 1st \t<div class="calls"><div class="calls_out">    # spent   405µs making 22 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#843">main::make_id</a>, avg 18µs/call
    # spent    66µs making 22 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 3µs/call
    # spent    41µs making 44 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_substcont">main::CORE:substcont</a>, avg 934ns/call</div></div></td></tr>
<tr><td class="h"><a name="1663"></a>1663</td><td class="c0">96</td><td class="c0"><span title="Avg 3µs">307µs</span></td><td class="c0">189</td><td class="c0">1.35ms</td><td class="s">    $line =~ s|\t([^\t]*)|&quot;&lt;/span&gt;&lt;br&gt;\n&lt;span id=&quot; . make_id($1) . &quot;&gt;… $1&quot;|ge;<div class="calls"><div class="calls_out">    # spent  1.19ms making 74 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#843">main::make_id</a>, avg 16µs/call
    # spent    98µs making 93 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_substcont">main::CORE:substcont</a>, avg 1µs/call
    # spent    57µs making 22 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 3µs/call</div></div></td></tr>
<tr><td class="h"><a name="1664"></a>1664</td><td class="c0">22</td><td class="c0"><span title="Avg 4µs">98µs</span></td><td class="c0">22</td><td class="c1">82µs</td><td class="s">    $line =~ s|&lt;/p&gt;|&lt;/span&gt;&lt;/p&gt;|; # Last line<div class="calls"><div class="calls_out">    # spent    82µs making 22 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a>, avg 4µs/call</div></div></td></tr>
<tr><td class="h"><a name="1665"></a>1665</td><td></td><td></td><td></td><td></td><td class="s">  }</td></tr>
<tr><td class="h"><a name="1666"></a>1666</td><td class="c0">202</td><td class="c0"><span title="Avg 573ns">116µs</span></td><td></td><td></td><td class="s">  $minutes .= $line;</td></tr>
<tr><td class="h"><a name="1667"></a>1667</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1668"></a>1668</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1669"></a>1669</td><td></td><td></td><td></td><td></td><td class="s"># @stylesheets is an array of triples [alt, title, url], where alt = 0</td></tr>
<tr><td class="h"><a name="1670"></a>1670</td><td></td><td></td><td></td><td></td><td class="s"># means this is the default style, not 0 means an &quot;alternate&quot; style.</td></tr>
<tr><td class="h"><a name="1671"></a>1671</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1672"></a>1672</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $alt = 0;</td></tr>
<tr><td class="h"><a name="1673"></a>1673</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">my $w3 = 'https://www.w3.org';</td></tr>
<tr><td class="h"><a name="1674"></a>1674</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">my @stylesheets = ();</td></tr>
<tr><td class="h"><a name="1675"></a>1675</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">push @stylesheets, [$alt++, &quot;Default&quot;, $stylesheet] if defined $stylesheet;</td></tr>
<tr><td class="h"><a name="1676"></a>1676</td><td class="c3">1</td><td class="c3"><span title="Avg 800ns">800ns</span></td><td></td><td></td><td class="s">if ($styleset eq 'team') {</td></tr>
<tr><td class="h"><a name="1677"></a>1677</td><td></td><td></td><td></td><td></td><td class="s">  push @stylesheets,</td></tr>
<tr><td class="h"><a name="1678"></a>1678</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + $old_style, &quot;2018&quot;, &quot;$w3/StyleSheets/scribe2/team.css&quot;],</td></tr>
<tr><td class="h"><a name="1679"></a>1679</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style, &quot;2004&quot;, &quot;$w3/StyleSheets/base.css&quot;],</td></tr>
<tr><td class="h"><a name="1680"></a>1680</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style, &quot;2004&quot;, &quot;$w3/StyleSheets/team.css&quot;],</td></tr>
<tr><td class="h"><a name="1681"></a>1681</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style, &quot;2004&quot;, &quot;$w3/StyleSheets/team-minutes.css&quot;],</td></tr>
<tr><td class="h"><a name="1682"></a>1682</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style, &quot;2004&quot;, &quot;$w3/2004/02/minutes-style.css&quot;],</td></tr>
<tr><td class="h"><a name="1683"></a>1683</td><td></td><td></td><td></td><td></td><td class="s">      [1, &quot;Typewriter&quot;, &quot;$w3/StyleSheets/scribe2/tt-team.css&quot;];</td></tr>
<tr><td class="h"><a name="1684"></a>1684</td><td></td><td></td><td></td><td></td><td class="s">} elsif ($styleset eq 'member') {</td></tr>
<tr><td class="h"><a name="1685"></a>1685</td><td></td><td></td><td></td><td></td><td class="s">  push @stylesheets,</td></tr>
<tr><td class="h"><a name="1686"></a>1686</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + $old_style, &quot;2018&quot;, &quot;$w3/StyleSheets/scribe2/member.css&quot;],</td></tr>
<tr><td class="h"><a name="1687"></a>1687</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style, &quot;2004&quot;, &quot;$w3/StyleSheets/base.css&quot;],</td></tr>
<tr><td class="h"><a name="1688"></a>1688</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style, &quot;2004&quot;, &quot;$w3/StyleSheets/member.css&quot;],</td></tr>
<tr><td class="h"><a name="1689"></a>1689</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style, &quot;2004&quot;, &quot;$w3/StyleSheets/member-minutes.css&quot;],</td></tr>
<tr><td class="h"><a name="1690"></a>1690</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style, &quot;2004&quot;, &quot;$w3/2004/02/minutes-style.css&quot;],</td></tr>
<tr><td class="h"><a name="1691"></a>1691</td><td></td><td></td><td></td><td></td><td class="s">      [1, &quot;Typewriter&quot;, &quot;$w3/StyleSheets/scribe2/tt-member.css&quot;];</td></tr>
<tr><td class="h"><a name="1692"></a>1692</td><td></td><td></td><td></td><td></td><td class="s">} else {                        # 'public' or 'fancy'</td></tr>
<tr><td class="h"><a name="1693"></a>1693</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">  my $f = $styleset eq 'fancy';</td></tr>
<tr><td class="h"><a name="1694"></a>1694</td><td class="c3">1</td><td class="c1"><span title="Avg 6µs">6µs</span></td><td></td><td></td><td class="s">  push @stylesheets,</td></tr>
<tr><td class="h"><a name="1695"></a>1695</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + $old_style + $f, &quot;2018&quot;, &quot;$w3/StyleSheets/scribe2/public.css&quot;],</td></tr>
<tr><td class="h"><a name="1696"></a>1696</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style + $f, &quot;2004&quot;, &quot;$w3/StyleSheets/base.css&quot;],</td></tr>
<tr><td class="h"><a name="1697"></a>1697</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style + $f, &quot;2004&quot;, &quot;$w3/StyleSheets/public.css&quot;],</td></tr>
<tr><td class="h"><a name="1698"></a>1698</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$old_style + $f, &quot;2004&quot;, &quot;$w3/2004/02/minutes-style.css&quot;],</td></tr>
<tr><td class="h"><a name="1699"></a>1699</td><td></td><td></td><td></td><td></td><td class="s">      [$alt + !$f, &quot;Fancy&quot;, &quot;$w3/StyleSheets/scribe2/fancy.css&quot;],</td></tr>
<tr><td class="h"><a name="1700"></a>1700</td><td></td><td></td><td></td><td></td><td class="s">      [1, &quot;Typewriter&quot;, &quot;$w3/StyleSheets/scribe2/tt-member.css&quot;];</td></tr>
<tr><td class="h"><a name="1701"></a>1701</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1702"></a>1702</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1703"></a>1703</td><td></td><td></td><td></td><td></td><td class="s"># Format some of the variables used in the template below</td></tr>
<tr><td class="h"><a name="1704"></a>1704</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1705"></a>1705</td><td></td><td></td><td></td><td></td><td class="s">my $style = join(&quot;\n&quot;,</td></tr>
<tr><td class="h"><a name="1706"></a>1706</td><td class="c3">1</td><td class="c1"><span title="Avg 6µs">6µs</span></td><td></td><td></td><td class="s">  map {&quot;&lt;link rel=\&quot;&quot; . ($_-&gt;[0] ? &quot;alternate &quot; : &quot;&quot;) . &quot;stylesheet\&quot; &quot; .</td></tr>
<tr><td class="h"><a name="1707"></a>1707</td><td></td><td></td><td></td><td></td><td class="s">    &quot;type=\&quot;text/css\&quot; title=\&quot;$_-&gt;[1]\&quot; href=\&quot;$_-&gt;[2]\&quot;&gt;&quot;} @stylesheets);</td></tr>
<tr><td class="h"><a name="1708"></a>1708</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1709"></a>1709</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my $scripts = '';</td></tr>
<tr><td class="h"><a name="1710"></a>1710</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">$scripts .= &quot;&lt;script src=\&quot;$mathjax\&quot; id=MathJax-script async&gt;&lt;/script&gt;\n&quot;</td></tr>
<tr><td class="h"><a name="1711"></a>1711</td><td></td><td></td><td></td><td></td><td class="s">    if $emphasis &amp;&amp; $has_math;</td></tr>
<tr><td class="h"><a name="1712"></a>1712</td><td class="c3">1</td><td class="c3"><span title="Avg 900ns">900ns</span></td><td></td><td></td><td class="s">$scripts .= &quot;&lt;script type=module src=\&quot;$islide\&quot;&gt;&lt;/script&gt;\n&quot;</td></tr>
<tr><td class="h"><a name="1713"></a>1713</td><td></td><td></td><td></td><td></td><td class="s">    if $has_slides;</td></tr>
<tr><td class="h"><a name="1714"></a>1714</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1715"></a>1715</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">if (defined $recording) {</td></tr>
<tr><td class="h"><a name="1716"></a>1716</td><td></td><td></td><td></td><td></td><td class="s">  $scripts .= &quot;&lt;script src=\&quot;https://www.youtube.com/iframe_api\&quot;&gt;&lt;/script&gt;\n&quot;</td></tr>
<tr><td class="h"><a name="1717"></a>1717</td><td></td><td></td><td></td><td></td><td class="s">      if $canonical_recording =~ /^https:\/\/(www\.)?youtube\.com\//;</td></tr>
<tr><td class="h"><a name="1718"></a>1718</td><td></td><td></td><td></td><td></td><td class="s">  # Copy the script whose code is further down between __DATA__ and __END__:</td></tr>
<tr><td class="h"><a name="1719"></a>1719</td><td></td><td></td><td></td><td></td><td class="s">  $scripts .= $_ while ($_ = &lt;main::DATA&gt;) !~ /^__END__/;</td></tr>
<tr><td class="h"><a name="1720"></a>1720</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1721"></a>1721</td><td class="c3">1</td><td class="c0"><span title="Avg 15µs">15µs</span></td><td class="c3">1</td><td class="c3">11µs</td><td class="s">close main::DATA;<div class="calls"><div class="calls_out"># spent    11µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_close">main::CORE:close</a></div></div></td></tr>
<tr><td class="h"><a name="1722"></a>1722</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1723"></a>1723</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">$logo = &quot;&lt;p&gt;$logo&lt;/p&gt;\n\n&quot; if defined $logo &amp;&amp; $logo ne '';</td></tr>
<tr><td class="h"><a name="1724"></a>1724</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">$logo = '' if !defined $logo &amp;&amp; ($styleset eq 'fancy');</td></tr>
<tr><td class="h"><a name="1725"></a>1725</td><td class="c3">1</td><td class="c3"><span title="Avg 900ns">900ns</span></td><td></td><td></td><td class="s">$logo = &quot;&lt;p&gt;$w3clogo&lt;/p&gt;\n\n&quot; if !defined $logo;</td></tr>
<tr><td class="h"><a name="1726"></a>1726</td><td class="c3">1</td><td class="c3"><span title="Avg 700ns">700ns</span></td><td></td><td></td><td class="s">my $draft = $final ? &quot;&quot; : &quot;&amp;ndash; DRAFT &amp;ndash;&lt;br&gt;\n&quot;;</td></tr>
<tr><td class="h"><a name="1727"></a>1727</td><td class="c3">1</td><td class="c3"><span title="Avg 1µs">1µs</span></td><td></td><td></td><td class="s">my $log = defined $logging_url?&quot;&lt;a href=\&quot;$logging_url\&quot;&gt;$irclog_icon&lt;/a&gt;\n&quot;:&quot;&quot;;</td></tr>
<tr><td class="h"><a name="1728"></a>1728</td><td class="c3">1</td><td class="c0"><span title="Avg 30µs">30µs</span></td><td class="c3">2</td><td class="c3">22µs</td><td class="s">my $present = esc(join(&quot;, &quot;, map($present{$_}, sort keys %present))) || '-';<div class="calls"><div class="calls_out"># spent    14µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_sort">main::CORE:sort</a>
# spent     8µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a></div></div></td></tr>
<tr><td class="h"><a name="1729"></a>1729</td><td class="c3">1</td><td class="c3"><span title="Avg 1µs">1µs</span></td><td></td><td></td><td class="s">$present = &quot;&lt;details&gt;&lt;summary&gt;&quot;.($present =~ s/,/,&lt;\/summary&gt;/r).&quot;&lt;/details&gt;&quot;</td></tr>
<tr><td class="h"><a name="1730"></a>1730</td><td></td><td></td><td></td><td></td><td class="s">  if scalar keys %present &gt; $collapse_limit; # Collapsed if the list is long</td></tr>
<tr><td class="h"><a name="1731"></a>1731</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td class="c3">2</td><td class="c3">4µs</td><td class="s">my $regrets = esc(join(&quot;, &quot;, map($regrets{$_}, sort keys %regrets))) || '-';<div class="calls"><div class="calls_out"># spent     3µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>
# spent   200ns making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_sort">main::CORE:sort</a></div></div></td></tr>
<tr><td class="h"><a name="1732"></a>1732</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">$regrets = &quot;&lt;details&gt;&lt;summary&gt;&quot;.($regrets =~ s/,/,&lt;\/summary&gt;/r).&quot;&lt;/details&gt;&quot;</td></tr>
<tr><td class="h"><a name="1733"></a>1733</td><td></td><td></td><td></td><td></td><td class="s">  if scalar keys %regrets &gt; $collapse_limit; # Collapsed if the list is long</td></tr>
<tr><td class="h"><a name="1734"></a>1734</td><td class="c3">1</td><td class="c2"><span title="Avg 4µs">4µs</span></td><td class="c3">2</td><td class="c3">10µs</td><td class="s">my $scribes = esc(join(&quot;, &quot;,map($scribenames{$_}//$_,fc_uniq(@scribes))))||'-';<div class="calls"><div class="calls_out"># spent     6µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#495">main::fc_uniq</a>
# spent     4µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a></div></div></td></tr>
<tr><td class="h"><a name="1735"></a>1735</td><td class="c3">1</td><td class="c3"><span title="Avg 2µs">2µs</span></td><td class="c3">2</td><td class="c3">4µs</td><td class="s">my $chairs = esc(join(&quot;, &quot;, sort {fc($a) cmp fc($b)} values %chairs)) || '-';<div class="calls"><div class="calls_out"># spent     3µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>
# spent   200ns making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_sort">main::CORE:sort</a></div></div></td></tr>
<tr><td class="h"><a name="1736"></a>1736</td><td></td><td></td><td></td><td></td><td class="s">my $diagnostics = !$embed_diagnostics || !@diagnostics ? &quot;&quot; :</td></tr>
<tr><td class="h"><a name="1737"></a>1737</td><td></td><td></td><td></td><td></td><td class="s">  &quot;&lt;div class=diagnostics&gt;\n&lt;h2&gt;Diagnostics&lt;\/h2&gt;\n&quot; .</td></tr>
<tr><td class="h"><a name="1738"></a>1738</td><td class="c0">8</td><td class="c0"><span title="Avg 912ns">7µs</span></td><td class="c0">7</td><td class="c3">26µs</td><td class="s">  join(&quot;&quot;, map {&quot;&lt;p class=warning&gt;&quot; . esc($_) . &quot;&lt;/p&gt;\n&quot;} @diagnostics) .<div class="calls"><div class="calls_out">  # spent    26µs making 7 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>, avg 4µs/call</div></div></td></tr>
<tr><td class="h"><a name="1739"></a>1739</td><td></td><td></td><td></td><td></td><td class="s">  &quot;&lt;/div&gt;\n&quot;;</td></tr>
<tr><td class="h"><a name="1740"></a>1740</td><td class="c3">1</td><td class="c3"><span title="Avg 600ns">600ns</span></td><td></td><td></td><td class="s">my $videoplayer = ! defined $recording ? '' :</td></tr>
<tr><td class="h"><a name="1741"></a>1741</td><td></td><td></td><td></td><td></td><td class="s">    &quot;&lt;section id=recording&gt;\n&quot; .</td></tr>
<tr><td class="h"><a name="1742"></a>1742</td><td></td><td></td><td></td><td></td><td class="s">    &quot;&lt;p class=summary&gt;Recording: $recording_link\n&quot; .</td></tr>
<tr><td class="h"><a name="1743"></a>1743</td><td></td><td></td><td></td><td></td><td class="s">    &quot;&lt;div class=video&gt;\n&quot; .</td></tr>
<tr><td class="h"><a name="1744"></a>1744</td><td></td><td></td><td></td><td></td><td class="s">    &quot;&lt;iframe src=\&quot;$embedded_recording\&quot; &quot; .</td></tr>
<tr><td class="h"><a name="1745"></a>1745</td><td></td><td></td><td></td><td></td><td class="s">    &quot;width=600 height=340 type=\&quot;text/html\&quot; frameborder=0 allowfullscreen &quot; .</td></tr>
<tr><td class="h"><a name="1746"></a>1746</td><td></td><td></td><td></td><td></td><td class="s">    &quot;allow=\&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\&quot;&gt;&lt;/iframe&gt;\n&quot; .</td></tr>
<tr><td class="h"><a name="1747"></a>1747</td><td></td><td></td><td></td><td></td><td class="s">    &quot;&lt;/div&gt;\n&quot; .</td></tr>
<tr><td class="h"><a name="1748"></a>1748</td><td></td><td></td><td></td><td></td><td class="s">    &quot;&lt;/section&gt;\n&quot;;</td></tr>
<tr><td class="h"><a name="1749"></a>1749</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1750"></a>1750</td><td></td><td></td><td></td><td></td><td class="s"># Collect lists of actions, resolutions and issues from the @records.</td></tr>
<tr><td class="h"><a name="1751"></a>1751</td><td></td><td></td><td></td><td></td><td class="s"># Wrap each list in a &lt;div&gt; and add a corresponding item in the ToC</td></tr>
<tr><td class="h"><a name="1752"></a>1752</td><td></td><td></td><td></td><td></td><td class="s"># (unless the list is empty).</td></tr>
<tr><td class="h"><a name="1753"></a>1753</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1754"></a>1754</td><td></td><td></td><td></td><td></td><td class="s">my $actions = join(&quot;&quot;,</td></tr>
<tr><td class="h"><a name="1755"></a>1755</td><td></td><td></td><td></td><td></td><td class="s">                   map(&quot;&lt;li&gt;&lt;a href=\&quot;#&quot; . $_-&gt;{id} . &quot;\&quot;&gt;&quot; .</td></tr>
<tr><td class="h"><a name="1756"></a>1756</td><td></td><td></td><td></td><td></td><td class="s">                       esc($_-&gt;{text}, $emphasis, -1, 1) . &quot;&lt;/a&gt;&lt;/li&gt;\n&quot;,</td></tr>
<tr><td class="h"><a name="1757"></a>1757</td><td class="c3">1</td><td class="c0"><span title="Avg 32µs">32µs</span></td><td></td><td></td><td class="s">                       grep($_-&gt;{type} eq 'a', @records)));</td></tr>
<tr><td class="h"><a name="1758"></a>1758</td><td class="c3">1</td><td class="c3"><span title="Avg 400ns">400ns</span></td><td></td><td></td><td class="s">my $actiontoc = !$actions ? '' :</td></tr>
<tr><td class="h"><a name="1759"></a>1759</td><td></td><td></td><td></td><td></td><td class="s">    &quot;&lt;li class=app&gt;&lt;a href=\&quot;#ActionSummary\&quot;&gt;Summary of action items&lt;/a&gt;&lt;/li&gt;\n&quot;;</td></tr>
<tr><td class="h"><a name="1760"></a>1760</td><td class="c3">1</td><td class="c3"><span title="Avg 100ns">100ns</span></td><td></td><td></td><td class="s">$actions = &quot;\n&lt;div id=ActionSummary&gt;\n&lt;h2&gt;Summary of action items&lt;/h2&gt;</td></tr>
<tr><td class="h"><a name="1761"></a>1761</td><td></td><td></td><td></td><td></td><td class="s">&lt;ol&gt;\n$actions&lt;/ol&gt;\n&lt;/div&gt;\n&quot; if $actions;</td></tr>
<tr><td class="h"><a name="1762"></a>1762</td><td class="c1">2</td><td class="c3"><span title="Avg 1µs">2µs</span></td><td class="c3">1</td><td class="c3">300ns</td><td class="s">if ($keeplines) {$actions =~ s/\t/&lt;br&gt;\n… /g;} else {$actions =~ tr/\t/ /;}<div class="calls"><div class="calls_out"># spent   300ns making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a></div></div></td></tr>
<tr><td class="h"><a name="1763"></a>1763</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1764"></a>1764</td><td></td><td></td><td></td><td></td><td class="s">my $resolutions = join(&quot;&quot;,</td></tr>
<tr><td class="h"><a name="1765"></a>1765</td><td></td><td></td><td></td><td></td><td class="s">                       map(&quot;&lt;li&gt;&lt;a href=\&quot;#&quot; . $_-&gt;{id} . &quot;\&quot;&gt;&quot; .</td></tr>
<tr><td class="h"><a name="1766"></a>1766</td><td></td><td></td><td></td><td></td><td class="s">                           esc($_-&gt;{text}, $emphasis, -1, 1) . &quot;&lt;/a&gt;&lt;/li&gt;\n&quot;,</td></tr>
<tr><td class="h"><a name="1767"></a>1767</td><td class="c3">1</td><td class="c0"><span title="Avg 16µs">16µs</span></td><td></td><td></td><td class="s">                           grep($_-&gt;{type} eq 'r', @records)));</td></tr>
<tr><td class="h"><a name="1768"></a>1768</td><td class="c3">1</td><td class="c3"><span title="Avg 500ns">500ns</span></td><td></td><td></td><td class="s">my $resolutiontoc = !$resolutions ? '' :</td></tr>
<tr><td class="h"><a name="1769"></a>1769</td><td></td><td></td><td></td><td></td><td class="s">    &quot;&lt;li class=app&gt;&lt;a href=\&quot;#ResolutionSummary\&quot;&gt;Summary of resolutions&lt;/a&gt;&lt;/li&gt;\n&quot;;</td></tr>
<tr><td class="h"><a name="1770"></a>1770</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">$resolutions = &quot;\n&lt;div id=ResolutionSummary&gt;\n&lt;h2&gt;Summary of resolutions&lt;/h2&gt;</td></tr>
<tr><td class="h"><a name="1771"></a>1771</td><td></td><td></td><td></td><td></td><td class="s">&lt;ol&gt;\n$resolutions&lt;/ol&gt;\n&lt;/div&gt;\n&quot; if $resolutions;</td></tr>
<tr><td class="h"><a name="1772"></a>1772</td><td class="c1">2</td><td class="c3"><span title="Avg 900ns">2µs</span></td><td class="c3">1</td><td class="c3">300ns</td><td class="s">if ($keeplines) {$resolutions =~ s/\t/&lt;br&gt;\n… /g;} else {$resolutions =~ tr/\t/ /;}<div class="calls"><div class="calls_out"># spent   300ns making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a></div></div></td></tr>
<tr><td class="h"><a name="1773"></a>1773</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1774"></a>1774</td><td></td><td></td><td></td><td></td><td class="s">my $issues = join(&quot;&quot;,</td></tr>
<tr><td class="h"><a name="1775"></a>1775</td><td></td><td></td><td></td><td></td><td class="s">                  map(&quot;&lt;li&gt;&lt;a href=\&quot;#&quot; . $_-&gt;{id} . &quot;\&quot;&gt;&quot; .</td></tr>
<tr><td class="h"><a name="1776"></a>1776</td><td></td><td></td><td></td><td></td><td class="s">                      esc($_-&gt;{text}, $emphasis, -1, 1) . &quot;&lt;/a&gt;&lt;/li&gt;\n&quot;,</td></tr>
<tr><td class="h"><a name="1777"></a>1777</td><td class="c3">1</td><td class="c0"><span title="Avg 20µs">20µs</span></td><td></td><td></td><td class="s">                      grep($_-&gt;{type} eq 'u', @records)));</td></tr>
<tr><td class="h"><a name="1778"></a>1778</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">my $issuetoc = !$issues ? '' :</td></tr>
<tr><td class="h"><a name="1779"></a>1779</td><td></td><td></td><td></td><td></td><td class="s">    &quot;&lt;li class=app&gt;&lt;a href=\&quot;#IssueSummary\&quot;&gt;Summary of issues&lt;/a&gt;&lt;/li&gt;\n&quot;;</td></tr>
<tr><td class="h"><a name="1780"></a>1780</td><td class="c3">1</td><td class="c3"><span title="Avg 200ns">200ns</span></td><td></td><td></td><td class="s">$issues = &quot;\n&lt;div id=IssueSummary&gt;\n&lt;h2&gt;Summary of issues&lt;/h2&gt;</td></tr>
<tr><td class="h"><a name="1781"></a>1781</td><td></td><td></td><td></td><td></td><td class="s">&lt;ol&gt;\n$issues&lt;/ol&gt;\n&lt;/div&gt;\n&quot; if $issues;</td></tr>
<tr><td class="h"><a name="1782"></a>1782</td><td class="c1">2</td><td class="c3"><span title="Avg 750ns">2µs</span></td><td class="c3">1</td><td class="c3">100ns</td><td class="s">if ($keeplines) {$issues =~ s/\t/&lt;br&gt;\n… /g;} else {$issues =~ tr/\t/ /;}<div class="calls"><div class="calls_out"># spent   100ns making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a></div></div></td></tr>
<tr><td class="h"><a name="1783"></a>1783</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1784"></a>1784</td><td></td><td></td><td></td><td></td><td class="s"># Collect topics (records with type 't' or 'T') for the ToC.</td></tr>
<tr><td class="h"><a name="1785"></a>1785</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1786"></a>1786</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">my $topics = '';</td></tr>
<tr><td class="h"><a name="1787"></a>1787</td><td class="c3">1</td><td class="c3"><span title="Avg 300ns">300ns</span></td><td></td><td></td><td class="s">my $prev_level = ' ';</td></tr>
<tr><td class="h"><a name="1788"></a>1788</td><td class="c3">1</td><td class="c0"><span title="Avg 126µs">126µs</span></td><td class="c0">202</td><td class="c3">22µs</td><td class="s">foreach my $t (grep($_-&gt;{type} =~ /^[Tt]$/, @records)) {<div class="calls"><div class="calls_out"># spent    22µs making 202 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_match">main::CORE:match</a>, avg 107ns/call</div></div></td></tr>
<tr><td class="h"><a name="1789"></a>1789</td><td></td><td></td><td></td><td></td><td class="s">  my $s = &quot;&lt;li&gt;&lt;a href=\&quot;#&quot; . $t-&gt;{id} . &quot;\&quot;&gt;&quot; .</td></tr>
<tr><td class="h"><a name="1790"></a>1790</td><td class="c0">3</td><td class="c3"><span title="Avg 1µs">3µs</span></td><td class="c1">3</td><td class="c1">62µs</td><td class="s">      esc($t-&gt;{text}, $emphasis, -1, 1) . &quot;&lt;/a&gt;&quot;;<div class="calls"><div class="calls_out">      # spent    62µs making 3 calls to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#630">main::esc</a>, avg 21µs/call</div></div></td></tr>
<tr><td class="h"><a name="1791"></a>1791</td><td class="c0">3</td><td class="c3"><span title="Avg 933ns">3µs</span></td><td></td><td></td><td class="s">  if ($prev_level eq $t-&gt;{type}) {$topics .= &quot;&lt;/li&gt;\n$s&quot;}</td></tr>
<tr><td class="h"><a name="1792"></a>1792</td><td></td><td></td><td></td><td></td><td class="s">  elsif ($prev_level eq 't') {$topics .= &quot;\n&lt;ol&gt;\n$s&quot;}</td></tr>
<tr><td class="h"><a name="1793"></a>1793</td><td></td><td></td><td></td><td></td><td class="s">  elsif ($prev_level eq 'T') {$topics .= &quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/li&gt;\n$s&quot;}</td></tr>
<tr><td class="h"><a name="1794"></a>1794</td><td></td><td></td><td></td><td></td><td class="s">  elsif ($t-&gt;{type} eq 't') {$topics .= $s}</td></tr>
<tr><td class="h"><a name="1795"></a>1795</td><td></td><td></td><td></td><td></td><td class="s">  else {$topics .= &quot;&lt;li&gt;\n&lt;ol&gt;\n$s&quot;}</td></tr>
<tr><td class="h"><a name="1796"></a>1796</td><td class="c0">3</td><td class="c3"><span title="Avg 300ns">900ns</span></td><td></td><td></td><td class="s">  $prev_level = $t-&gt;{type};</td></tr>
<tr><td class="h"><a name="1797"></a>1797</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h"><a name="1798"></a>1798</td><td class="c3">1</td><td class="c3"><span title="Avg 700ns">700ns</span></td><td></td><td></td><td class="s">if ($prev_level eq 'T') {$topics .= &quot;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;/li&gt;\n&quot;}</td></tr>
<tr><td class="h"><a name="1799"></a>1799</td><td></td><td></td><td></td><td></td><td class="s">elsif ($prev_level eq 't') {$topics .= &quot;&lt;/li&gt;\n&quot;}</td></tr>
<tr><td class="h"><a name="1800"></a>1800</td><td class="c1">2</td><td class="c0"><span title="Avg 4µs">8µs</span></td><td class="c3">1</td><td class="c3">2µs</td><td class="s">if ($keeplines) {$topics =~ s/\t/&lt;br&gt;\n… /g;} else {$topics =~ tr/\t/ /;}<div class="calls"><div class="calls_out"># spent     2µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_subst">main::CORE:subst</a></div></div></td></tr>
<tr><td class="h"><a name="1801"></a>1801</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1802"></a>1802</td><td></td><td></td><td></td><td></td><td class="s"># And output the formatted HTML.</td></tr>
<tr><td class="h"><a name="1803"></a>1803</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h"><a name="1804"></a>1804</td><td class="c3">1</td><td class="c0"><span title="Avg 145µs">145µs</span></td><td class="c3">1</td><td class="c0">128µs</td><td class="s">print &quot;&lt;!DOCTYPE html&gt;<div class="calls"><div class="calls_out"># spent   128µs making 1 call to <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#main__CORE_print">main::CORE:print</a></div></div></td></tr>
<tr><td class="h"><a name="1805"></a>1805</td><td></td><td></td><td></td><td></td><td class="s">&lt;html lang=en&gt;</td></tr>
<tr><td class="h"><a name="1806"></a>1806</td><td></td><td></td><td></td><td></td><td class="s">&lt;head&gt;</td></tr>
<tr><td class="h"><a name="1807"></a>1807</td><td></td><td></td><td></td><td></td><td class="s">&lt;meta charset=utf-8&gt;</td></tr>
<tr><td class="h"><a name="1808"></a>1808</td><td></td><td></td><td></td><td></td><td class="s">&lt;title&gt;$meeting &amp;ndash; $date&lt;/title&gt;</td></tr>
<tr><td class="h"><a name="1809"></a>1809</td><td></td><td></td><td></td><td></td><td class="s">&lt;meta name=viewport content=\&quot;width=device-width\&quot;&gt;</td></tr>
<tr><td class="h"><a name="1810"></a>1810</td><td></td><td></td><td></td><td></td><td class="s">$style</td></tr>
<tr><td class="h"><a name="1811"></a>1811</td><td></td><td></td><td></td><td></td><td class="s">$scripts&lt;/head&gt;</td></tr>
<tr><td class="h"><a name="1812"></a>1812</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1813"></a>1813</td><td></td><td></td><td></td><td></td><td class="s">&lt;body&gt;</td></tr>
<tr><td class="h"><a name="1814"></a>1814</td><td></td><td></td><td></td><td></td><td class="s">&lt;header&gt;</td></tr>
<tr><td class="h"><a name="1815"></a>1815</td><td></td><td></td><td></td><td></td><td class="s">$logo&lt;h1&gt;$draft$meeting&lt;/h1&gt;</td></tr>
<tr><td class="h"><a name="1816"></a>1816</td><td></td><td></td><td></td><td></td><td class="s">&lt;h2&gt;$date&lt;/h2&gt;</td></tr>
<tr><td class="h"><a name="1817"></a>1817</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1818"></a>1818</td><td></td><td></td><td></td><td></td><td class="s">&lt;nav id=links&gt;</td></tr>
<tr><td class="h"><a name="1819"></a>1819</td><td></td><td></td><td></td><td></td><td class="s">$prev_meeting$agenda$log$next_meeting&lt;/nav&gt;</td></tr>
<tr><td class="h"><a name="1820"></a>1820</td><td></td><td></td><td></td><td></td><td class="s">&lt;/header&gt;</td></tr>
<tr><td class="h"><a name="1821"></a>1821</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1822"></a>1822</td><td></td><td></td><td></td><td></td><td class="s">&lt;div id=prelims&gt;</td></tr>
<tr><td class="h"><a name="1823"></a>1823</td><td></td><td></td><td></td><td></td><td class="s">&lt;div id=attendees&gt;</td></tr>
<tr><td class="h"><a name="1824"></a>1824</td><td></td><td></td><td></td><td></td><td class="s">&lt;h2&gt;Attendees&lt;/h2&gt;</td></tr>
<tr><td class="h"><a name="1825"></a>1825</td><td></td><td></td><td></td><td></td><td class="s">&lt;dl class=intro&gt;</td></tr>
<tr><td class="h"><a name="1826"></a>1826</td><td></td><td></td><td></td><td></td><td class="s">&lt;dt&gt;Present&lt;/dt&gt;&lt;dd&gt;$present&lt;/dd&gt;</td></tr>
<tr><td class="h"><a name="1827"></a>1827</td><td></td><td></td><td></td><td></td><td class="s">&lt;dt&gt;Regrets&lt;/dt&gt;&lt;dd&gt;$regrets&lt;/dd&gt;</td></tr>
<tr><td class="h"><a name="1828"></a>1828</td><td></td><td></td><td></td><td></td><td class="s">&lt;dt&gt;Chair&lt;/dt&gt;&lt;dd&gt;$chairs&lt;/dd&gt;</td></tr>
<tr><td class="h"><a name="1829"></a>1829</td><td></td><td></td><td></td><td></td><td class="s">&lt;dt&gt;Scribe&lt;/dt&gt;&lt;dd&gt;$scribes&lt;/dd&gt;</td></tr>
<tr><td class="h"><a name="1830"></a>1830</td><td></td><td></td><td></td><td></td><td class="s">&lt;/dl&gt;</td></tr>
<tr><td class="h"><a name="1831"></a>1831</td><td></td><td></td><td></td><td></td><td class="s">&lt;/div&gt;</td></tr>
<tr><td class="h"><a name="1832"></a>1832</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1833"></a>1833</td><td></td><td></td><td></td><td></td><td class="s">&lt;nav id=toc&gt;</td></tr>
<tr><td class="h"><a name="1834"></a>1834</td><td></td><td></td><td></td><td></td><td class="s">&lt;h2&gt;Contents&lt;/h2&gt;</td></tr>
<tr><td class="h"><a name="1835"></a>1835</td><td></td><td></td><td></td><td></td><td class="s">&lt;ol&gt;</td></tr>
<tr><td class="h"><a name="1836"></a>1836</td><td></td><td></td><td></td><td></td><td class="s">$topics$actiontoc$resolutiontoc$issuetoc&lt;/ol&gt;</td></tr>
<tr><td class="h"><a name="1837"></a>1837</td><td></td><td></td><td></td><td></td><td class="s">&lt;/nav&gt;</td></tr>
<tr><td class="h"><a name="1838"></a>1838</td><td></td><td></td><td></td><td></td><td class="s">&lt;/div&gt;</td></tr>
<tr><td class="h"><a name="1839"></a>1839</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1840"></a>1840</td><td></td><td></td><td></td><td></td><td class="s">&lt;main id=meeting class=meeting&gt;</td></tr>
<tr><td class="h"><a name="1841"></a>1841</td><td></td><td></td><td></td><td></td><td class="s">&lt;h2&gt;Meeting minutes&lt;/h2&gt;</td></tr>
<tr><td class="h"><a name="1842"></a>1842</td><td></td><td></td><td></td><td></td><td class="s">$videoplayer&lt;section&gt;$minutes&lt;/section&gt;</td></tr>
<tr><td class="h"><a name="1843"></a>1843</td><td></td><td></td><td></td><td></td><td class="s">&lt;/main&gt;</td></tr>
<tr><td class="h"><a name="1844"></a>1844</td><td></td><td></td><td></td><td></td><td class="s">$actions$resolutions$issues</td></tr>
<tr><td class="h"><a name="1845"></a>1845</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1846"></a>1846</td><td></td><td></td><td></td><td></td><td class="s">&lt;address&gt;Minutes manually created (not a transcript), formatted by &lt;a</td></tr>
<tr><td class="h"><a name="1847"></a>1847</td><td></td><td></td><td></td><td></td><td class="s">href=\&quot;https://w3c.github.io/scribe2/scribedoc.html\&quot;</td></tr>
<tr><td class="h"><a name="1848"></a>1848</td><td></td><td></td><td></td><td></td><td class="s">&gt;scribe.perl&lt;/a&gt; version $revision ($versiondate).&lt;/address&gt;</td></tr>
<tr><td class="h"><a name="1849"></a>1849</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1850"></a>1850</td><td></td><td></td><td></td><td></td><td class="s">$diagnostics&lt;/body&gt;</td></tr>
<tr><td class="h"><a name="1851"></a>1851</td><td></td><td></td><td></td><td></td><td class="s">&lt;/html&gt;</td></tr>
<tr><td class="h"><a name="1852"></a>1852</td><td></td><td></td><td></td><td></td><td class="s">&quot;;</td></tr>
<tr><td class="h"><a name="1853"></a>1853</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1854"></a>1854</td><td class="c3">1</td><td class="c0"><span title="Avg 106µs">106µs</span></td><td></td><td></td><td class="s">print STDERR map(&quot;* $_\n&quot;, @diagnostics) if !$embed_diagnostics;</td></tr>
<tr><td class="h"><a name="1855"></a>1855</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1856"></a>1856</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1857"></a>1857</td><td></td><td></td><td></td><td></td><td class="s"># The Javascript code that adds play/pause buttons when generated</td></tr>
<tr><td class="h"><a name="1858"></a>1858</td><td></td><td></td><td></td><td></td><td class="s"># minutes with an embedded video are displayed in a browser.</td></tr>
<tr><td class="h"><a name="1859"></a>1859</td><td></td><td></td><td></td><td></td><td class="s"># The code ends at __END__.</td></tr>
<tr><td class="h"><a name="1860"></a>1860</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="1861"></a>1861</td><td></td><td></td><td></td><td></td><td class="s">__DATA__</td></tr>
<tr><td class="s"><a name=""></a>&nbsp;</td><td></td><td></td><td></td><td></td><td class="s"></td></tr>
<tr><td class="h"><a name="Internals__SvREADONLY"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 15µs within Internals::SvREADONLY which was called 29 times, avg 521ns/call:
# 27 times (14µs+0s) by constant::import at <a href="constant-pm-7-line.html#164">line 164 of constant.pm</a>, avg 522ns/call
#     once (800ns+0s) by constant::BEGIN@24 at <a href="constant-pm-7-line.html#33">line 33 of constant.pm</a>
#     once (200ns+0s) by constant::BEGIN@24 at <a href="constant-pm-7-line.html#34">line 34 of constant.pm</a></div></div>sub Internals::SvREADONLY; # xsub<br />        </td></tr>
<tr><td class="h"><a name="UNIVERSAL__VERSION"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 39µs within UNIVERSAL::VERSION which was called 7 times, avg 6µs/call:
#    once (8µs+0s) by URI::Escape::BEGIN@147 at <a href="URI-Escape-pm-81-line.html#147">line 147 of URI/Escape.pm</a>
#    once (8µs+0s) by HTTP::Status::BEGIN@8 at <a href="HTTP-Status-pm-83-line.html#8">line 8 of HTTP/Status.pm</a>
#    once (6µs+0s) by Pod::Simple::BEGIN@8 at <a href="Pod-Simple-pm-32-line.html#8">line 8 of Pod/Simple.pm</a>
#    once (5µs+0s) by Encode::BEGIN@15 at <a href="Encode-pm-23-line.html#15">line 15 of Encode.pm</a>
#    once (4µs+0s) by Try::Tiny::BEGIN@10 at <a href="Try-Tiny-pm-91-line.html#10">line 10 of Try/Tiny.pm</a>
#    once (4µs+0s) by Try::Tiny::BEGIN@16 at <a href="Sub-Util-pm-92-line.html#22">line 22 of Sub/Util.pm</a>
#    once (4µs+0s) by LWP::Protocol::BEGIN@11 at <a href="Scalar-Util-pm-89-line.html#24">line 24 of Scalar/Util.pm</a></div></div>sub UNIVERSAL::VERSION; # xsub<br />        </td></tr>
<tr><td class="h"><a name="UNIVERSAL__isa"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 700ns within UNIVERSAL::isa which was called:
#    once (700ns+0s) by Getopt::Long::GetOptionsFromArray at <a href="Getopt-Long-pm-3-line.html#475">line 475 of Getopt/Long.pm</a></div></div>sub UNIVERSAL::isa; # xsub<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_binmode"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 3µs within main::CORE:binmode which was called 2 times, avg 1µs/call:
#    once (2µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#941">line 941</a>
#    once (700ns+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#942">line 942</a></div></div>sub main::CORE:binmode; # opcode<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_close"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 11µs within main::CORE:close which was called:
#    once (11µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1721">line 1721</a></div></div>sub main::CORE:close; # opcode<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_match"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 18.6ms within main::CORE:match which was called 13893 times, avg 1µs/call:
# 12065 times (5.36ms+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1092">line 1092</a>, avg 445ns/call
#   419 times (218µs+0s) by main::RRSAgent_text_format at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#224">line 224</a>, avg 519ns/call
#   216 times (106µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#703">line 703</a>, avg 491ns/call
#   205 times (12.6ms+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#651">line 651</a>, avg 62µs/call
#   202 times (76µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#985">line 985</a>, avg 378ns/call
#   202 times (37µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1042">line 1042</a>, avg 182ns/call
#   202 times (36µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1659">line 1659</a>, avg 181ns/call
#   202 times (22µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1788">line 1788</a>, avg 107ns/call
#    92 times (28µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#653">line 653</a>, avg 300ns/call
#    20 times (16µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1067">line 1067</a>, avg 810ns/call
#    18 times (7µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#656">line 656</a>, avg 400ns/call
#     8 times (5µs+0s) by main::break_url at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#589">line 589</a>, avg 612ns/call
#     8 times (4µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1201">line 1201</a>, avg 538ns/call
#     8 times (3µs+0s) by main::break_url at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#591">line 591</a>, avg 362ns/call
#     7 times (2µs+0s) by main::break_url at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#593">line 593</a>, avg 343ns/call
#     4 times (16µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#990">line 990</a>, avg 4µs/call
#     4 times (4µs+0s) by main::add_scribes at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#755">line 755</a>, avg 1µs/call
#     4 times (800ns+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#995">line 995</a>, avg 200ns/call
#     3 times (2µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1644">line 1644</a>, avg 800ns/call
#     2 times (4µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#707">line 707</a>, avg 2µs/call
#        once (2µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1556">line 1556</a>
#        once (1µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1176">line 1176</a></div></div>sub main::CORE:match; # opcode<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_pack"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 9µs within main::CORE:pack which was called:
#    once (9µs+0s) by main::BEGIN@135 at <a href="Encode-Guess-pm-65-line.html#22">line 22 of Encode/Guess.pm</a></div></div>sub main::CORE:pack; # opcode<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_print"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 128µs within main::CORE:print which was called:
#    once (128µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1804">line 1804</a></div></div>sub main::CORE:print; # opcode<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_readline"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 55µs within main::CORE:readline which was called:
#    once (55µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#953">line 953</a></div></div>sub main::CORE:readline; # opcode<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_regcomp"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 2.19ms within main::CORE:regcomp which was called 2036 times, avg 1µs/call:
# 1410 times (1.68ms+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1092">line 1092</a>, avg 1µs/call
#  386 times (56µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1019">line 1019</a>, avg 146ns/call
#  205 times (259µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#651">line 651</a>, avg 1µs/call
#   14 times (9µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#653">line 653</a>, avg 636ns/call
#   10 times (97µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1067">line 1067</a>, avg 10µs/call
#    4 times (29µs+0s) by main::add_scribes at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#755">line 755</a>, avg 7µs/call
#    4 times (18µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#995">line 995</a>, avg 4µs/call
#    3 times (36µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1644">line 1644</a>, avg 12µs/call</div></div>sub main::CORE:regcomp; # opcode<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_sort"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 52µs within main::CORE:sort which was called 6 times, avg 9µs/call:
#    once (15µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1573">line 1573</a>
#    once (14µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1728">line 1728</a>
#    once (14µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1577">line 1577</a>
#    once (9µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1575">line 1575</a>
#    once (200ns+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1731">line 1731</a>
#    once (200ns+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1735">line 1735</a></div></div>sub main::CORE:sort; # opcode<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_subst"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 1.13ms within main::CORE:subst which was called 2502 times, avg 454ns/call:
# 456 times (195µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#713">line 713</a>, avg 427ns/call
# 456 times (184µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#714">line 714</a>, avg 403ns/call
# 456 times (167µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#716">line 716</a>, avg 365ns/call
# 456 times (160µs+0s) by main::esc at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#715">line 715</a>, avg 352ns/call
# 386 times (148µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1019">line 1019</a>, avg 385ns/call
# 202 times (40µs+0s) by main::is_cur_scribe at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#744">line 744</a>, avg 199ns/call
#  22 times (82µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1664">line 1664</a>, avg 4µs/call
#  22 times (66µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1662">line 1662</a>, avg 3µs/call
#  22 times (57µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1663">line 1663</a>, avg 3µs/call
#   7 times (26µs+0s) by main::break_url at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#595">line 595</a>, avg 4µs/call
#   4 times (1µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#993">line 993</a>, avg 350ns/call
#   4 times (1µs+0s) by main::add_scribes at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#756">line 756</a>, avg 275ns/call
#   2 times (3µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#854">line 854</a>, avg 2µs/call
#   2 times (1µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#857">line 857</a>, avg 700ns/call
#      once (2µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1800">line 1800</a>
#      once (1µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#960">line 960</a>
#      once (300ns+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1762">line 1762</a>
#      once (300ns+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1772">line 1772</a>
#      once (100ns+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1782">line 1782</a></div></div>sub main::CORE:subst; # opcode<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_substcont"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 143µs within main::CORE:substcont which was called 145 times, avg 988ns/call:
# 93 times (98µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1663">line 1663</a>, avg 1µs/call
# 44 times (41µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1662">line 1662</a>, avg 934ns/call
#  8 times (4µs+0s) by main::RUNTIME at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#1019">line 1019</a>, avg 562ns/call</div></div>sub main::CORE:substcont; # opcode<br />        </td></tr>
<tr><td class="h"><a name="main__CORE_unpack"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 374µs within main::CORE:unpack which was called 298 times, avg 1µs/call:
# 298 times (374µs+0s) by main::make_id at <a href="home-bert-Work-scribe2-scribe-perl-1-line.html#845">line 845</a>, avg 1µs/call</div></div>sub main::CORE:unpack; # opcode<br />        </td></tr>
<tr><td class="h"><a name="mro__method_changed_in"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 13µs within mro::method_changed_in which was called 27 times, avg 474ns/call:
# 27 times (13µs+0s) by constant::import at <a href="constant-pm-7-line.html#198">line 198 of constant.pm</a>, avg 474ns/call</div></div>sub mro::method_changed_in; # xsub<br />        </td></tr>
<tr><td class="h"><a name="version___bool"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 5µs within version::(bool which was called:
#    once (5µs+0s) by Pod::Usage::BEGIN@17 at <a href="Config-pm-17-line.html#59">line 59 of Config.pm</a></div></div>sub version::(bool; # xsub<br />        </td></tr>
<tr><td class="h"><a name="version___cmp"></a></td><td></td><td></td><td></td><td></td><td class="s"><div class="calls"><div class="calls_in"># spent 3µs within version::(cmp which was called:
#    once (3µs+0s) by Pod::Usage::BEGIN@17 at <a href="Config-pm-17-line.html#62">line 62 of Config.pm</a></div></div>sub version::(cmp; # xsub<br />        </td></tr>
</tbody></table></div>
        
            <script type="text/javascript">
              $(document).ready(function() { 

        $("#subs_table").tablesorter({
            sortList: [[3,1]],
            headers: {
                3: { sorter: 'fmt_time' },
                4: { sorter: 'fmt_time' }
            }
        });
        $(".floatHeaders").each( function(){ $(this).floatThead(); } );

        show_fragment_target();
        $(window).on('hashchange', function(e){
          show_fragment_target();
        });

    
 } );
            </script>
        
        <div class="footer">Report produced by the
        <a href="http://metacpan.org/release/Devel-NYTProf/">NYTProf 6.12</a>
        Perl profiler, developed by
        <a href="http://www.linkedin.com/in/timbunce">Tim Bunce</a> based on
        work by Adam Kaplan and Salvador Fandiño García.
        </div>
        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
    </body></html>